(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c2648808"],{2579:function(e,t,a){"use strict";var o=a("7a23");const c={class:"row mb-lg-4 mb-5"},n={class:"col-12"},s={ref:"pageTitle",class:"page-title-box d-sm-flex align-items-center justify-content-between"},i={class:"mb-sm-0"},l={class:"page-title-right me-5"},r={class:"breadcrumb m-0"},d=["onClick"];function p(e,t,a,p,m,O){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",c,[Object(o["createElementVNode"])("div",n,[Object(o["createElementVNode"])("div",s,[Object(o["createElementVNode"])("h4",i,Object(o["toDisplayString"])(a.title),1),Object(o["createElementVNode"])("div",l,[Object(o["createElementVNode"])("ol",r,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(a.items,(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{class:"breadItem",key:t},[Object(o["createElementVNode"])("a",{onClick:a=>O.goBack(e.text,t),href:"javascript: void(0);",class:Object(o["normalizeClass"])(["text-nowrap",{active:t+1==a.items.length}])},Object(o["toDisplayString"])(e.text)+Object(o["toDisplayString"])(t+1==a.items.length?"":"　>　"),11,d)]))),128))])])],512)])])}var m={components:{},props:{title:{type:String,default:""},items:{type:Array,default:()=>[]}},methods:{goBack(e,t){0===t&&"訂貨系統"!==e&&this.$route.path.includes("orderingSystem")&&this.$router.back()}},mounted(){}},O=(a("7477"),a("6b0d")),b=a.n(O);const E=b()(m,[["render",p],["__scopeId","data-v-0a664056"]]);t["a"]=E},"259b":function(e,t,a){"use strict";var o=a("7a23"),c=a("c449"),n=a.n(c),s=a("cb86"),i=a.n(s);const l=e=>(Object(o["pushScopeId"])("data-v-6425fd77"),e=e(),Object(o["popScopeId"])(),e),r={class:"text-end mb-2"},d=["disabled"],p=Object(o["createStaticVNode"])('<div class="row align-items-center bg-secondary-light py-2 mt-3" data-v-6425fd77><div class="col-2 col-lg-1 text-center" data-v-6425fd77><p class="fs-medium" data-v-6425fd77>刪除</p></div><div class="col-3 col-lg" data-v-6425fd77><p class="fs-medium" data-v-6425fd77>顯示器名稱</p><span class="fs-base text-lighter" data-v-6425fd77>顯示器編號</span></div><div class="col-4 col-lg" data-v-6425fd77><p class="fs-medium" data-v-6425fd77>KDS列印區分</p></div><div class="col-3 text-center" data-v-6425fd77><p class="fs-medium" data-v-6425fd77>操作</p></div></div>',1),m={class:"col-2 col-lg-1 text-center"},O=["value"],b={class:"col-3 col-lg"},E={class:"fs-medium"},u={class:"fs-base text-lighter"},y={class:"col-4 col-lg"},h={class:"fs-medium"},_={class:"col-3 d-center flex-wrap"},N=["onClick"],T=l(()=>Object(o["createElementVNode"])("img",{class:"me-1",src:n.a,alt:"檢視"},null,-1)),j=["onClick"],D=l(()=>Object(o["createElementVNode"])("img",{class:"me-1",src:i.a,alt:"編輯"},null,-1)),A={key:1,class:"emptyDataMessage"};function g(e,t,a,c,n,s){const i=Object(o["resolveComponent"])("SetKdsDisplay");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createElementVNode"])("div",r,[s.authority.can_delete?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:0,type:"button",disabled:0===n.selectDelList.length,onClick:t[0]||(t[0]=e=>s.showDeleteAlert()),class:"btn btn-light border px-4 me-2"}," 刪除 ",8,d)):Object(o["createCommentVNode"])("",!0),s.authority.can_add?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:1,type:"button",class:"btn btn-primary px-4","data-bs-toggle":"modal","data-bs-target":"#setKdsDisplay",onClick:t[1]||(t[1]=e=>n.setType="create")}," 新增 ")):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])(["container-fluid text-nowrap",{"data-list":!s.is_embeddedWeb}])},[p,e.kdsDisplayList.length>0?(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],{key:0},Object(o["renderList"])(e.kdsDisplayList,e=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"row align-items-center border-bottom py-2",key:e.id},[Object(o["createElementVNode"])("div",m,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{class:"form-check-input",type:"checkbox",name:"delCheckbox",value:e.id,"onUpdate:modelValue":t[2]||(t[2]=e=>n.selectDelList=e)},null,8,O),[[o["vModelCheckbox"],n.selectDelList]])]),Object(o["createElementVNode"])("div",b,[Object(o["createElementVNode"])("p",E,Object(o["toDisplayString"])(e.name),1),Object(o["createElementVNode"])("span",u,Object(o["toDisplayString"])(e.id),1)]),Object(o["createElementVNode"])("div",y,[Object(o["createElementVNode"])("p",h,Object(o["toDisplayString"])(s.translate(e.print_type)),1)]),Object(o["createElementVNode"])("div",_,[Object(o["createElementVNode"])("button",{type:"button",class:"btn operate-btn d-center m-1","data-bs-toggle":"modal","data-bs-target":"#setKdsDisplay",onClick:t=>s.setOperateData(e,"view")},[T,Object(o["createTextVNode"])(" 檢視 ")],8,N),s.authority.can_edit?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:0,type:"button",class:"btn operate-btn d-center m-1","data-bs-toggle":"modal","data-bs-target":"#setKdsDisplay",onClick:t=>s.setOperateData(e,"edit")},[D,Object(o["createTextVNode"])(" 編輯 ")],8,j)):Object(o["createCommentVNode"])("",!0)])]))),128)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",A,"目前還沒有建立資料哟～"))],2),Object(o["createVNode"])(i,{setType:n.setType,editData:n.editData,onGetData:s.getData},null,8,["setType","editData","onGetData"])],64)}a("14d9");var C=a("5502"),k=a("31c3");const I={class:"modal fade store-edit-modal",id:"setKdsDisplay",tabindex:"-1","aria-hidden":"true","data-bs-focus":"false"},f={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg modal-fullscreen-lg-down"},v={class:"modal-content h-100"},R={class:"modal-header"},V={class:"fs-title fw-normal"},P={class:"modal-body"},S={class:"container-fluid"},L={class:"row"},w={class:"col-md-6"},B={class:"row item-spacing"},M=Object(o["createElementVNode"])("div",{class:"col text-end"},[Object(o["createElementVNode"])("label",{class:"field-name fs-base"},"顯示器編號")],-1),U={class:"col"},x={key:1},G={class:"row item-spacing"},K=Object(o["createElementVNode"])("div",{class:"col text-end"},[Object(o["createElementVNode"])("label",{class:"field-name fs-base"},"KDS列印區分")],-1),H={class:"col"},F=Object(o["createStaticVNode"])('<option value="PRODUCT_CATEGORY">依類別</option><option value="PRODUCT_TYPE">依性質</option><option value="PRODUCT">依商品</option><option value="SALE_METHOD">依銷售方式</option><option value="SALE_METHOD_AND_PRODUCT_CATEGORY"> 依銷售方式和類別 </option><option value="SALE_METHOD_AND_PRODUCT_TYPE"> 依銷售方式和性質 </option><option value="SALE_METHOD_AND_PRODUCT"> 依銷售方式和商品 </option>',7),Y=[F],$={key:1},W={class:"col-md-6"},Q={class:"row item-spacing"},X=Object(o["createElementVNode"])("div",{class:"col text-end"},[Object(o["createElementVNode"])("label",{class:"field-name fs-base"},"顯示器名稱")],-1),z={class:"col"},Z={key:1},q={class:"row item-spacing"},J=Object(o["createElementVNode"])("div",{class:"col-md-3"},null,-1),ee={class:"col d-column"},te={class:"row"},ae={class:"col"},oe={class:"text-field-title"},ce={key:0,class:"col"},ne={class:"text-field-title"},se={class:"row my-2"},ie={class:"col d-flex align-items-center"},le=Object(o["createElementVNode"])("i",{class:"lab las la-braille moveIcon drag-handle"},null,-1),re={class:"input-group border rounded d-flex align-items-center"},de=["id","value"],pe=Object(o["createElementVNode"])("i",{class:"ri-arrow-down-s-line pe-2 fs-4 mx-2"},null,-1),me={class:"dropdown-menu w-100"},Oe={class:"px-2"},be={class:"input-group align-items-center border border-1 mb-1 rounded",style:{"border-radius":"10%"}},Ee=Object(o["createElementVNode"])("span",{class:"mdi mdi-magnify search-widget-icon ms-2"},null,-1),ue={class:"limitDropDown dropdown-list mb-0"},ye=["onClick"],he={class:"col d-flex"},_e={class:"input-group border rounded d-flex align-items-center"},Ne=["id","placeholder","value"],Te=Object(o["createElementVNode"])("i",{class:"ri-arrow-down-s-line pe-2 fs-4 mx-2"},null,-1),je={class:"dropdown-menu w-100"},De={class:"px-2"},Ae={class:"input-group align-items-center border border-1 mb-1 rounded",style:{"border-radius":"10%"}},ge=Object(o["createElementVNode"])("span",{class:"mdi mdi-magnify search-widget-icon ms-2"},null,-1),Ce=["placeholder"],ke={class:"limitDropDown dropdown-list mb-0"},Ie=["onClick"],fe=["onClick"],ve={key:1,class:"col-6 d-flex align-items-center"},Re=Object(o["createElementVNode"])("i",{class:"lab las la-braille moveIcon drag-handle"},null,-1),Ve={class:"input-group border rounded d-flex align-items-center"},Pe=["id","placeholder","value"],Se=Object(o["createElementVNode"])("i",{class:"ri-arrow-down-s-line pe-2 fs-4 mx-2"},null,-1),Le={class:"dropdown-menu w-100"},we={class:"px-2"},Be={class:"input-group align-items-center border border-1 mb-1 rounded",style:{"border-radius":"10%"}},Me=Object(o["createElementVNode"])("span",{class:"mdi mdi-magnify search-widget-icon ms-2"},null,-1),Ue=["placeholder"],xe={class:"limitDropDown dropdown-list mb-0"},Ge=["onClick"],Ke=["onClick"],He={class:"d-flex align-items-center mt-2"},Fe=Object(o["createElementVNode"])("span",{class:"fs-5 ms-2"},"新增資料",-1),Ye={class:"col"},$e={class:"col"},We={class:"modal-footer d-center"},Qe=Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-outline-primary cancel-btn","data-bs-dismiss":"modal"}," 取消 ",-1),Xe={key:1,type:"button",class:"btn btn-primary cancel-btn","data-bs-dismiss":"modal"};function ze(e,t,a,c,n,s){const i=Object(o["resolveComponent"])("draggable");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",I,[Object(o["createElementVNode"])("div",f,[Object(o["createElementVNode"])("div",v,[Object(o["createElementVNode"])("div",R,[Object(o["createElementVNode"])("h2",V,Object(o["toDisplayString"])("create"===a.setType?"新增":"edit"===a.setType?"編輯":"檢視")+"KDS顯示器 ",1)]),Object(o["createElementVNode"])("div",P,[Object(o["createElementVNode"])("div",S,[Object(o["createElementVNode"])("div",L,[Object(o["createElementVNode"])("div",w,[Object(o["createElementVNode"])("div",B,[M,Object(o["createElementVNode"])("div",U,["create"===a.setType?Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createElementBlock"])("input",{key:0,type:"number",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>n.kdsId=e),placeholder:"請輸入顯示器編號"},null,512)),[[o["vModelText"],n.kdsId]]):(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",x,Object(o["toDisplayString"])(n.kdsId),1))])]),Object(o["createElementVNode"])("div",G,[K,Object(o["createElementVNode"])("div",H,["view"!==a.setType?Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createElementBlock"])("select",{key:0,class:"form-select","aria-label":"Default select example",id:"kds_print_type","onUpdate:modelValue":t[1]||(t[1]=e=>n.kdsPrintType=e),onChange:t[2]||(t[2]=(...e)=>s.clearPrintTypeList&&s.clearPrintTypeList(...e))},Y,544)),[[o["vModelSelect"],n.kdsPrintType]]):(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",$,Object(o["toDisplayString"])(s.translate(n.kdsPrintType)),1))])])]),Object(o["createElementVNode"])("div",W,[Object(o["createElementVNode"])("div",Q,[X,Object(o["createElementVNode"])("div",z,["view"!==a.setType?Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createElementBlock"])("input",{key:0,type:"text",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=e=>n.kdsName=e),placeholder:"請輸入顯示器名稱"},null,512)),[[o["vModelText"],n.kdsName]]):(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",Z,Object(o["toDisplayString"])(n.kdsName),1))])])])]),Object(o["createElementVNode"])("div",q,[J,Object(o["createElementVNode"])("div",ee,[Object(o["createElementVNode"])("div",te,[Object(o["createElementVNode"])("div",ae,[Object(o["createElementVNode"])("p",oe,Object(o["toDisplayString"])(s.printTypeIsPlural?"銷售方式":n.typeMap[n.kdsPrintType]),1)]),s.printTypeIsPlural?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ce,[Object(o["createElementVNode"])("p",ne,Object(o["toDisplayString"])(n.typeMap[n.kdsPrintType]),1)])):Object(o["createCommentVNode"])("",!0)]),"view"!==a.setType?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[Object(o["createVNode"])(i,Object(o["mergeProps"])({class:"list-group w-100","component-data":{tag:"template",type:"transition-group"},modelValue:n.printTypeList,"onUpdate:modelValue":t[7]||(t[7]=e=>n.printTypeList=e)},s.dragOptions,{handle:".drag-handle","item-key":"order",onEnd:t[8]||(t[8]=e=>s.initDropDown())}),{item:Object(o["withCtx"])(({element:e,index:a})=>[Object(o["createElementVNode"])("div",se,[s.printTypeIsPlural?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[Object(o["createElementVNode"])("div",ie,[le,Object(o["createElementVNode"])("div",re,[Object(o["createElementVNode"])("input",{id:"categoryDropdown"+a,type:"text",class:"form-control dropdownInput border-0",readonly:"","data-required":"true","data-bs-toggle":"dropdown","data-bs-auto-close":"outside","aria-expanded":"false",placeholder:"請選擇銷售方式",role:"button",value:e.firstContent.name?`${e.firstContent.id} ${e.firstContent.name}`:""},null,8,de),pe,Object(o["createElementVNode"])("div",me,[Object(o["createElementVNode"])("div",Oe,[Object(o["createElementVNode"])("div",be,[Ee,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",class:"form-control border-0",placeholder:"搜尋銷售方式關鍵字","onUpdate:modelValue":t[4]||(t[4]=e=>n.salesKeyWord=e)},null,512),[[o["vModelText"],n.salesKeyWord]])])]),Object(o["createElementVNode"])("ul",ue,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(s.filterSaleMethod,e=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:e,class:"ps-3 py-3 border-bottom cursor-pointer",onClick:t=>s.setPrintContent(e,a,"firstContent")},Object(o["toDisplayString"])(`${e.sale_method_id} ${e.sale_method_name}`),9,ye))),128))])])])]),Object(o["createElementVNode"])("div",he,[Object(o["createElementVNode"])("div",_e,[Object(o["createElementVNode"])("input",{id:"categoryDropdownSecond"+a,type:"text",class:"form-control dropdownInput border-0",readonly:"","data-required":"true","data-bs-toggle":"dropdown","data-bs-auto-close":"outside","aria-expanded":"false",placeholder:"請選擇"+n.typeMap[n.kdsPrintType],role:"button",value:e.secondContent.name?`${e.secondContent.id} ${e.secondContent.name}`:""},null,8,Ne),Te,Object(o["createElementVNode"])("div",je,[Object(o["createElementVNode"])("div",De,[Object(o["createElementVNode"])("div",Ae,[ge,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",class:"form-control border-0",placeholder:`搜尋${n.typeMap[n.kdsPrintType]}關鍵字`,"onUpdate:modelValue":t[5]||(t[5]=e=>n.categoryKeyWord=e)},null,8,Ce),[[o["vModelText"],n.categoryKeyWord]])])]),Object(o["createElementVNode"])("ul",ke,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(s.filterCategoryItem,e=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:e,class:"ps-3 py-3 border-bottom cursor-pointer",onClick:t=>s.setPrintContent(e,a,"secondContent")},Object(o["toDisplayString"])(`${e.id} ${e.name}`),9,Ie))),128))])])]),Object(o["createElementVNode"])("i",{class:"ri-indeterminate-circle-fill fs-4 ms-2",onClick:e=>s.setPrintTypeList("reduce",a)},null,8,fe)])],64)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ve,[Re,Object(o["createElementVNode"])("div",Ve,[Object(o["createElementVNode"])("input",{id:"categoryDropdown"+a,type:"text",class:"form-control dropdownInput border-0",readonly:"","data-required":"true","data-bs-toggle":"dropdown","data-bs-auto-close":"outside","aria-expanded":"false",placeholder:"請選擇"+n.typeMap[n.kdsPrintType],role:"button",value:e.firstContent.name?`${e.firstContent.id} ${e.firstContent.name}`:""},null,8,Pe),Se,Object(o["createElementVNode"])("div",Le,[Object(o["createElementVNode"])("div",we,[Object(o["createElementVNode"])("div",Be,[Me,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",class:"form-control border-0",placeholder:`搜尋${n.typeMap[n.kdsPrintType]}關鍵字`,"onUpdate:modelValue":t[6]||(t[6]=e=>n.categoryKeyWord=e)},null,8,Ue),[[o["vModelText"],n.categoryKeyWord]])])]),Object(o["createElementVNode"])("ul",xe,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(s.filterCategoryItem,e=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:e,onClick:t=>s.setPrintContent(e,a,"firstContent"),class:"ps-3 py-3 border-bottom cursor-pointer"},Object(o["toDisplayString"])("SALE_METHOD"===n.kdsPrintType?`${e.sale_method_id} ${e.sale_method_name}`:`${e.id} ${e.name}`),9,Ge))),128))])])]),Object(o["createElementVNode"])("i",{class:"ri-indeterminate-circle-fill fs-4 ms-2",onClick:e=>s.setPrintTypeList("reduce",a)},null,8,Ke)]))])]),_:1},16,["modelValue"]),Object(o["createElementVNode"])("div",He,[Object(o["createElementVNode"])("i",{class:"ri-add-circle-fill fs-4 ms-2",role:"button",onClick:t[9]||(t[9]=e=>s.setPrintTypeList("add"))}),Fe])],64)):(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],{key:1},Object(o["renderList"])(n.printTypeList,e=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"row my-2",key:e},[Object(o["createElementVNode"])("div",Ye,Object(o["toDisplayString"])(e.firstContent.id)+" "+Object(o["toDisplayString"])(e.firstContent.name),1),Object(o["createElementVNode"])("div",$e,Object(o["toDisplayString"])(e.secondContent.id)+" "+Object(o["toDisplayString"])(e.secondContent.name),1)]))),128))])])])]),Object(o["createElementVNode"])("div",We,["view"!==a.setType?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[Qe,Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-primary confirm-btn",onClick:t[10]||(t[10]=e=>s.updateData())}," 儲存 ")],64)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",Xe," 關閉 "))])])])])}var Ze=a("b76a"),qe=a.n(Ze),Je=a("55cb"),et=a("1970");const tt=e=>new Promise((t,a)=>{et["a"].post("/v1/basic/kds/monitor",e).then(e=>{t(e)}).catch(e=>{a(e)})}),at=e=>new Promise((t,a)=>{et["a"].patch("/v1/basic/kds/monitor",e).then(e=>{t(e)}).catch(e=>{a(e)})}),ot=e=>new Promise((t,a)=>{et["a"].delete("/v1/basic/kds/monitor",e).then(e=>{t(e)}).catch(e=>{a(e)})});var ct={data(){return{kdsId:"",kdsName:"",printTypeList:[],kdsPrintType:"",dropdown:{},salesKeyWord:"",categoryKeyWord:"",typeMap:{PRODUCT_CATEGORY:"類別",PRODUCT_TYPE:"性質",PRODUCT:"商品",SALE_METHOD:"銷售方式",SALE_METHOD_AND_PRODUCT_CATEGORY:"類別",SALE_METHOD_AND_PRODUCT_TYPE:"性質",SALE_METHOD_AND_PRODUCT:"商品"}}},components:{draggable:qe.a},props:{setType:{type:String},editData:{type:Object}},emits:["getData"],inject:["translate","searchData"],computed:{...Object(C["c"])(["saleMethod","products","productType","productCategory","kds_config"]),dragOptions(){return{animation:200,group:"description",ghostClass:"ghost"}},printTypeIsPlural(){return this.kdsPrintType.includes("AND")},filterSaleMethod(){return this.saleMethod?this.saleMethod.filter(e=>e.sale_method_id.toString().match(this.salesKeyWord)||e.sale_method_name.match(this.salesKeyWord)):[]},filterCategoryItem(){const e={PRODUCT_CATEGORY:"productCategory",PRODUCT_TYPE:"productType",PRODUCT:"products",SALE_METHOD:"saleMethod"},t=this.printTypeIsPlural?this.kdsPrintType.substring(16):this.kdsPrintType,a="SALE_METHOD"===t?"sale_method_id":"id",o="SALE_METHOD"===t?"sale_method_name":"name";return this[e[t]]?this[e[t]].filter(e=>e[a].toString().match(this.categoryKeyWord)||e[o].match(this.categoryKeyWord)):[]}},watch:{printTypeIsPlural:{deep:!0,immediate:!0,handler(e,t){(e&&!t||!e&&t)&&this.$nextTick(()=>this.initDropDown())}}},methods:{setPrintContent(e,t,a){const o=this.printTypeIsPlural&&"firstContent"===a||"SALE_METHOD"===this.kdsPrintType?"sale_method_id":"id",c=this.printTypeIsPlural&&"firstContent"===a||"SALE_METHOD"===this.kdsPrintType?"sale_method_name":"name";this.printTypeList[t][a].id=e[o],this.printTypeList[t][a].name=e[c];const n="firstContent"===a?"categoryDropdown":"categoryDropdownSecond";this.dropdown[`${n}${t}`].hide()},setPrintTypeList(e,t=null){const a=this.printTypeList.length+1;"add"===e?this.printTypeList.push({order:a,firstContent:{id:"",name:""},secondContent:{id:"",name:""}}):this.printTypeList.splice(t,1),this.$nextTick(()=>this.initDropDown())},clearPrintTypeList(){this.printTypeList.forEach(e=>{e.firstContent={id:"",name:""},e.secondContent={id:"",name:""}})},initDropDown(){const e=document.querySelectorAll("[id*='categoryDropdown']");this.dropdown={},0!==e.length&&Array.from(e).forEach(e=>{this.dropdown[e.id]=Object(Je["a"])(e.id)})},getPrintContent(){const e=this.printTypeList.filter(e=>this.printTypeIsPlural?""!==e.firstContent.id&&""!==e.secondContent.id:""!==e.firstContent.id);if(this.printTypeIsPlural){const t=this.kdsPrintType.substring(16).toLocaleLowerCase(),a=e.map((e,a)=>({item_no:a+1,sale_method:{id:e.firstContent.id,name:e.firstContent.name},[t]:{id:e.secondContent.id,name:e.secondContent.name}}));return a}{const t=this.kdsPrintType.toLocaleLowerCase(),a=e.map((e,a)=>({item_no:a+1,[t]:{id:e.firstContent.id,name:e.firstContent.name}}));return a}},updateData(){const{companyId:e}=this.searchData,t=async(t,a)=>{try{this.$store.dispatch("setLoading");const o=await t(a);if(this.$store.dispatch("hideLoading"),console.log(o),204===o.status){const t={company_id:e};this.$store.dispatch("getKdsDisplayList",t),this.modal.hide()}else Object(k["e"])("無法儲存！",o.data.message)}catch(o){this.$store.dispatch("hideLoading"),Object(k["e"])("無法儲存！","請聯絡客服人員"),console.log(o)}},a={company_id:e,id:this.kdsId,name:this.kdsName,print_type:this.kdsPrintType,content:this.getPrintContent()};console.log(a),"create"===this.setType?t(tt,a):t(at,a)},initData(){if(this.printTypeList.splice(0),"create"===this.setType)this.kdsId="",this.kdsName="",this.kdsPrintType=this.$route.query.defaultType?this.$route.query.defaultType:this.kds_config?this.kds_config.kds_template_config.kds_print_type:"PRODUCT",this.printTypeList.push({order:1,firstContent:{id:"",name:""},secondContent:{id:"",name:""}});else{this.kdsId=this.editData.id,this.kdsName=this.editData.name,this.kdsPrintType=this.editData.print_type;const e=this.editData.content.map(e=>{const t={};for(const a in e)""!==e[a].id&&(t[a]=e[a]);return t});e.forEach(e=>{const t=Object.keys(e),a=t.find(e=>"sale_method"!==e&&"kds_itme_no"!==e);this.printTypeList.push({order:e.kds_itme_no,...this.printTypeIsPlural&&{firstContent:{id:e.sale_method.id,name:e.sale_method.name},secondContent:{id:e[a].id,name:e[a].name}},...!this.printTypeIsPlural&&{firstContent:{id:e[t[1]].id,name:e[t[1]].name},secondContent:{id:"",name:""}}})})}}},mounted(){this.modal=Object(Je["b"])("setKdsDisplay");const e=document.getElementById("setKdsDisplay");e.addEventListener("show.bs.modal",()=>{setTimeout(()=>{this.initData(),this.$nextTick(()=>this.initDropDown())},0)})}},nt=a("6b0d"),st=a.n(nt);const it=st()(ct,[["render",ze]]);var lt=it,rt={data(){return{setType:"",editData:{},viewData:{},selectDelList:[],isChecked:!0}},components:{SetKdsDisplay:lt},computed:{...Object(C["c"])(["kdsDisplayList"])},inject:["translate","searchData","is_embeddedWeb","authority"],methods:{async showDeleteAlert(){const e=await Object(k["h"])("確定刪除？","刪除後無法復原","確定");if(e){const{companyId:e}=this.searchData,a={company_id:e,ids:[...this.selectDelList]};try{this.$store.dispatch("setLoading");const t=await ot(a);if(this.$store.dispatch("hideLoading"),204===t.status){this.selectDelList.splice(0);const t={company_id:e};this.$store.dispatch("getKdsDisplayList",t)}}catch(t){this.$store.dispatch("hideLoading"),Object(k["e"])("無法刪除！","請聯絡客服人員"),console.log(t)}}},getData(){this.$store.dispatch("setLoading");const{companyId:e}=this.searchData;if(!e)return void this.$router.push({path:"/basicData/shopManagement/deviceConfig",query:{devicePurpose:this.$route.params.devicePurpose}});const t={company_id:e};this.$store.dispatch("getKdsDisplayList",t),this.$store.dispatch("getPrintContentOption",t)},setOperateData(e,t){this.editData={...e},this.setType=t}},created(){this.getData()}};a("9177");const dt=st()(rt,[["render",g],["__scopeId","data-v-6425fd77"]]);t["a"]=dt},"3dac":function(e,t,a){},"4d14":function(e,t,a){},7477:function(e,t,a){"use strict";a("4d14")},"7dfb":function(e,t,a){},9177:function(e,t,a){"use strict";a("7dfb")},c1f4:function(e,t,a){"use strict";a.r(t);var o=a("7a23");const c={class:"card p-2"};function n(e,t,a,n,s,i){const l=Object(o["resolveComponent"])("PageHeader"),r=Object(o["resolveComponent"])("KdsDisplaySetting"),d=Object(o["resolveComponent"])("Layout");return Object(o["openBlock"])(),Object(o["createBlock"])(d,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(l,{title:s.title,items:s.items},null,8,["title","items"]),s.authority.can_view?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[Object(o["createElementVNode"])("button",{class:"btn btn-light border border-2 px-4 my-2",onClick:t[0]||(t[0]=(...e)=>i.back&&i.back(...e))}," 返回 "),Object(o["createElementVNode"])("div",c,[Object(o["createVNode"])(r)])],64)):Object(o["createCommentVNode"])("",!0)]),_:1})}a("14d9");var s=a("6a34"),i=a("2579"),l=a("259b"),r=a("5502"),d=a("c457"),p={data(){return{title:"KDS設定",items:[{text:"基本資料管理",href:""},{text:"門店管理",href:""},{text:"KDS設定",active:!0}],authority:{}}},computed:{...Object(r["c"])(["selectedData","routerAuthority"])},components:{Layout:s["a"],PageHeader:i["a"],KdsDisplaySetting:l["a"]},provide(){return{translate:d["a"],is_embeddedWeb:!1,searchData:{...this.selectedData},authority:Object(o["computed"])(()=>this.authority)}},methods:{back(){this.$router.push({path:"/basicData/shopManagement/deviceConfig",query:{devicePurpose:this.$route.params.devicePurpose}})}},created(){this.$route.query.defaultType||this.back(),this.authority=this.routerAuthority.find(e=>"裝置設定"===e.name).meta}},m=(a("e45e"),a("6b0d")),O=a.n(m);const b=O()(p,[["render",n],["__scopeId","data-v-1d3d0c6a"]]);t["default"]=b},c449:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAARCAYAAAAG/yacAAAABHNCSVQICAgIfAhkiAAAAOtJREFUKFNj9AgITWBkYOxnYGAUYCAI/l/4zvDLkdEjIOwDSC0jA8MFfHr+Aw0FqtH/z/C/kdEzIPw/A8P/g9s3rHLAp8kjIMKBkeH/fgxNDgEBApyMrPrImv/8Z/i4e8PqCzg1wSRQbYS4Aq9NHAwcBsia/jL8/YDXJrL85BoQasDMwAQMfgQAhtjF7RtWFuB0HkgTCwPjBFQbGS/g1USW8+gX5EDPKjAw/EtAi6cHOzasXoAzIEjyEzDxPQCmvwX4EzmjAjD4E2BpDxTE+QRzBVABUMPHvwz/gQkXCCB+YQBhvGDHhhUHQAoAM1ndIKpg8z8AAAAASUVORK5CYII="},c457:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));const o={"當期":"PRIOR_PERIOD","同期":"SAME_PERIOD","前期":"PRIOR_PERIOD","大分類":"CATEGORY_GROUP","中分類":"CATEGORY","小分類":"CATEGORY_ITEM","商品":"PRODUCT","營業額 x 銷售量":"REVENUE_AND_SALES_VOLUME","營業額 x 毛利率":"SALES_VOLUME_AND_REVENUE","毛利率 x 銷售量":"SALES_VOLUME_AND_REVENUE","營業額 x 毛利額":"SALES_VOLUME_AND_REVENUE",NEW_CONSUMPTION:"消費新增",SALES_RETURN_REDUCTION:"銷退返還",EXCHANGE:"點數兌換",EXCHANGE_SELL_BACK:"點數兌換銷退",TRANSFER_OUT:"點數轉出",TRANSFER_IN:"點數轉入",ACTIVITY_DEDUCTION_POINTS:"活動扣點",ACTIVITY_ACCUMULATED_POINTS:"活動累點",ZERO:"點數歸零",FORCE_PRINTING:"強制列印",FORCE_INVOICING:"強制開立發票",DEFAULT_INVOICING:"預設開立發票",DEFAULT_NOT_INVOICE:"預設不開立發票",DEFAULT_PRINTING:"預設列印",DEFAULT_NOT_PRINT:"預設不列印",PRINT_DETAIL:"列印明細",PRINT_TOTAL:"列印總額",STORE_ID:"店號",STORE_SHORT_NAME:"門市簡稱",SOFTWARE_DRIVER:"軟體驅動",HARDWARE_DRIVER:"硬體驅動",ROUND_HALF_UP:"四捨五入",ROUND_HALF_DOWN:"五捨六入",ROUND_UP:"無條件進位",ROUND_DOWN:"無條件捨去",CUSTOM:"自訂",CAN_NOT_CHECKOUT:"無法結帳",NOT_INPUT:"不輸入",INPUT_RETURN_REASON:"輸入退貨原因",SHOW_MESSAGE:"顯示訊息",UNIFORM_PRICE:"統一價格",PRICE_AREA:"價格區",STORE_PRICE:"門市金額",DEFAULT:"系統預設",CATEGORY:"類別",ORDER_AREA:"菜單",Quantity:"數量",PRODUCT_CATEGORY:"依類別",PRODUCT_TYPE:"依性質",PRODUCT:"依商品",SALE_METHOD:"依銷售方式",SALE_METHOD_AND_PRODUCT_CATEGORY:"依銷售方式 + 類別",SALE_METHOD_AND_PRODUCT_TYPE:"依銷售方式 + 性質",SALE_METHOD_AND_PRODUCT:"依銷售方式 + 商品",MAIN_NAME:"商品名稱",SECOND_NAME:"第二名稱",SHORT_NAME:"簡稱",TAG:"標籤",KITCHEN_ORDER:"廚房單",KITCHEN_SUMMARY_ORDER:"廚房總單",SALE_DATE:"銷售日期",SALE_TIME:"銷售時間",TAKE_NO:"取餐號碼",MACHINE_ID:"機號",SALES_ORDER:"銷貨單",CUSTOMER_ORDER:"客戶訂貨單",TICKET_SALES:"票券銷售",INVOICE_SUMMARY:"發票彙開",POSTING:"補登",PLATFORM_BUSINESS:"平台商",MOBILE_OR_TELEPHONE:"手機號碼/電話",VIP_ID:"會員編號",QR_CODE:"QR-Code",BLESSING:"祝福語",PICKUP_TIME:"取餐時間",MEMO:"整單備註",SEQUENCE:"順序",UNUSED:"未使用",USING:"使用中",USED:"已使用",CREATED:"建立",ISSUED:"開立",NORMAL:"正常",VOID:"作廢",BLANK:"空白",TAXABLE:"應稅",TAX_EXEMPT:"免稅",ZERO_TAX:"零稅","應稅":"TAXABLE","免稅":"TAX_EXEMPT","零稅":"ZERO_TAX",SALES_ORDER:"銷貨單",BY_CHECKOUT_TIME:"依結帳時間",BY_CLEARING_TABLE_TIME:"依清桌時間",BY_SUMMARIZING_ORDERS:"依單據彙總",BY_SUMMARIZING_ITEMS:"依品項彙總",BY_BREAKING_ITEMS_DOWN:"依品項展開",BY_SUMMARIZING_ORDERS_AND_BREAKING_ITEM:"依單據彙總 + 品項展開",CUP_QUANTITY:"杯數",SALE_PRICE:"售價",TABLE_NO:"桌號",USER_NAME:"收銀員名稱",DEMOGRAPHIC:"客層",TOTAL_QUANTITY:"總數量",PRODUCT_ELEMENT:"商品成份",NOT_SET:"未設定",RECEIPT_PRINTER:"收據出單機",INVOICE_PRINTER:"發票出單機",MACHINE_CONFIG:"機台設定",RECEIPT_CONFIG:"發票設定",PARAMS_CONFIG:"參數設定",POS_CONFIG:"收銀設定",ACCOUNT_CONFIG:"帳條設定",ORDER_CONFIG:"接單設定",DEVICE_CONFIG:"裝置設定",PAYMENT_CONFIG:"門店管理付款方式設定",INVOICE_BUYS_CONFIG:"發票購入維護",INVOICE_ISSUANCE_CONFIG:"發票開立維護",NOT_PRINT:"一律不列印",PENDING_ORDER_NOT_PRINT:"掛單不列印(其他流程依參數設定決定)",BY_QUERY_WINDOW:"依詢問視窗選擇",CANCEL_ORDER:"一律取消訂單",PICK_WRONG_ORDER:"一律視為取錯單",BY_MACHINE_CONFIG:"依[裝置設定]參數設定",ACTIVE:"已生效",INACTIVE:"未生效",EXPIRED:"已過期",SPECIAL_SALE:"特賣促銷"},c=e=>o[e]||e},cb86:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABHNCSVQICAgIfAhkiAAAAKtJREFUKFNjZCAAPAJCExgZGPv/MPx33L1h9QVGfOohipnmA9U8ZGD4zw/ShFMDQvH/g9s3rHLwDAh/ADIcqwZkxUAl9v8ZGA4AFTr8Z/iXiKEBpvg/w/+FOzasSvAMCDsA0fQvcceG1QtQNKAr9ggIAypgjIcpRnESMYrhGohVDNZAimKwBmBw/Yd5EJub0eMJrOEfA0MB0PcGQJyA7EFskQrWAJMgpBikDgBRWoFEorlxXQAAAABJRU5ErkJggg=="},e45e:function(e,t,a){"use strict";a("3dac")}}]);