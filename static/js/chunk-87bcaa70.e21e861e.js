(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-87bcaa70"],{"0853":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAYVJREFUOE+lU11OwkAQnmHbd29AewNuIJ7AegLxzQiJNQFjTEma0BhjSewDGN+sJxBPoJ7A3oByA9+7ZZylFFqoPwn7tNlv5puZ75tF2PFgVf5Z77pRg9o+ATYUjkDRHOYfD/5NtBlfIrBtdy/R03t+bBHRDBFjlcB3g+91Agj1RFwEgfuVE60IsmT5xoCJCK3RnTcpVutcOhYRhPw21RPtICdZEbS7Tsi9WgwaOahGUSR568siMRBMxkOvlY3HJ5tZfALSUbFyp9d/V/jIHzTzblQnQPgihTAfb914QdDu9m2e1GZWo9R2BUEW77A2GIyHg2BJ4IQsklGspAKrOli/UzTyPfsPAifIRvC4w/XJiEsEPALC+dgfmMXAn+5bI+ws4lKYEAEPNSnM32yUWjoloNeSjYpAecygsq0ONTqpWiSY4xPjMy7S3FqknCTRZMCOHPPaxkjEdrFc7BCrbfBKP+tSsytXuSjY6ZVrCJlanLrYRPY8SjUxUYuzKWzlb/yPE3nMN5ZM0hHStnFpAAAAAElFTkSuQmCC"},"1dea":function(e,t,c){"use strict";var a=c("7a23");const o={class:"d-inline"},l={class:"input-group"},s=["disabled"],n={class:"dropdown-company-menu dropdown-menu"},i={class:"p-2 pt-1 searchlist-input"},d={class:"limitDropDown list-unstyled dropdown-list mb-0"},r=["onClick"];function m(e,t,c,m,p,b){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",o,[Object(a["createElementVNode"])("div",l,[Object(a["createElementVNode"])("i",{class:Object(a["normalizeClass"])(["input-group-text ri-building-line bg-white border-end-0 pe-0",{disableInput:e.companyList.length<2}])},null,2),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>p.selectedCompany=e),type:"text",class:"form-control border-start-0 border-end-0",readonly:"",role:"button",placeholder:"請選擇公司別","data-bs-toggle":"dropdown","data-bs-auto-close":"true","aria-expanded":"false",disabled:e.companyList.length<2},null,8,s),[[a["vModelText"],p.selectedCompany]]),Object(a["createElementVNode"])("div",n,[Object(a["createElementVNode"])("div",i,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>p.companyKeyWord=e),placeholder:"查詢公司關鍵字",class:"form-control-sm border search-countryList w-100"},null,512),[[a["vModelText"],p.companyKeyWord]])]),Object(a["createElementVNode"])("ul",d,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(b.filterCompanyList,e=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{key:e.id,class:Object(a["normalizeClass"])({active:p.selectedCompany===e.name})},[Object(a["createElementVNode"])("button",{type:"button",class:"btn",onClick:t=>b.setSelectCompany(e.name,e.id)},Object(a["toDisplayString"])(e.name),9,r)],2))),128))])]),Object(a["createElementVNode"])("i",{"data-bs-toggle":"dropdown","data-bs-auto-close":"true","aria-expanded":"false",class:Object(a["normalizeClass"])(["input-group-text ri-arrow-down-s-line bg-white border-start-0 ps-0",{disableInput:e.companyList.length<2}])},null,2)])])}var p=c("5502"),b=c("c535"),u={data(){return{companyKeyWord:"",selectedCompany:"",selectedCompanyId:""}},emits:["setCompanyId"],props:{page:{type:String}},computed:{...Object(p["c"])(["companyList","searchCompany"]),filterCompanyList(){return this.companyList.length>0?this.companyList.filter(e=>e.name.match(this.companyKeyWord)||e.id.match(this.companyKeyWord)):[]}},watch:{companyKeyWord:{immediate:!0,handler(e,t){0!==this.filterCompanyList.length&&(""===e&&t||""!==e)&&(this.selectedCompanyId=this.filterCompanyList[0].id,this.selectedCompany=this.filterCompanyList[0].name,this.getData())}},selectedCompanyId:{immediate:!0,handler(e){this.$emit("setCompanyId",e)}}},methods:{async getData(){this.$store.dispatch("setLoading");const e={company_id:this.selectedCompanyId};if("comboManage"===this.page)await Promise.all([this.$store.dispatch("getCombos",e),this.$store.dispatch("getAllComboListData",e)]);else if("companyManage"===this.page)await Promise.all([this.$store.dispatch("getCompanyConfig",e),this.$store.dispatch("getWebPlatformConfig",e)]);else if("promotionManage"===this.page){const t=new Date,c=t.getFullYear(),a=t.getMonth(),o=new Date(c,a,1),l=new Date(c,a+1,0);await Promise.all([this.$store.dispatch("getCompanyConfig",e),this.$store.dispatch("getPromotionBasicData",e),this.$store.dispatch("getPromotions",{...e,status:"ACTIVE",types:JSON.stringify(["ALL"]),start_date:Object(b["g"])(o),end_date:Object(b["g"])(l)})])}this.$store.dispatch("hideLoading")},setSelectCompany(e,t){this.selectedCompany=e,this.selectedCompanyId=t,this.getData()}},async created(){this.$store.dispatch("setLoading"),await this.$store.dispatch("getCompanyList"),this.searchCompany?(this.selectedCompanyId=this.searchCompany,this.selectedCompany=this.companyList.find(e=>e.id===this.searchCompany).name,this.$store.commit("SET_SEARCH_COMPANY",null)):(this.selectedCompany=this.companyList[0].name,this.selectedCompanyId=this.companyList[0].id),await this.getData(),this.$store.dispatch("hideLoading")}},O=(c("c579"),c("6b0d")),h=c.n(O);const y=h()(u,[["render",m],["__scopeId","data-v-b46f6534"]]);t["a"]=y},2579:function(e,t,c){"use strict";var a=c("7a23");const o={class:"row mb-lg-4 mb-5"},l={class:"col-12"},s={ref:"pageTitle",class:"page-title-box d-sm-flex align-items-center justify-content-between"},n={class:"mb-sm-0"},i={class:"page-title-right me-5"},d={class:"breadcrumb m-0"},r=["onClick"];function m(e,t,c,m,p,b){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",o,[Object(a["createElementVNode"])("div",l,[Object(a["createElementVNode"])("div",s,[Object(a["createElementVNode"])("h4",n,Object(a["toDisplayString"])(c.title),1),Object(a["createElementVNode"])("div",i,[Object(a["createElementVNode"])("ol",d,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(c.items,(e,t)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{class:"breadItem",key:t},[Object(a["createElementVNode"])("a",{onClick:c=>b.goBack(e.text,t),href:"javascript: void(0);",class:Object(a["normalizeClass"])(["text-nowrap",{active:t+1==c.items.length}])},Object(a["toDisplayString"])(e.text)+Object(a["toDisplayString"])(t+1==c.items.length?"":"　>　"),11,r)]))),128))])])],512)])])}var p={components:{},props:{title:{type:String,default:""},items:{type:Array,default:()=>[]}},methods:{goBack(e,t){0===t&&"訂貨系統"!==e&&this.$route.path.includes("orderingSystem")&&this.$router.back()}},mounted(){}},b=(c("7477"),c("6b0d")),u=c.n(b);const O=u()(p,[["render",m],["__scopeId","data-v-0a664056"]]);t["a"]=O},"2cd0":function(e,t,c){},"2dbd":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAABHNCSVQICAgIfAhkiAAAAPlJREFUOE/tkz0OgkAQhWe10E5uIjcQCxPotvGn9Ah6A2+gR7BUbLbDxEK9Ad4EOy10fEBACIskRhMLp4Ls2++93ZkV9KESOo4tBzMi0dF78HGrXKznSwty5JCZ+IxFPytnIlOQaHlqXdhXCiLio6dcKwty5OAQJi0FIcECbu1kE+gAcMAkcokEsQmQAS2AcUF7AngSJUqc3rv3OHl6NFuO8MN7pOhu1Sp11DejqP0+qCf7Zp1q8xvdp2Gq5HunNr4ufWmirDi+1Oex/6Bfaz+eho+hDF5NOTpooI9mdnjT9ltSGk1qLGNRdYVmF7qOD0pFptrXX40pKh60D/IT6JpNSgAAAABJRU5ErkJggg=="},"31c3":function(e,t,c){"use strict";c.d(t,"g",(function(){return n})),c.d(t,"h",(function(){return i})),c.d(t,"i",(function(){return d})),c.d(t,"e",(function(){return r})),c.d(t,"f",(function(){return m})),c.d(t,"a",(function(){return p})),c.d(t,"d",(function(){return b})),c.d(t,"c",(function(){return u})),c.d(t,"b",(function(){return O}));c("14d9");var a=c("3d20"),o=c.n(a),l=c("a18c"),s=c("55cb");const n=e=>new Promise((t,c)=>{o.a.fire({width:"500px",position:"center",icon:"success",title:e,showConfirmButton:!1,timer:1500,customClass:{title:"fs-2 fw-bold",htmlContainer:"message-content",target:"rounded-3"}}).then(()=>{t()})}),i=(e,t,c,a=!1)=>new Promise((l,s)=>{o.a.fire({width:"500px",position:"center",icon:"warning",title:e,html:t,showCancelButton:!0,confirmButtonText:c,cancelButtonText:"取消",buttonsStyling:!1,reverseButtons:a,customClass:{title:"fs-2 fw-bold",htmlContainer:"message-content mx-0",confirmButton:"btn btn-primary confirm-btn d-flex m-1",cancelButton:"btn btn-outline-primary cancel-btn d-flex m-1",target:"rounded-3"},didRender:()=>{const e=document.querySelector(".showDetailText");e&&e.addEventListener("click",()=>{o.a.close()})}}).then(e=>l(e.isConfirmed))}),d=(e,t)=>{o.a.fire({width:"500px",position:"center",icon:"warning",title:e,html:t,confirmButtonText:"確認",buttonsStyling:!1,customClass:{title:"fs-2 fw-bold ",htmlContainer:"message-content mx-0",confirmButton:"btn btn-primary confirm-btn d-flex m-1",target:"rounded-3"}})},r=(e,t,c)=>new Promise((a,l)=>{o.a.fire({width:"500px",position:"center",icon:"error",title:e,html:t,confirmButtonText:"確認",buttonsStyling:!1,customClass:{title:"fs-2 fw-bold ",htmlContainer:"message-content mx-0",confirmButton:"btn btn-primary confirm-btn d-flex m-1",target:"rounded-3"}}).then(e=>{if(a(),e.isConfirmed)if("paymentSettingModal"==c){const e={type:"CREATE"};Object(s["g"])(e)}else c&&Object(s["h"])(c)})}),m=()=>{o.a.fire({width:"500px",title:"尚未建立門市，請至公司管理建立",icon:"warning",showCancelButton:!0,confirmButtonText:"前往設定",cancelButtonText:"返回",buttonsStyling:!1,customClass:{title:"fs-3 fw-bold mb-3",htmlContainer:"message-content",confirmButton:"btn btn-primary confirm-btn d-flex m-1",cancelButton:"btn btn-outline-primary cancel-btn d-flex m-1",target:"rounded-3"}}).then(e=>{e.isConfirmed})},p=()=>{o.a.fire({width:"500px",title:"Uber Eats UUID 尚未建立，請前往設定",icon:"warning",showCancelButton:!0,confirmButtonText:"前往設定",cancelButtonText:"返回",buttonsStyling:!1,customClass:{title:"fs-3 mb-3",confirmButton:"btn btn-primary px-3 me-3",htmlContainer:"message-content",cancelButton:"btn btn-outline-primary px-3",target:"rounded-3"}}).then(e=>{e.isConfirmed&&l["a"].push("/multipleMenu")})},b=()=>{o.a.fire({width:"500px",title:"確定刪除？",text:"刪除後無法復原",icon:"warning",showCancelButton:!0,confirmButtonText:"確定",cancelButtonText:"取消",buttonsStyling:!1,customClass:{title:"fs-3 fw-bold",htmlContainer:"message-content",confirmButton:"btn btn-primary confirm-btn d-flex m-1",cancelButton:"btn btn-outline-primary cancel-btn d-flex m-1",target:"rounded-3"}}).then(e=>{e.isConfirmed})},u=(e,t,c)=>{o.a.fire({width:"500px",title:e,html:`${t} <br><p class="text-order-danger-dark">(-$${c})</p>`,icon:"error",showCancelButton:!1,confirmButtonText:"確認",buttonsStyling:!1,customClass:{title:"fs-3 fw-bold",htmlContainer:"message-content",confirmButton:"btn btn-primary px-4",target:"rounded-3"}})},O=()=>{o.a.fire({width:"500px",title:"請先勾選預刪除的菜單",icon:"warning",showCancelButton:!1,confirmButtonText:"確認",buttonsStyling:!1,customClass:{title:"fs-3 fw-bold",htmlContainer:"message-content",confirmButton:"btn btn-primary px-3 me-3",target:"rounded-3"}})}},"4d14":function(e,t,c){},"4d44":function(e,t,c){"use strict";c("6d1f")},"55cb":function(e,t,c){"use strict";c.d(t,"b",(function(){return l})),c.d(t,"c",(function(){return s})),c.d(t,"a",(function(){return n})),c.d(t,"f",(function(){return i})),c.d(t,"g",(function(){return d})),c.d(t,"e",(function(){return r})),c.d(t,"h",(function(){return m})),c.d(t,"d",(function(){return p}));var a=c("7b17"),o=c("cfb9");const l=e=>new a["e"](document.getElementById(e)),s=e=>new a["j"](document.getElementById(e)),n=e=>new a["d"](document.getElementById(e)),i=e=>{o["a"].emit("emit-machine-setting",e);const t=l("machineSettingModal");t.show()},d=e=>{o["a"].emit("emit-payment-setting",e);const t=l("paymentSettingModal");t.show()},r=e=>{const t=l("addPayment");t.show()},m=e=>{const t=l(e);t.show()},p=e=>{const t=document.getElementById(e),c=document.querySelector(".modal-backdrop");document.body.setAttribute("data-aos-duration",0),t.classList.remove("show"),t.style.display="none",document.body.className="",document.body.style="",c.remove()}},"57de":function(e,t,c){"use strict";c("c09e")},"59eb":function(e,t,c){},"59ec":function(e,t,c){},"67cf":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAABHNCSVQICAgIfAhkiAAAAGdJREFUOE+9k1kKACAIRO3+h26BjBB1bMGgL4fnNGkhotqvd8osuroh+g7izuyOG0hHqm53lA5S87xx9AyCXytDtcIOgyxh/hyBwV5lNwI5Ox4Ugk5XBE52NGwISl8R6Cj6NLgiT6AGHLUwA0OP+g8AAAAASUVORK5CYII="},"6d1f":function(e,t,c){},7477:function(e,t,c){"use strict";c("4d14")},8313:function(e,t,c){"use strict";c("d1e3")},"8d56":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAABHNCSVQICAgIfAhkiAAAASdJREFUKFN9kgsNwjAQhpkCkDAcgANQADgYCqiESRgKAAXMAcMBDkDCHMD/NXekWwpNLt36P3qPFpPRCiFUOtootga9tHeKS9M07N9V+JdEC31fFZw1ikfCwwjTm2Ivkx4sik0IcBfgNw5yEmemg1YxFWeZij01hEHgeaBMfmRCRp04obAaa/2UlgF1/TQQpxT+VMwRQ24lpk5K4HZqp7ZsBq5B/BZxnXbSsjn9MhBeC5tlxZZBpT1rYOIFYppVjWf4z0AaSuwRU1dP93IdthIgr8SJs7cLY7dXNExR+vDHJqmBMB5TnI4/Eh/+Ond7UgIZ0GAm0bqY19MZsBNAHwbLRkgDj8JrwO/bNnecD2aEGQtjZg+Xx0OWcQ3EZlAamZ2gSY9U5OIPsECYkN1DwUYAAAAASUVORK5CYII="},"935f":function(e,t,c){},ac32:function(e,t,c){"use strict";c("2cd0")},ad66:function(e,t,c){"use strict";c("59ec")},be60:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAABHNCSVQICAgIfAhkiAAAAWNJREFUOE+lk81Nw0AQRrPyGSmIAmIqSFIBoQKcM5dQAaaDSHC3O0i4ckoH2VQAVEC4cESpwOZ9q91osXGiiJE+2Tuz83Zmf0yvYXmep7ju0QSNfPiNr/RclqVt5pjYAaD0gE++K7RFOyRwhobefwdMfmd7CAAlafU5EwRrGXMEWqIPdB1ADuIrmAlCQGV3mm9Xc9bMnbpKvFPkh64KmkRyVPHaV2MFUekZgPRQBX+ALL4deZkgKs0yyE+EqP0FeUaQOm6F8VNd1xddQGPMF4mPUUvnAaIj065rk2+rqjrrgiRJ8l0UxUsTonZWQOb/aUcVDIGMT4ToXvXCxobjmuJwgWNGK3oOr8htQ7hsSr5CY5zbQxAAfeK6I4a57m0FiAIWDZAq0n/LfAULApdoFBaM345AS3QjIEep/1BVyrFPGM/QO9Ll3Ff86xVraX90uniCxbbRIuEqxIEWJA76/vvH9ukHiT6k0k4i67oAAAAASUVORK5CYII="},c09e:function(e,t,c){},c449:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAARCAYAAAAG/yacAAAABHNCSVQICAgIfAhkiAAAAOtJREFUKFNj9AgITWBkYOxnYGAUYCAI/l/4zvDLkdEjIOwDSC0jA8MFfHr+Aw0FqtH/z/C/kdEzIPw/A8P/g9s3rHLAp8kjIMKBkeH/fgxNDgEBApyMrPrImv/8Z/i4e8PqCzg1wSRQbYS4Aq9NHAwcBsia/jL8/YDXJrL85BoQasDMwAQMfgQAhtjF7RtWFuB0HkgTCwPjBFQbGS/g1USW8+gX5EDPKjAw/EtAi6cHOzasXoAzIEjyEzDxPQCmvwX4EzmjAjD4E2BpDxTE+QRzBVABUMPHvwz/gQkXCCB+YQBhvGDHhhUHQAoAM1ndIKpg8z8AAAAASUVORK5CYII="},c457:function(e,t,c){"use strict";c.d(t,"a",(function(){return o}));const a={"當期":"PRIOR_PERIOD","同期":"SAME_PERIOD","前期":"PRIOR_PERIOD","大分類":"CATEGORY_GROUP","中分類":"CATEGORY","小分類":"CATEGORY_ITEM","商品":"PRODUCT","營業額 x 銷售量":"REVENUE_AND_SALES_VOLUME","營業額 x 毛利率":"SALES_VOLUME_AND_REVENUE","毛利率 x 銷售量":"SALES_VOLUME_AND_REVENUE","營業額 x 毛利額":"SALES_VOLUME_AND_REVENUE",NEW_CONSUMPTION:"消費新增",SALES_RETURN_REDUCTION:"銷退返還",EXCHANGE:"點數兌換",EXCHANGE_SELL_BACK:"點數兌換銷退",TRANSFER_OUT:"點數轉出",TRANSFER_IN:"點數轉入",ACTIVITY_DEDUCTION_POINTS:"活動扣點",ACTIVITY_ACCUMULATED_POINTS:"活動累點",ZERO:"點數歸零",FORCE_PRINTING:"強制列印",FORCE_INVOICING:"強制開立發票",DEFAULT_INVOICING:"預設開立發票",DEFAULT_NOT_INVOICE:"預設不開立發票",DEFAULT_PRINTING:"預設列印",DEFAULT_NOT_PRINT:"預設不列印",PRINT_DETAIL:"列印明細",PRINT_TOTAL:"列印總額",STORE_ID:"店號",STORE_SHORT_NAME:"門市簡稱",SOFTWARE_DRIVER:"軟體驅動",HARDWARE_DRIVER:"硬體驅動",ROUND_HALF_UP:"四捨五入",ROUND_HALF_DOWN:"五捨六入",ROUND_UP:"無條件進位",ROUND_DOWN:"無條件捨去",CUSTOM:"自訂",CAN_NOT_CHECKOUT:"無法結帳",NOT_INPUT:"不輸入",INPUT_RETURN_REASON:"輸入退貨原因",SHOW_MESSAGE:"顯示訊息",UNIFORM_PRICE:"統一價格",PRICE_AREA:"價格區",STORE_PRICE:"門市金額",DEFAULT:"系統預設",CATEGORY:"類別",ORDER_AREA:"菜單",Quantity:"數量",PRODUCT_CATEGORY:"依類別",PRODUCT_TYPE:"依性質",PRODUCT:"依商品",SALE_METHOD:"依銷售方式",SALE_METHOD_AND_PRODUCT_CATEGORY:"依銷售方式 + 類別",SALE_METHOD_AND_PRODUCT_TYPE:"依銷售方式 + 性質",SALE_METHOD_AND_PRODUCT:"依銷售方式 + 商品",MAIN_NAME:"商品名稱",SECOND_NAME:"第二名稱",SHORT_NAME:"簡稱",TAG:"標籤",KITCHEN_ORDER:"廚房單",KITCHEN_SUMMARY_ORDER:"廚房總單",SALE_DATE:"銷售日期",SALE_TIME:"銷售時間",TAKE_NO:"取餐號碼",MACHINE_ID:"機號",SALES_ORDER:"銷貨單",CUSTOMER_ORDER:"客戶訂貨單",TICKET_SALES:"票券銷售",INVOICE_SUMMARY:"發票彙開",POSTING:"補登",PLATFORM_BUSINESS:"平台商",MOBILE_OR_TELEPHONE:"手機號碼/電話",VIP_ID:"會員編號",QR_CODE:"QR-Code",BLESSING:"祝福語",PICKUP_TIME:"取餐時間",MEMO:"整單備註",SEQUENCE:"順序",UNUSED:"未使用",USING:"使用中",USED:"已使用",CREATED:"建立",ISSUED:"開立",NORMAL:"正常",VOID:"作廢",BLANK:"空白",TAXABLE:"應稅",TAX_EXEMPT:"免稅",ZERO_TAX:"零稅","應稅":"TAXABLE","免稅":"TAX_EXEMPT","零稅":"ZERO_TAX",SALES_ORDER:"銷貨單",BY_CHECKOUT_TIME:"依結帳時間",BY_CLEARING_TABLE_TIME:"依清桌時間",BY_SUMMARIZING_ORDERS:"依單據彙總",BY_SUMMARIZING_ITEMS:"依品項彙總",BY_BREAKING_ITEMS_DOWN:"依品項展開",BY_SUMMARIZING_ORDERS_AND_BREAKING_ITEM:"依單據彙總 + 品項展開",CUP_QUANTITY:"杯數",SALE_PRICE:"售價",TABLE_NO:"桌號",USER_NAME:"收銀員名稱",DEMOGRAPHIC:"客層",TOTAL_QUANTITY:"總數量",PRODUCT_ELEMENT:"商品成份",NOT_SET:"未設定",RECEIPT_PRINTER:"收據出單機",INVOICE_PRINTER:"發票出單機",MACHINE_CONFIG:"機台設定",RECEIPT_CONFIG:"發票設定",PARAMS_CONFIG:"參數設定",POS_CONFIG:"收銀設定",ACCOUNT_CONFIG:"帳條設定",ORDER_CONFIG:"接單設定",DEVICE_CONFIG:"裝置設定",PAYMENT_CONFIG:"門店管理付款方式設定",INVOICE_BUYS_CONFIG:"發票購入維護",INVOICE_ISSUANCE_CONFIG:"發票開立維護",NOT_PRINT:"一律不列印",PENDING_ORDER_NOT_PRINT:"掛單不列印(其他流程依參數設定決定)",BY_QUERY_WINDOW:"依詢問視窗選擇",CANCEL_ORDER:"一律取消訂單",PICK_WRONG_ORDER:"一律視為取錯單",BY_MACHINE_CONFIG:"依[裝置設定]參數設定",ACTIVE:"已生效",INACTIVE:"未生效",EXPIRED:"已過期",SPECIAL_SALE:"特賣促銷"},o=e=>a[e]||e},c535:function(e,t,c){"use strict";function a(e){return e.toString().padStart(2,"0")}c.d(t,"g",(function(){return o})),c.d(t,"b",(function(){return l})),c.d(t,"c",(function(){return s})),c.d(t,"h",(function(){return n})),c.d(t,"d",(function(){return i})),c.d(t,"a",(function(){return d})),c.d(t,"e",(function(){return r})),c.d(t,"f",(function(){return m}));const o=e=>e?[e.getFullYear(),a(e.getMonth()+1),a(e.getDate())].join("-"):e,l=e=>[e.getFullYear(),a(e.getMonth()+1),a(e.getDate())].join("/"),s=e=>{const t=e.getHours(),c=e.getMinutes();return`${a(t)}:${a(c)}`},n=e=>`${e.getFullYear()}${a(e.getMonth()+1)}`,i=(e,t)=>new Date(e.setDate(e.getDate()-t)),d=e=>{const t=/-/gi,c=e.replace(t,"/");return c},r=e=>{const t=e.split("-"),c=parseInt(t[0]),a=parseInt(t[1])-1,o=parseInt(t[2]);return new Date(c,a,o)},m=e=>{const t=new Date,c=e.split(":"),a=parseInt(c[0]),o=parseInt(c[1]);return t.setHours(a),t.setMinutes(o),t}},c579:function(e,t,c){"use strict";c("59eb")},ce90:function(e,t,c){"use strict";c.r(t);var a=c("7a23");const o={key:1,class:"d-flex"},l={class:"d-column"};function s(e,t,c,s,n,i){const d=Object(a["resolveComponent"])("PageHeader"),r=Object(a["resolveComponent"])("BasicData"),m=Object(a["resolveComponent"])("BasicSearch"),p=Object(a["resolveComponent"])("PromotionList"),b=Object(a["resolveComponent"])("PromotionSetting"),u=Object(a["resolveComponent"])("Layout");return Object(a["openBlock"])(),Object(a["createBlock"])(u,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(d,{title:n.title,items:n.items},null,8,["title","items"]),e.targetRouteAuthority.can_view?(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:0},[Object(a["createElementVNode"])("div",{class:Object(a["normalizeClass"])(["pt-md-3 mb-3",["search"===n.setType?"d-between":"d-end"]])},[Object(a["withDirectives"])(Object(a["createElementVNode"])("div",null,[Object(a["createVNode"])(r,{page:"promotionManage",onSetCompanyId:i.setCompanyId},null,8,["onSetCompanyId"])],512),[[a["vShow"],"search"===n.setType]]),"search"===n.setType?(Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:0,class:"btn btn-primary text-white px-4 py-2",type:"button",onClick:t[0]||(t[0]=e=>n.setType="setting")}," 新增 ")):"setting"===n.setType||"edit"===n.setType?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",o,[Object(a["createElementVNode"])("button",{type:"button",class:"btn cancel-btn bg-white border border-secondary",onClick:t[1]||(t[1]=e=>n.setType="search")}," 取消 "),Object(a["createElementVNode"])("button",{type:"button",class:"btn btn-primary confirm-btn ms-3",onClick:t[2]||(t[2]=e=>i.saveData())}," 儲存 ")])):"view"===n.setType?(Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:2,type:"button",class:"btn btn-primary confirm-btn",onClick:t[3]||(t[3]=e=>n.setType="search")}," 返回 ")):Object(a["createCommentVNode"])("",!0)],2),Object(a["createElementVNode"])("div",l,["search"===n.setType?(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:0},[Object(a["createVNode"])(m,{ref:"basicSearch"},null,512),Object(a["createVNode"])(p,{onSetEditData:i.setEditData},null,8,["onSetEditData"])],64)):Object(a["createCommentVNode"])("",!0),"setting"===n.setType||"edit"===n.setType||"view"===n.setType?(Object(a["openBlock"])(),Object(a["createBlock"])(b,{key:1,ref:"promotionSetting",onBack:i.back},null,8,["onBack"])):Object(a["createCommentVNode"])("",!0)])],64)):Object(a["createCommentVNode"])("",!0)]),_:1})}var n=c("6a34"),i=c("2579"),d=c("5502"),r=c("1dea");const m=e=>(Object(a["pushScopeId"])("data-v-0968d91a"),e=e(),Object(a["popScopeId"])(),e),p={class:"card"},b={class:"row"},u={class:"col-md-5"},O={class:"row item-spacing"},h=m(()=>Object(a["createElementVNode"])("div",{class:"col-4 text-end"},[Object(a["createElementVNode"])("label",{class:"field-name fs-base"},"促銷狀態 :")],-1)),y={class:"col-6"},j=m(()=>Object(a["createElementVNode"])("option",{value:"ALL"},"全選",-1)),E=m(()=>Object(a["createElementVNode"])("option",{value:"ACTIVE"},"已生效",-1)),N=m(()=>Object(a["createElementVNode"])("option",{value:"INACTIVE"},"未生效",-1)),f=m(()=>Object(a["createElementVNode"])("option",{value:"EXPAIRED"},"已過期",-1)),g=[j,E,N,f],V={class:"row item-spacing"},k=m(()=>Object(a["createElementVNode"])("div",{class:"col-4 text-end"},[Object(a["createElementVNode"])("label",{class:"field-name fs-base"},"促銷代號 :")],-1)),v={class:"col-7"},A={class:"row item-spacing"},_=m(()=>Object(a["createElementVNode"])("div",{class:"col-4 text-end"},[Object(a["createElementVNode"])("label",{class:"field-name fs-base"},"促銷類型 :")],-1)),S={class:"col-5"},C={class:"input-group rounded dropdownInputLayout"},D=["value"],w=m(()=>Object(a["createElementVNode"])("i",{class:"ri-arrow-down-s-line pe-2 fs-4"},null,-1)),T={class:"dropdown-menu w-100"},B={class:"container-fluid"},x={class:"form-check border-bottom py-1"},I=["checked"],R=m(()=>Object(a["createElementVNode"])("label",{class:"form-check-label",for:"allPromotionType"}," 全選 ",-1)),P={class:"form-check"},M=["id","value"],L=["for"],U={class:"col-md"},G={class:"row item-spacing"},F=m(()=>Object(a["createElementVNode"])("div",{class:"col-3 text-end"},[Object(a["createElementVNode"])("label",{class:"field-name fs-base"},"促銷活動日期 :")],-1)),Y={class:"col-7"},K={class:"row d-center"},H={class:"col dateInputLayout"},W=m(()=>Object(a["createElementVNode"])("i",{class:"ri-calendar-2-fill pe-3"},null,-1)),$={class:"col dateInputLayout"},Q=m(()=>Object(a["createElementVNode"])("i",{class:"ri-calendar-2-fill pe-3"},null,-1)),z={class:"row item-spacing"},X=m(()=>Object(a["createElementVNode"])("div",{class:"col-3 text-end"},[Object(a["createElementVNode"])("label",{class:"field-name fs-base"},"促銷名稱 :")],-1)),J={class:"col-6"},Z={class:"d-end mt-3"};function q(e,t,c,o,l,s){const n=Object(a["resolveComponent"])("Datepicker");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",p,[Object(a["createElementVNode"])("div",b,[Object(a["createElementVNode"])("div",u,[Object(a["createElementVNode"])("div",O,[h,Object(a["createElementVNode"])("div",y,[Object(a["withDirectives"])(Object(a["createElementVNode"])("select",{class:"form-select","onUpdate:modelValue":t[0]||(t[0]=e=>l.eventType=e)},g,512),[[a["vModelSelect"],l.eventType]])])]),Object(a["createElementVNode"])("div",V,[k,Object(a["createElementVNode"])("div",v,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>l.id=e)},null,512),[[a["vModelText"],l.id]])])]),Object(a["createElementVNode"])("div",A,[_,Object(a["createElementVNode"])("div",S,[Object(a["createElementVNode"])("div",C,[Object(a["createElementVNode"])("input",{id:"invoiceNumberDropDown",type:"text",class:"form-control border border-0",role:"button",readonly:"",placeholder:"請選擇促銷類型","data-bs-toggle":"dropdown","data-bs-auto-close":"outside","aria-expanded":"false",value:l.type.length===e.promotionType.length&&0!==e.promotionType.length?"全選":0!==l.type.length?`已選擇${l.type.length}種類型`:""},null,8,D),w,Object(a["createElementVNode"])("div",T,[Object(a["createElementVNode"])("div",B,[Object(a["createElementVNode"])("div",x,[Object(a["createElementVNode"])("input",{class:"form-check-input",type:"checkbox",id:"allPromotionType",checked:l.type.length===e.promotionType.length,onClick:t[2]||(t[2]=(...e)=>s.selectAllType&&s.selectAllType(...e))},null,8,I),R]),Object(a["createElementVNode"])("ul",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.promotionType,e=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{key:e.id},[Object(a["createElementVNode"])("div",P,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"form-check-input",type:"checkbox",id:e.id,value:e.id,"onUpdate:modelValue":t[3]||(t[3]=e=>l.type=e)},null,8,M),[[a["vModelCheckbox"],l.type]]),Object(a["createElementVNode"])("label",{class:"form-check-label",for:e.id},Object(a["toDisplayString"])(e.name),9,L)])]))),128))])])])])])])]),Object(a["createElementVNode"])("div",U,[Object(a["createElementVNode"])("div",G,[F,Object(a["createElementVNode"])("div",Y,[Object(a["createElementVNode"])("div",K,[Object(a["createElementVNode"])("div",H,[Object(a["createVNode"])(n,{class:"form-control cursor-pointer",inputFormat:"yyyy-MM-dd",startingView:"day",minimumView:"day",lowerLimit:s.limitStartDate,upperLimit:l.endDate,modelValue:l.startDate,"onUpdate:modelValue":t[4]||(t[4]=e=>l.startDate=e)},null,8,["lowerLimit","upperLimit","modelValue"]),W]),Object(a["createTextVNode"])(" 至 "),Object(a["createElementVNode"])("div",$,[Object(a["createVNode"])(n,{class:"form-control cursor-pointer",inputFormat:"yyyy-MM-dd",startingView:"day",minimumView:"day",lowerLimit:l.startDate,upperLimit:s.limitEndDate,modelValue:l.endDate,"onUpdate:modelValue":t[5]||(t[5]=e=>l.endDate=e)},null,8,["lowerLimit","upperLimit","modelValue"]),Q])])])]),Object(a["createElementVNode"])("div",z,[X,Object(a["createElementVNode"])("div",J,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=e=>l.name=e)},null,512),[[a["vModelText"],l.name]])])])])]),Object(a["createElementVNode"])("div",Z,[Object(a["createElementVNode"])("button",{class:"btn me-5 pb-0 text-decoration-underline",type:"button",onClick:t[7]||(t[7]=e=>s.reset())}," 清空全部搜尋條件 "),Object(a["createElementVNode"])("button",{id:"searchBtn",class:"btn btn-primary text-white px-4 py-2",type:"button",onClick:t[8]||(t[8]=(...e)=>s.search&&s.search(...e))}," 查詢 ")])])}var ee=c("b7eb"),te=c("c535"),ce={data(){return{eventType:"ACTIVE",type:[],id:"",name:"",startDate:"",endDate:""}},components:{Datepicker:ee["a"]},computed:{...Object(d["c"])(["promotionType","promotionSearchParams"]),limitStartDate(){const e=this.endDate.getFullYear()-1,t=this.endDate.getMonth(),c=this.endDate.getDate();return new Date(e,t,c)},limitEndDate(){const e=this.startDate.getFullYear()+1,t=this.startDate.getMonth(),c=this.startDate.getDate();return new Date(e,t,c)}},inject:["searchData"],watch:{promotionType:{deep:!0,immediate:!0,handler(e){0!==e.length&&(this.type=e.map(e=>e.id))}}},methods:{async search(){this.setSearchParams(),this.$store.dispatch("setLoading"),await this.$store.dispatch("getPromotions",this.promotionSearchParams),this.$store.dispatch("hideLoading")},selectAllType(e){const t=e.target.checked;t?this.type=this.promotionType.map(e=>e.id):this.type.splice(0)},setSearchParams(){const{companyId:e}=this.searchData,t={company_id:e,...this.id&&{id:this.id},...this.name&&{name:this.name},start_date:Object(te["g"])(this.startDate),end_date:Object(te["g"])(this.endDate),types:this.type.length===this.promotionType.length?JSON.stringify(["ALL"]):JSON.stringify([...this.type]),status:this.eventType};this.$store.commit("SET_PROMOTION_SEARCH_PARAMS",t)},reset(){const e=new Date,t=e.getFullYear(),c=e.getMonth();this.startDate=new Date(t,c,1),this.endDate=new Date(t,c+1,0),this.eventType="ACTIVE",this.setSearchParams()}},created(){this.reset()}},ae=(c("4d44"),c("6b0d")),oe=c.n(ae);const le=oe()(ce,[["render",q],["__scopeId","data-v-0968d91a"]]);var se=le;const ne=e=>(Object(a["pushScopeId"])("data-v-fa8eb922"),e=e(),Object(a["popScopeId"])(),e),ie={key:0,class:"card"},de={class:"table-responsive"},re={class:"table border"},me={class:"bg-secondary-light"},pe=ne(()=>Object(a["createElementVNode"])("th",{scope:"col"},"促銷類型",-1)),be={scope:"col"},ue={class:"d-flex"},Oe={scope:"col"},he={class:"d-flex"},ye={scope:"col"},je={class:"d-center"},Ee={scope:"col"},Ne={class:"d-flex"},fe={scope:"col"},ge={class:"d-flex"},Ve={scope:"col"},ke={class:"d-center"},ve=ne(()=>Object(a["createElementVNode"])("th",{scope:"col"},"操作",-1)),Ae={key:0,class:"d-center"},_e=["onClick"],Se=["src"],Ce={key:1,class:"d-center flex-wrap"},De=["onClick"],we=ne(()=>Object(a["createElementVNode"])("i",{class:"ri-pencil-line me-1"},null,-1)),Te=["onClick"],Be=["src"],xe=["onClick"],Ie=["src"],Re={key:1,class:"ri-play-fill me-1"};function Pe(e,t,o,l,s,n){return s.promotionList.length>0?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ie,[Object(a["createElementVNode"])("div",de,[Object(a["createElementVNode"])("table",re,[Object(a["createElementVNode"])("thead",null,[Object(a["createElementVNode"])("tr",me,[pe,Object(a["createElementVNode"])("th",be,[Object(a["createElementVNode"])("div",ue,[Object(a["createTextVNode"])(" 促銷代號 "),Object(a["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc p-0 ms-1",onClick:t[0]||(t[0]=(...e)=>n.sortData&&n.sortData(...e)),"data-sort-item":"id"})])]),Object(a["createElementVNode"])("th",Oe,[Object(a["createElementVNode"])("div",he,[Object(a["createTextVNode"])(" 促銷名稱 "),Object(a["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc p-0 ms-1",onClick:t[1]||(t[1]=(...e)=>n.sortData&&n.sortData(...e)),"data-sort-item":"name"})])]),Object(a["createElementVNode"])("th",ye,[Object(a["createElementVNode"])("div",je,[Object(a["createTextVNode"])(" 促銷狀態 "),Object(a["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc p-0 ms-1",onClick:t[2]||(t[2]=(...e)=>n.sortData&&n.sortData(...e)),"data-sort-item":""})])]),Object(a["createElementVNode"])("th",Ee,[Object(a["createElementVNode"])("div",Ne,[Object(a["createTextVNode"])(" 開始日期 "),Object(a["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc p-0 ms-1",onClick:t[3]||(t[3]=(...e)=>n.sortData&&n.sortData(...e)),"data-sort-item":"begin_date"})])]),Object(a["createElementVNode"])("th",fe,[Object(a["createElementVNode"])("div",ge,[Object(a["createTextVNode"])(" 結束日期 "),Object(a["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc p-0 ms-1",onClick:t[4]||(t[4]=(...e)=>n.sortData&&n.sortData(...e)),"data-sort-item":"end_date"})])]),Object(a["createElementVNode"])("th",Ve,[Object(a["createElementVNode"])("div",ke,[Object(a["createTextVNode"])(" 優先順序 "),Object(a["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc p-0 ms-1",onClick:t[5]||(t[5]=(...e)=>n.sortData&&n.sortData(...e)),"data-sort-item":"position_id"})])]),ve])]),Object(a["createElementVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(s.promotionList,t=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{"data-test":"promotionData",key:t.id},[Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(s.translate(t.type)),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t.id),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t.name),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t.is_enable?s.translate(t.status):"已停用"),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t.start_date),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t.end_date),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])("EXPIRED"!==t.status?t.position_id:"-"),1),Object(a["createElementVNode"])("td",null,["EXPIRED"===t.status?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Ae,[e.targetRouteAuthority.can_view?(Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:0,type:"button",class:"btn operate-btn d-center",onClick:e=>n.getDetailData(t,"view")},[Object(a["createElementVNode"])("img",{class:"me-1",src:c("c449"),alt:"檢視"},null,8,Se),Object(a["createTextVNode"])(" 檢視 ")],8,_e)):Object(a["createCommentVNode"])("",!0)])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Ce,[Object(a["createElementVNode"])("button",{type:"button",class:"btn operate-btn d-center m-1",onClick:e=>n.getDetailData(t,"edit")},[we,Object(a["createTextVNode"])("編輯 ")],8,De),"INACTIVE"===t.status?(Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:0,type:"button",class:"btn operate-btn d-center m-1",onClick:e=>n.setData("delete",t)},[Object(a["createElementVNode"])("img",{class:"me-1",src:c("2dbd"),alt:"刪除"},null,8,Be),Object(a["createTextVNode"])(" 刪除 ")],8,Te)):Object(a["createCommentVNode"])("",!0),"ACTIVE"===t.status?(Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:1,type:"button",class:"btn operate-btn d-center m-1",onClick:e=>n.setData("enable",t)},[t.is_enable?(Object(a["openBlock"])(),Object(a["createElementBlock"])("img",{key:0,class:"me-1",src:c("be60"),alt:"停用"},null,8,Ie)):(Object(a["openBlock"])(),Object(a["createElementBlock"])("i",Re)),Object(a["createTextVNode"])(Object(a["toDisplayString"])(t.is_enable?"停用":"啟用"),1)],8,xe)):Object(a["createCommentVNode"])("",!0)]))])]))),128))])])])])):Object(a["createCommentVNode"])("",!0)}var Me=c("dd88"),Le=c("c457"),Ue=c("1970");const Ge=e=>new Promise((t,c)=>{Ue["a"].post("/v1/promotion",e).then(e=>{t(e)}).catch(e=>{c(e)})}),Fe=e=>new Promise((t,c)=>{Ue["a"].patch("/v1/promotion",e).then(e=>{t(e)}).catch(e=>{c(e)})}),Ye=e=>new Promise((t,c)=>{Ue["a"].patch("/v1/promotion/enable_status",e).then(e=>{t(e)}).catch(e=>{c(e)})}),Ke=e=>new Promise((t,c)=>{Ue["a"].delete("/v1/promotion",e).then(e=>{t(e)}).catch(e=>{c(e)})});var He=c("31c3"),We={data(){return{promotionList:[],translate:Le["a"]}},computed:{...Object(d["c"])(["promotions","promotionSearchParams","targetRouteAuthority"])},watch:{promotions:{deep:!0,immediate:!0,handler(e){this.promotionList=[...e]}}},inject:["searchData"],emits:["setEditData"],methods:{sortData(e){this.promotionList=JSON.parse(JSON.stringify(Object(Me["a"])(e,this.promotionList)))},async setData(e,t){const{id:c,is_enable:a}=t,{companyId:o}=this.searchData,l="delete"===e?Ke:Ye,s={company_id:o,store_id:"0",id:c,..."enable"===e&&{is_enable:!a}};try{this.$store.dispatch("setLoading");const e=await l(s);console.log(e),204===e.status&&await this.$store.dispatch("getPromotions",this.promotionSearchParams),this.$store.dispatch("hideLoading")}catch(n){this.$store.dispatch("hideLoading"),Object(He["e"])("無法修改!","請聯絡客服人員"),console.log(n)}},async getDetailData(e,t){const{companyId:c}=this.searchData,a={company_id:c,store_id:"0",id:e.id};this.$store.dispatch("setLoading"),await Promise.all([this.$store.dispatch("getPromotionDetails",a),this.$store.dispatch("getStoresByGroup",{company_id:c,store_type:"ALL"})]),this.$emit("setEditData",{data:e,type:t}),this.$store.dispatch("hideLoading")}}};c("f76b");const $e=oe()(We,[["render",Pe],["__scopeId","data-v-fa8eb922"]]);var Qe=$e,ze=c("0853"),Xe=c.n(ze);const Je=e=>(Object(a["pushScopeId"])("data-v-e8bf8556"),e=e(),Object(a["popScopeId"])(),e),Ze={class:"card"},qe={class:"container-fluid"},et={class:"row item-spacing"},tt=Je(()=>Object(a["createElementVNode"])("div",{class:"col-2 text-end"},[Object(a["createElementVNode"])("label",{class:"field-name fs-base",for:"promotionType"},"促銷代號")],-1)),ct={class:"col-5"},at={class:"d-flex"},ot=["disabled"],lt={class:"d-center priority"},st=Je(()=>Object(a["createElementVNode"])("label",{class:"field-name fs-small fw-normal text-nowrap",for:"priority"},"優先順序",-1)),nt=["disabled"],it={class:"row item-spacing"},dt=Je(()=>Object(a["createElementVNode"])("div",{class:"col-2 text-end"},[Object(a["createElementVNode"])("label",{class:"field-name fs-base",for:"name"},[Object(a["createElementVNode"])("span",{class:"text-danger"},"*"),Object(a["createTextVNode"])(" 促銷名稱")])],-1)),rt={class:"col"},mt=["disabled"],pt={class:"row item-spacing"},bt=Je(()=>Object(a["createElementVNode"])("div",{class:"col-2 text-end"},[Object(a["createElementVNode"])("label",{class:"field-name fs-base",for:"description"},"促銷說明")],-1)),ut={class:"col"},Ot=["disabled"],ht={class:"row item-spacing"},yt=Je(()=>Object(a["createElementVNode"])("div",{class:"col-2 text-end"},[Object(a["createElementVNode"])("label",{class:"field-name fs-base"},[Object(a["createElementVNode"])("span",{class:"text-danger"},"*"),Object(a["createTextVNode"])(" 促銷活動日期")])],-1)),jt={class:"col"},Et={class:"d-flex align-items-center flex-wrap"},Nt={class:"dateInputLayout"},ft=Je(()=>Object(a["createElementVNode"])("i",{class:"ri-calendar-2-fill pe-3"},null,-1)),gt=Je(()=>Object(a["createElementVNode"])("span",{class:"mx-2"},"至",-1)),Vt={class:"dateInputLayout"},kt=Je(()=>Object(a["createElementVNode"])("i",{class:"ri-calendar-2-fill pe-3"},null,-1)),vt={class:"d-flex align-items-center mt-2 mt-xxl-0 ms-3",ref:"setPromotionTime"},At=Je(()=>Object(a["createElementVNode"])("label",{class:"field-name fs-small ms-0 ms-xxl-3",for:"promotionName"},[Object(a["createElementVNode"])("span",{class:"text-danger"},"*"),Object(a["createTextVNode"])(" 促銷活動時間")],-1)),_t={class:"form-check mb-0 ms-5"},St=["disabled"],Ct=Je(()=>Object(a["createElementVNode"])("label",{class:"field-name fs-small",for:"flexCheckDefault"}," 全日 ",-1)),Dt={class:"dateInputLayout time"},wt=Je(()=>Object(a["createElementVNode"])("i",{class:"ri-time-line pe-3"},null,-1)),Tt=Je(()=>Object(a["createElementVNode"])("span",{class:"mx-2"},"~",-1)),Bt={class:"dateInputLayout time"},xt=Je(()=>Object(a["createElementVNode"])("i",{class:"ri-time-line pe-3"},null,-1)),It={class:"row item-spacing"},Rt=Je(()=>Object(a["createElementVNode"])("div",{class:"col-2 text-end"},[Object(a["createElementVNode"])("label",{class:"field-name fs-base",for:"promotionName"},"特殊時段設定")],-1)),Pt={class:"col"},Mt={class:"form-check form-check-inline mb-0"},Lt=["disabled"],Ut=Je(()=>Object(a["createElementVNode"])("label",{class:"field-name fs-small",for:"inlineRadio1"},"無",-1)),Gt={class:"form-check form-check-inline ms-3 me-0 mb-0"},Ft=["disabled"],Yt=Je(()=>Object(a["createElementVNode"])("label",{class:"field-name fs-small",for:"inlineRadio2"},"星期限定",-1)),Kt=Je(()=>Object(a["createElementVNode"])("img",{class:"me-1",src:Xe.a},null,-1)),Ht=Je(()=>Object(a["createElementVNode"])("span",{class:"fs-micro me-2"},"可以設定活動固定在星期幾",-1)),Wt={class:"form-check form-check-inline ms-4 me-0 mb-0"},$t=["disabled"],Qt=Je(()=>Object(a["createElementVNode"])("label",{class:"field-name fs-small",for:"inlineRadio22"},"每月特定日",-1)),zt=Je(()=>Object(a["createElementVNode"])("img",{class:"me-1",src:Xe.a},null,-1)),Xt=Je(()=>Object(a["createElementVNode"])("span",{class:"fs-micro"},"如：每月1、10、20號，請填寫01,10,20",-1)),Jt={key:0,class:"row item-spacing"},Zt=Je(()=>Object(a["createElementVNode"])("div",{class:"col-2 text-end"},[Object(a["createElementVNode"])("label",{class:"field-name fs-base",for:"promotionName"},"星期限定")],-1)),qt={class:"col"},ec={class:"container-fluid d-flex flex-wrap ps-0"},tc={class:"week-btn"},cc=["disabled"],ac=Je(()=>Object(a["createElementVNode"])("label",{class:"btn btn-outline-secondary me-1 me-lg-2",for:"Monday"}," 星期一 ",-1)),oc={class:"week-btn"},lc=["disabled"],sc=Je(()=>Object(a["createElementVNode"])("label",{class:"btn btn-outline-secondary me-1 me-lg-2",for:"Tuesday"},"星期二",-1)),nc={class:"week-btn"},ic=["disabled"],dc=Je(()=>Object(a["createElementVNode"])("label",{class:"btn btn-outline-secondary me-1 me-lg-2",for:"Wednesday"},"星期三",-1)),rc={class:"week-btn"},mc=["disabled"],pc=Je(()=>Object(a["createElementVNode"])("label",{class:"btn btn-outline-secondary me-1 me-lg-2",for:"Thursday"},"星期四",-1)),bc={class:"week-btn"},uc=["disabled"],Oc=Je(()=>Object(a["createElementVNode"])("label",{class:"btn btn-outline-secondary me-1 me-lg-2",for:"friday"},"星期五",-1)),hc={class:"week-btn"},yc=["disabled"],jc=Je(()=>Object(a["createElementVNode"])("label",{class:"btn btn-outline-secondary me-1 me-lg-2",for:"Saturday"},"星期六",-1)),Ec={class:"week-btn"},Nc=["disabled"],fc=Je(()=>Object(a["createElementVNode"])("label",{class:"btn btn-outline-secondary me-1 me-lg-2",for:"sunday"},"星期日",-1)),gc={key:1,class:"row item-spacing"},Vc=Je(()=>Object(a["createElementVNode"])("div",{class:"col-2 text-end"},[Object(a["createElementVNode"])("label",{class:"field-name fs-base",for:"promotionName"},"每月特定日")],-1)),kc={class:"col-4"},vc=["disabled"],Ac={class:"row item-spacing"},_c=Je(()=>Object(a["createElementVNode"])("div",{class:"col-2 text-end"},[Object(a["createElementVNode"])("label",{class:"field-name fs-base",for:"promotionName"},"活動銷售方式")],-1)),Sc={class:"col-2"},Cc={class:"d-flex align-items-center"},Dc=["disabled","value"],wc=Je(()=>Object(a["createElementVNode"])("i",{class:"ri-arrow-down-s-line pe-2 fs-4"},null,-1)),Tc={class:"dropdown-menu w-100"},Bc={class:"container-fluid"},xc={class:"form-check border-bottom py-1"},Ic=Je(()=>Object(a["createElementVNode"])("label",{class:"form-check-label",for:"allPromotionType"}," 全部 ",-1)),Rc={class:"form-check"},Pc=["id","value"],Mc=["for"],Lc=Je(()=>Object(a["createElementVNode"])("div",{class:"col ps-0"},[Object(a["createElementVNode"])("img",{class:"mx-1",src:Xe.a}),Object(a["createElementVNode"])("span",{class:"fs-micro me-2 text-nowrap"},"選填，預設為全部銷售方式")],-1)),Uc={class:"row item-spacing"},Gc=Je(()=>Object(a["createElementVNode"])("div",{class:"col-2 text-end"},[Object(a["createElementVNode"])("label",{class:"field-name fs-base",for:"promotionName"},[Object(a["createElementVNode"])("span",{class:"text-danger"},"*"),Object(a["createTextVNode"])(" 平台來源")])],-1)),Fc={class:"col-2"},Yc={class:"d-flex align-items-center"},Kc=["disabled","value"],Hc=Je(()=>Object(a["createElementVNode"])("i",{class:"ri-arrow-down-s-line pe-2 fs-4"},null,-1)),Wc={class:"dropdown-menu w-100"},$c={class:"container-fluid"},Qc={class:"form-check border-bottom py-1"},zc=Je(()=>Object(a["createElementVNode"])("label",{class:"form-check-label",for:"allPlatform"}," 全部 ",-1)),Xc={class:"form-check"},Jc=["value","id"],Zc=["for"],qc={class:"row item-spacing"},ea=Je(()=>Object(a["createElementVNode"])("div",{class:"col-2 text-end"},[Object(a["createElementVNode"])("label",{class:"field-name fs-base",for:"promotionName"},[Object(a["createElementVNode"])("span",{class:"text-danger"},"*"),Object(a["createTextVNode"])(" 促銷活動類型")])],-1)),ta={class:"col-2"},ca=["disabled"],aa=Je(()=>Object(a["createElementVNode"])("option",{value:"",disabled:""},"請選擇促銷類型",-1)),oa=Je(()=>Object(a["createElementVNode"])("option",{value:"SPECIAL_SALE"},"特賣促銷",-1)),la=[aa,oa],sa={key:0,class:"card"},na={key:0,class:"d-center mt-4 mb-3"},ia={key:1,class:"d-center mt-4 mb-3"};function da(e,t,c,o,l,s){const n=Object(a["resolveComponent"])("Datepicker"),i=Object(a["resolveComponent"])("SpecialPromotion");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createElementVNode"])("div",Ze,[Object(a["createElementVNode"])("div",qe,[Object(a["createElementVNode"])("div",et,[tt,Object(a["createElementVNode"])("div",ct,[Object(a["createElementVNode"])("div",at,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",class:"form-control fs-small",id:"promotionType","onUpdate:modelValue":t[0]||(t[0]=e=>l.id=e),disabled:!s.createType||"AUTO"===s.createType},null,8,ot),[[a["vModelText"],l.id]]),Object(a["createElementVNode"])("div",lt,[st,Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"number",class:"form-control text-end fs-small",id:"priority",disabled:"view"===s.setType,"onUpdate:modelValue":t[1]||(t[1]=e=>l.positionId=e)},null,8,nt),[[a["vModelText"],l.positionId]])])])])]),Object(a["createElementVNode"])("div",it,[dt,Object(a["createElementVNode"])("div",rt,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",class:"form-control fs-small",id:"name",placeholder:"ex.2023周年慶檔期大促銷",maxlength:"50","onUpdate:modelValue":t[2]||(t[2]=e=>l.name=e),disabled:s.disabledStatus},null,8,mt),[[a["vModelText"],l.name]])])]),Object(a["createElementVNode"])("div",pt,[bt,Object(a["createElementVNode"])("div",ut,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",class:"form-control fs-small",id:"description",placeholder:"促銷活動詳細說明",maxlength:"200","onUpdate:modelValue":t[3]||(t[3]=e=>l.description=e),disabled:s.disabledStatus},null,8,Ot),[[a["vModelText"],l.description]])])]),Object(a["createElementVNode"])("div",ht,[yt,Object(a["createElementVNode"])("div",jt,[Object(a["createElementVNode"])("div",Et,[Object(a["createElementVNode"])("div",Nt,[Object(a["createVNode"])(n,{class:"form-control cursor-pointer",inputFormat:"yyyy-MM-dd",startingView:"day",minimumView:"day",lowerLimit:new Date,upperLimit:l.endDate,modelValue:l.startDate,"onUpdate:modelValue":t[4]||(t[4]=e=>l.startDate=e),disabled:s.disabledStatus},null,8,["lowerLimit","upperLimit","modelValue","disabled"]),ft]),gt,Object(a["createElementVNode"])("div",Vt,[Object(a["createVNode"])(n,{class:"form-control cursor-pointer",inputFormat:"yyyy-MM-dd",startingView:"day",minimumView:"day",lowerLimit:l.startDate,modelValue:l.endDate,"onUpdate:modelValue":t[5]||(t[5]=e=>l.endDate=e),disabled:"view"===s.setType},null,8,["lowerLimit","modelValue","disabled"]),kt]),Object(a["createElementVNode"])("div",vt,[At,Object(a["createElementVNode"])("div",_t,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=e=>l.allDay=e),id:"flexCheckDefault",disabled:s.disabledStatus},null,8,St),[[a["vModelCheckbox"],l.allDay]]),Ct]),l.allDay?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:0},[Object(a["createElementVNode"])("div",Dt,[Object(a["createVNode"])(n,{class:"form-control cursor-pointer fs-small",startingView:"time",startingViewDate:new Date(l.startTime),minimumView:"time",modelValue:l.startTime,"onUpdate:modelValue":t[7]||(t[7]=e=>l.startTime=e),inputFormat:"HH:mm",onClick:s.openPicker,onClosed:s.timeLimit,disabled:s.disabledStatus},null,8,["startingViewDate","modelValue","onClick","onClosed","disabled"]),wt]),Tt,Object(a["createElementVNode"])("div",Bt,[Object(a["createVNode"])(n,{class:"form-control cursor-pointer fs-small",startingView:"time",minimumView:"time",startingViewDate:l.endTime,modelValue:l.endTime,"onUpdate:modelValue":t[8]||(t[8]=e=>l.endTime=e),inputFormat:"HH:mm",onClick:s.openPicker,onClosed:s.timeLimit,disabled:s.disabledStatus},null,8,["startingViewDate","modelValue","onClick","onClosed","disabled"]),xt])],64))],512)])])]),Object(a["createElementVNode"])("div",It,[Rt,Object(a["createElementVNode"])("div",Pt,[Object(a["createElementVNode"])("div",Mt,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"inlineRadio1",value:"NONE","onUpdate:modelValue":t[9]||(t[9]=e=>l.specialPeriod=e),disabled:s.disabledStatus},null,8,Lt),[[a["vModelRadio"],l.specialPeriod]]),Ut]),Object(a["createElementVNode"])("div",Gt,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"inlineRadio2",value:"DAY_OF_WEEK","onUpdate:modelValue":t[10]||(t[10]=e=>l.specialPeriod=e),disabled:s.disabledStatus},null,8,Ft),[[a["vModelRadio"],l.specialPeriod]]),Yt]),Kt,Ht,Object(a["createElementVNode"])("div",Wt,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"inlineRadio22",value:"DAY_OF_MONTH","onUpdate:modelValue":t[11]||(t[11]=e=>l.specialPeriod=e),disabled:s.disabledStatus},null,8,$t),[[a["vModelRadio"],l.specialPeriod]]),Qt]),zt,Xt])]),"DAY_OF_WEEK"===l.specialPeriod?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Jt,[Zt,Object(a["createElementVNode"])("div",qt,[Object(a["createElementVNode"])("div",ec,[Object(a["createElementVNode"])("div",tc,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"checkbox",class:"btn-check",id:"Monday","onUpdate:modelValue":t[12]||(t[12]=e=>l.week=e),disabled:s.disabledStatus,value:"is_monday"},null,8,cc),[[a["vModelCheckbox"],l.week]]),ac]),Object(a["createElementVNode"])("div",oc,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"checkbox",class:"btn-check",id:"Tuesday","onUpdate:modelValue":t[13]||(t[13]=e=>l.week=e),disabled:s.disabledStatus,value:"is_tuesday"},null,8,lc),[[a["vModelCheckbox"],l.week]]),sc]),Object(a["createElementVNode"])("div",nc,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"checkbox",class:"btn-check",id:"Wednesday","onUpdate:modelValue":t[14]||(t[14]=e=>l.week=e),disabled:s.disabledStatus,value:"is_wednesday"},null,8,ic),[[a["vModelCheckbox"],l.week]]),dc]),Object(a["createElementVNode"])("div",rc,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"checkbox",class:"btn-check",id:"Thursday","onUpdate:modelValue":t[15]||(t[15]=e=>l.week=e),disabled:s.disabledStatus,value:"is_thursday"},null,8,mc),[[a["vModelCheckbox"],l.week]]),pc]),Object(a["createElementVNode"])("div",bc,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"checkbox",class:"btn-check",id:"friday","onUpdate:modelValue":t[16]||(t[16]=e=>l.week=e),disabled:s.disabledStatus,value:"is_friday"},null,8,uc),[[a["vModelCheckbox"],l.week]]),Oc]),Object(a["createElementVNode"])("div",hc,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"checkbox",class:"btn-check",id:"Saturday","onUpdate:modelValue":t[17]||(t[17]=e=>l.week=e),disabled:s.disabledStatus,value:"is_saturday"},null,8,yc),[[a["vModelCheckbox"],l.week]]),jc]),Object(a["createElementVNode"])("div",Ec,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"checkbox",class:"btn-check",id:"sunday","onUpdate:modelValue":t[18]||(t[18]=e=>l.week=e),disabled:s.disabledStatus,value:"is_sunday"},null,8,Nc),[[a["vModelCheckbox"],l.week]]),fc])])])])):"DAY_OF_MONTH"===l.specialPeriod?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",gc,[Vc,Object(a["createElementVNode"])("div",kc,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",class:"form-control fs-small",id:"promotionName",placeholder:"ex.01,10,20",disabled:s.disabledStatus,"onUpdate:modelValue":t[19]||(t[19]=e=>l.specificDate=e)},null,8,vc),[[a["vModelText"],l.specificDate]])])])):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("div",Ac,[_c,Object(a["createElementVNode"])("div",Sc,[Object(a["createElementVNode"])("div",Cc,[Object(a["createElementVNode"])("div",{class:Object(a["normalizeClass"])(["input-group rounded dropdownInputLayout",{disableInput:s.disabledStatus}])},[Object(a["createElementVNode"])("input",{id:"invoiceNumberDropDown",disabled:s.disabledStatus,type:"text",class:"form-control border border-0 fs-small",role:"button",placeholder:"請選擇活動銷售方式",readonly:"","data-bs-toggle":"dropdown","data-bs-auto-close":"outside","aria-expanded":"false",value:l.sale_method.is_all&&l.sale_method.content.length>0?"全選":0===l.sale_method.content.length?"":`已選擇${l.sale_method.content.length}種`},null,8,Dc),wc,Object(a["createElementVNode"])("div",Tc,[Object(a["createElementVNode"])("div",Bc,[Object(a["createElementVNode"])("div",xc,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"form-check-input",type:"checkbox",id:"allPromotionType","onUpdate:modelValue":t[20]||(t[20]=e=>l.sale_method.is_all=e),onClick:t[21]||(t[21]=e=>s.checkItem(e,"saleMethod",!0))},null,512),[[a["vModelCheckbox"],l.sale_method.is_all]]),Ic]),Object(a["createElementVNode"])("ul",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.saleMethod,e=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{key:e.sale_method_id},[Object(a["createElementVNode"])("div",Rc,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"form-check-input",type:"checkbox",id:e.sale_method_id,value:{id:e.sale_method_id,name:e.sale_method_name},"onUpdate:modelValue":t[22]||(t[22]=e=>l.sale_method.content=e),onClick:t[23]||(t[23]=e=>s.checkItem(e,"saleMethod"))},null,8,Pc),[[a["vModelCheckbox"],l.sale_method.content]]),Object(a["createElementVNode"])("label",{class:"form-check-label",for:e.sale_method_id},Object(a["toDisplayString"])(e.sale_method_name),9,Mc)])]))),128))])])])],2)])]),Lc]),Object(a["createElementVNode"])("div",Uc,[Gc,Object(a["createElementVNode"])("div",Fc,[Object(a["createElementVNode"])("div",Yc,[Object(a["createElementVNode"])("div",{class:Object(a["normalizeClass"])(["input-group rounded dropdownInputLayout",{disableInput:s.disabledStatus}])},[Object(a["createElementVNode"])("input",{id:"invoiceNumberDropDown",type:"text",class:"form-control border border-0 fs-small",role:"button",readonly:"",placeholder:"請選擇平台來源",disabled:s.disabledStatus,"data-bs-toggle":"dropdown","data-bs-auto-close":"outside","aria-expanded":"false",value:l.web_platform.is_all&&l.web_platform.content.length>0?"全選":0===l.web_platform.content.length?"":`已選擇${l.web_platform.content.length}種`},null,8,Kc),Hc,Object(a["createElementVNode"])("div",Wc,[Object(a["createElementVNode"])("div",$c,[Object(a["createElementVNode"])("div",Qc,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"form-check-input",type:"checkbox",id:"allPlatform","onUpdate:modelValue":t[24]||(t[24]=e=>l.web_platform.is_all=e),onClick:t[25]||(t[25]=e=>s.checkItem(e,"platform",!0))},null,512),[[a["vModelCheckbox"],l.web_platform.is_all]]),zc]),Object(a["createElementVNode"])("ul",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.storePlatforms,e=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{key:e.id},[Object(a["createElementVNode"])("div",Xc,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"form-check-input",type:"checkbox",value:{id:e.id,name:e.name},id:e.id,"onUpdate:modelValue":t[26]||(t[26]=e=>l.web_platform.content=e),onClick:t[27]||(t[27]=e=>s.checkItem(e,"platform"))},null,8,Jc),[[a["vModelCheckbox"],l.web_platform.content]]),Object(a["createElementVNode"])("label",{class:"form-check-label",for:e.id},Object(a["toDisplayString"])(e.display_name),9,Zc)])]))),128))])])])],2)])])]),Object(a["createElementVNode"])("div",qc,[ea,Object(a["createElementVNode"])("div",ta,[Object(a["withDirectives"])(Object(a["createElementVNode"])("select",{class:"form-select fs-small","onUpdate:modelValue":t[28]||(t[28]=e=>l.promotionType=e),disabled:s.disabledStatus},la,8,ca),[[a["vModelSelect"],l.promotionType]])])])])]),"SPECIAL_SALE"===l.promotionType?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",sa,[Object(a["createVNode"])(i,{ref:"specialPromotion",editData:l.editData,disabledStatus:s.disabledStatus},null,8,["editData","disabledStatus"]),"view"!==s.setType?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",na,[Object(a["createElementVNode"])("button",{type:"button",class:"btn cancel-btn bg-white border border-secondary",onClick:t[29]||(t[29]=t=>e.$emit("back"))}," 取消 "),Object(a["createElementVNode"])("button",{type:"button",class:"btn btn-primary confirm-btn ms-3",onClick:t[30]||(t[30]=(...e)=>s.saveData&&s.saveData(...e))}," 儲存 ")])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ia,[Object(a["createElementVNode"])("button",{type:"button",class:"btn btn-primary confirm-btn",onClick:t[31]||(t[31]=t=>e.$emit("back"))}," 返回 ")]))])):Object(a["createCommentVNode"])("",!0)],64)}c("14d9");var ra=c("67cf"),ma=c.n(ra),pa=c("8d56"),ba=c.n(pa),ua=c("2dbd"),Oa=c.n(ua);const ha=e=>(Object(a["pushScopeId"])("data-v-37a50328"),e=e(),Object(a["popScopeId"])(),e),ya=ha(()=>Object(a["createElementVNode"])("div",{class:"d-flex align-items-center"},[Object(a["createElementVNode"])("img",{src:ma.a,alt:"dashboard-line",class:"dashboard-line"}),Object(a["createElementVNode"])("p",{class:"ms-2 fs-base text-primary"},"特賣促銷")],-1)),ja={class:"container-fluid mt-4"},Ea={class:"promotionType-tab"},Na={class:"card mb-0"},fa={key:0,class:"container-fluid"},ga={class:"row"},Va={key:0,class:"col-3 border-bottom border-end border-primary-light"},ka={class:"py-2 mt-1 d-end"},va={class:"border px-3 rounded-5 d-center w-75"},Aa=ha(()=>Object(a["createElementVNode"])("span",{class:"mdi mdi-magnify search-widget-icon fs-base"},null,-1)),_a={class:"col border-bottom border-primary-light"},Sa={class:"py-2 mt-1 d-end"},Ca={class:"border px-3 rounded-5 d-center"},Da=ha(()=>Object(a["createElementVNode"])("span",{class:"mdi mdi-magnify search-widget-icon fs-base"},null,-1)),wa=["placeholder"],Ta={class:"row border-bottom"},Ba={key:0,class:"col-3 list border-end border-primary-light px-0"},xa={class:"category-list"},Ia=["onClick"],Ra={class:"col list"},Pa={class:"form-check py-2"},Ma=["value","id","onClick","checked"],La=["for"],Ua={class:"d-between mt-3 ps-4 pe-2"},Ga=ha(()=>Object(a["createElementVNode"])("span",{class:"ms-1 fs-small"},"已選項目",-1)),Fa={class:"border px-3 rounded-5 d-center me-1"},Ya=ha(()=>Object(a["createElementVNode"])("span",{class:"mdi mdi-magnify search-widget-icon fs-base"},null,-1)),Ka=["placeholder"],Ha={class:"table-responsive mt-2 mb-3"},Wa={class:"table"},$a={scope:"col"},Qa={scope:"col"},za={scope:"col"},Xa=ha(()=>Object(a["createElementVNode"])("th",{scope:"col"},"優惠方式",-1)),Ja=ha(()=>Object(a["createElementVNode"])("th",{scope:"col"},"非會員價",-1)),Za=ha(()=>Object(a["createElementVNode"])("th",{scope:"col"},"會員價",-1)),qa=ha(()=>Object(a["createElementVNode"])("th",{scope:"col"},"操作",-1)),eo={class:"d-flex"},to={class:"form-check form-check-inline d-center"},co=["name","id","onUpdate:modelValue","disabled"],ao=["for"],oo={class:"form-check form-check-inline d-center"},lo=["name","onUpdate:modelValue","id","disabled"],so=["for"],no=ha(()=>Object(a["createElementVNode"])("span",{class:"fs-small d-center"},"$",-1)),io=["onUpdate:modelValue","disabled"],ro=["onUpdate:modelValue","disabled"],mo=ha(()=>Object(a["createElementVNode"])("span",{class:"fs-small d-center"},"%",-1)),po=ha(()=>Object(a["createElementVNode"])("span",{class:"fs-small d-center"},"$",-1)),bo=["onUpdate:modelValue","disabled"],uo=["onUpdate:modelValue","disabled"],Oo=ha(()=>Object(a["createElementVNode"])("span",{class:"fs-small d-center"},"%",-1)),ho={class:"d-center"},yo=["disabled","onClick"],jo=ha(()=>Object(a["createElementVNode"])("img",{src:ba.a,alt:"排除商品"},null,-1)),Eo=["disabled","onClick"],No=ha(()=>Object(a["createElementVNode"])("img",{class:"me-1",src:Oa.a,alt:"刪除"},null,-1)),fo={class:"card border-end-0 border-start-0"},go={class:"container-fluid"},Vo=Object(a["createStaticVNode"])('<div class="row" data-v-37a50328><div class="col-3 bg-light-gray-white border-bottom border-end" data-v-37a50328><p class="py-2 my-1 ms-2" data-v-37a50328>已選擇的套用門店</p></div><div class="col bg-light-gray-white border-bottom" data-v-37a50328><div class="d-between" data-v-37a50328><p class="py-2 my-1 ms-2" data-v-37a50328>選擇套用門店</p><p data-v-37a50328><span class="text-danger" data-v-37a50328>* </span>必選</p></div></div></div>',1),ko={class:"row"},vo={class:"col-3 border-end pe-0"},Ao={class:"border px-3 my-2 me-2 rounded-5 d-center"},_o=ha(()=>Object(a["createElementVNode"])("span",{class:"mdi mdi-magnify search-widget-icon fs-base"},null,-1)),So={class:"selected-apply"},Co={key:0,class:"d-center h-100"},Do=ha(()=>Object(a["createElementVNode"])("p",{class:"empty-text"},"請從右方勾選套用門店",-1)),wo=[Do],To={class:"form-check"},Bo=["id","onClick","disabled"],xo=["for"],Io={class:"form-check"},Ro=["id","onClick","disabled"],Po=["for"],Mo={class:"col"},Lo={class:"d-between"},Uo={class:"border px-3 my-2 rounded-5 d-center"},Go=ha(()=>Object(a["createElementVNode"])("span",{class:"mdi mdi-magnify search-widget-icon fs-base"},null,-1)),Fo=["checked"],Yo=ha(()=>Object(a["createElementVNode"])("label",{class:"btn btn-outline-secondary me-3 mb-0",for:"allStoreType"},"全部",-1)),Ko=["checked"],Ho=ha(()=>Object(a["createElementVNode"])("label",{class:"btn btn-outline-secondary me-3 mb-0",for:"voluntaryStoreType"},"直營店",-1)),Wo=["checked"],$o=ha(()=>Object(a["createElementVNode"])("label",{class:"btn btn-outline-secondary mb-0",for:"franchiseStoreType"},"加盟店",-1)),Qo={class:"form-check ms-2 mt-2 py-2 mb-2 border-bottom"},zo=["disabled"],Xo=ha(()=>Object(a["createElementVNode"])("label",{class:"form-check-label",for:"selectAllStore"}," 全選 ",-1)),Jo={class:"select-list"},Zo={class:"accordion",id:"accordionPanelsStayOpenExample"},qo={class:"accordion-header",id:"panelsStayOpen-headingOne"},el={class:"d-between"},tl={class:"d-flex align-items-center px-2"},cl=["onClick","id","checked","disabled"],al=["for"],ol=["data-bs-target","aria-controls"],ll=["id"],sl={class:"accordion-body py-0 px-4"},nl={class:"container-fluid"},il={class:"row row-cols-3"},dl={class:"form-check py-2"},rl=["disabled","name","id","onClick","checked"],ml=["for"],pl={class:"card border-end-0 border-start-0 border-bottom-0 mb-0"},bl={class:"container-fluid"},ul=Object(a["createStaticVNode"])('<div class="row" data-v-37a50328><div class="col-3 bg-light-gray-white border-bottom border-end" data-v-37a50328><p class="py-2 my-1 ms-2" data-v-37a50328>已選擇的會員群組</p></div><div class="col bg-light-gray-white border-bottom" data-v-37a50328><div class="d-between" data-v-37a50328><p class="py-2 my-1 ms-2" data-v-37a50328>選擇會員群組</p><p data-v-37a50328>非必選</p></div></div></div>',1),Ol={class:"row"},hl={class:"col-3 border-end pe-0"},yl={key:0,class:"d-center h-100"},jl=ha(()=>Object(a["createElementVNode"])("p",{class:"empty-text"},"請從右方勾選會員群組",-1)),El=[jl],Nl=["id","value","disabled"],fl=["for"],gl={class:"col"},Vl={class:"d-between"},kl={class:"border px-3 my-2 rounded-5 d-center"},vl=ha(()=>Object(a["createElementVNode"])("span",{class:"mdi mdi-magnify search-widget-icon fs-base"},null,-1)),Al={class:"form-check ms-2 mt-2 py-2 mb-2 border-bottom"},_l=["disabled","checked"],Sl=ha(()=>Object(a["createElementVNode"])("label",{class:"form-check-label",for:"memberSelectAll"}," 全選 ",-1)),Cl={class:"card p-4"},Dl={class:"container-fluid"},wl={class:"row row-cols-3"},Tl={class:"form-check py-2 mb-0"},Bl=["value","id","disabled"],xl=["for"];function Il(e,t,c,o,l,s){const n=Object(a["resolveComponent"])("ExcludeProducts");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[ya,Object(a["createElementVNode"])("div",ja,[Object(a["createElementVNode"])("ul",Ea,[Object(a["createElementVNode"])("li",{class:Object(a["normalizeClass"])({active:"product"===l.promotionType}),onClick:t[0]||(t[0]=e=>l.promotionType="product")}," 商品特賣("+Object(a["toDisplayString"])(l.selectedProduct["product"].length)+") ",3),Object(a["createElementVNode"])("li",{class:Object(a["normalizeClass"])({active:"medium"===l.promotionType}),onClick:t[1]||(t[1]=e=>l.promotionType="medium")}," 類別特賣("+Object(a["toDisplayString"])(l.selectedProduct["medium"].length)+") ",3),Object(a["createElementVNode"])("li",{class:Object(a["normalizeClass"])({active:"main"===l.promotionType}),onClick:t[2]||(t[2]=e=>l.promotionType="main")}," 大類特賣("+Object(a["toDisplayString"])(l.selectedProduct["main"].length)+") ",3),Object(a["createElementVNode"])("li",{class:Object(a["normalizeClass"])({active:"small"===l.promotionType}),onClick:t[3]||(t[3]=e=>l.promotionType="small")}," 小類特賣("+Object(a["toDisplayString"])(l.selectedProduct["small"].length)+") ",3)]),Object(a["createElementVNode"])("div",Na,["edit"!==s.setType?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",fa,[Object(a["createElementVNode"])("div",ga,["product"===l.promotionType?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Va,[Object(a["createElementVNode"])("div",ka,[Object(a["createElementVNode"])("div",va,[Aa,Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",class:"form-control border-0 fs-small",placeholder:"搜尋類別","onUpdate:modelValue":t[4]||(t[4]=e=>l.categoryKeyWord=e)},null,512),[[a["vModelText"],l.categoryKeyWord]])])])])):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("div",_a,[Object(a["createElementVNode"])("div",Sa,[Object(a["createElementVNode"])("div",Ca,[Da,Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",class:"form-control border-0 fs-small",placeholder:"搜尋"+s.promotionTypeName,"onUpdate:modelValue":t[5]||(t[5]=e=>l.categoryItemKeyWord=e)},null,8,wa),[[a["vModelText"],l.categoryItemKeyWord]])])])])]),Object(a["createElementVNode"])("div",Ta,["product"===l.promotionType?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Ba,[Object(a["createElementVNode"])("ul",xa,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(s.filterCategory,e=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{key:e.category_id,class:Object(a["normalizeClass"])(["border-bottom border-secondary py-2",{active:l.category==e}]),onClick:t=>l.category=e},[Object(a["createElementVNode"])("p",null,Object(a["toDisplayString"])(e.category_name),1)],10,Ia))),128))])])):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("div",Ra,[Object(a["createElementVNode"])("div",{class:Object(a["normalizeClass"])(["row mt-3 ps-5",["product"===l.promotionType?"row-cols-3":"row-cols-5"]])},[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(s.filterCategoryItem,e=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:"col",key:e.id},[Object(a["createElementVNode"])("div",Pa,[Object(a["createElementVNode"])("input",{class:"form-check-input",type:"checkbox",value:e,id:e.name+e.id,onClick:t=>s.setSelectedItem(t,e),checked:s.checkItem(l.selectedProduct[l.promotionType],e.id)},null,8,Ma),Object(a["createElementVNode"])("label",{class:"form-check-label fs-small fw-normal",for:e.name+e.id},Object(a["toDisplayString"])(e.name),9,La)])]))),128))],2)])])])):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("div",Ua,[Ga,Object(a["createElementVNode"])("div",Fa,[Ya,Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",class:"form-control border-0 fs-small",placeholder:"搜尋"+s.promotionTypeName,"onUpdate:modelValue":t[6]||(t[6]=e=>l.selectedKeyWord=e)},null,8,Ka),[[a["vModelText"],l.selectedKeyWord]])])]),Object(a["createElementVNode"])("div",Ha,[Object(a["createElementVNode"])("table",Wa,[Object(a["createElementVNode"])("thead",null,[Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("th",$a,Object(a["toDisplayString"])("product"===l.promotionType?"商品類別":s.promotionTypeName+"名稱"),1),Object(a["createElementVNode"])("th",Qa,[Object(a["createElementVNode"])("p",{class:Object(a["normalizeClass"])({invisible:"product"!==l.promotionType})}," 商品編號 ",2)]),Object(a["createElementVNode"])("th",za,[Object(a["createElementVNode"])("p",{class:Object(a["normalizeClass"])({invisible:"product"!==l.promotionType})}," 商品名稱 ",2)]),Xa,Ja,Za,qa])]),Object(a["createElementVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(s.filterSelectedProduct,(e,o)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:o},[Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])("product"!==l.promotionType?e.name:e.category),1),Object(a["createElementVNode"])("td",{class:Object(a["normalizeClass"])({invisible:"product"!==l.promotionType})},Object(a["toDisplayString"])(e.id),3),Object(a["createElementVNode"])("td",{class:Object(a["normalizeClass"])({invisible:"product"!==l.promotionType})},Object(a["toDisplayString"])(l.truncateString(e.name,10)),3),Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("div",eo,[Object(a["createElementVNode"])("div",to,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"form-check-input",type:"radio",name:"優惠方式"+o,id:"折扣"+o,"onUpdate:modelValue":t=>e.promotion_type=t,value:"DISCOUNT",disabled:c.disabledStatus},null,8,co),[[a["vModelRadio"],e.promotion_type]]),Object(a["createElementVNode"])("label",{class:"form-check-label ms-1 fs-small fw-normal",for:"折扣"+o},"折扣",8,ao)]),Object(a["createElementVNode"])("div",oo,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"form-check-input",type:"radio",name:"優惠方式"+o,"onUpdate:modelValue":t=>e.promotion_type=t,id:"特價"+o,value:"SPECIAL_PRICE",disabled:c.disabledStatus},null,8,lo),[[a["vModelRadio"],e.promotion_type]]),Object(a["createElementVNode"])("label",{class:"form-check-label ms-1 fs-small fw-normal",for:"特價"+o},"特價",8,so)])])]),Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("div",{class:Object(a["normalizeClass"])(["input-group border rounded p-2",{disableInput:c.disabledStatus}])},["SPECIAL_PRICE"===e.promotion_type?(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:0},[no,Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"number",class:"form-control fs-small border-0 p-0 text-end","onUpdate:modelValue":t=>e.promotion_discount_price=t,disabled:c.disabledStatus},null,8,io),[[a["vModelText"],e.promotion_discount_price]])],64)):(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:1},[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"number",class:"form-control fs-small border-0 p-0","onUpdate:modelValue":t=>e.promotion_discount_rate=t,onChange:t[7]||(t[7]=(...e)=>s.checkDiscountValue&&s.checkDiscountValue(...e)),disabled:c.disabledStatus},null,40,ro),[[a["vModelText"],e.promotion_discount_rate]]),mo],64))],2)]),Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("div",{class:Object(a["normalizeClass"])(["input-group border rounded p-2",{disableInput:c.disabledStatus}])},["SPECIAL_PRICE"===e.promotion_type?(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:0},[po,Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"number",class:"form-control fs-small border-0 p-0 text-end","onUpdate:modelValue":t=>e.vip_promotion_discount_price=t,disabled:c.disabledStatus},null,8,bo),[[a["vModelText"],e.vip_promotion_discount_price]])],64)):(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:1},[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"number",class:"form-control fs-small border-0 p-0","onUpdate:modelValue":t=>e.vip_promotion_discount_rate=t,onChange:t[8]||(t[8]=(...e)=>s.checkDiscountValue&&s.checkDiscountValue(...e)),disabled:c.disabledStatus},null,40,uo),[[a["vModelText"],e.vip_promotion_discount_rate]]),Oo],64))],2)]),Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("div",ho,["product"!==l.promotionType?(Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:0,type:"button",class:Object(a["normalizeClass"])(["btn operate-btn d-center fs-small me-2 px-1",{disableInput:c.disabledStatus}]),"data-bs-toggle":"modal","data-bs-target":"#excludeProduct",disabled:c.disabledStatus,onClick:t=>s.setExcludeData(e)},[jo,Object(a["createTextVNode"])(" 排除商品 ")],10,yo)):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("button",{type:"button",class:Object(a["normalizeClass"])(["btn operate-btn d-center fs-small",{disableInput:c.disabledStatus}]),disabled:c.disabledStatus,onClick:t=>s.delSelectedItem(l.selectedProduct[l.promotionType],e.id)},[No,Object(a["createTextVNode"])(" 刪除 ")],10,Eo)])])]))),128))])])]),Object(a["createElementVNode"])("div",fo,[Object(a["createElementVNode"])("div",go,[Vo,Object(a["createElementVNode"])("div",ko,[Object(a["createElementVNode"])("div",vo,[Object(a["createElementVNode"])("div",Ao,[_o,Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",class:"form-control border-0",placeholder:"搜尋區域或門市","onUpdate:modelValue":t[9]||(t[9]=e=>l.appliedStoreByGroupKeyWord=e)},null,512),[[a["vModelText"],l.appliedStoreByGroupKeyWord]])]),Object(a["createElementVNode"])("div",So,[0===Object.keys(l.appliedStoreByGroup).length?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Co,wo)):Object(a["createCommentVNode"])("",!0),(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(s.filterAppliedStoreByGroup,e=>(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:e.name},[Object(a["createElementVNode"])("div",To,[Object(a["createElementVNode"])("input",{class:"form-check-input",type:"checkbox",id:e.name,checked:"",onClick:t=>s.setApplyArea(t,e.name),disabled:c.disabledStatus},null,8,Bo),Object(a["createElementVNode"])("label",{class:"form-check-label",for:e.name},Object(a["toDisplayString"])(e.name),9,xo)]),(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.stores,(t,o)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:"store",key:o},[Object(a["createElementVNode"])("div",Io,[Object(a["createElementVNode"])("input",{class:"form-check-input",type:"checkbox",name:"applyStore",id:t.short_name,onClick:c=>s.setApplyStore(c,e.name,t),checked:"",disabled:c.disabledStatus},null,8,Ro),Object(a["createElementVNode"])("label",{class:"form-check-label",for:t.short_name},Object(a["toDisplayString"])(t.short_name),9,Po)])]))),128))],64))),128))])]),Object(a["createElementVNode"])("div",Mo,[Object(a["createElementVNode"])("div",Lo,[Object(a["createElementVNode"])("div",Uo,[Go,Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",class:"form-control border-0",placeholder:"搜尋區域或門市","onUpdate:modelValue":t[10]||(t[10]=e=>l.storeByGroupKeyWord=e)},null,512),[[a["vModelText"],l.storeByGroupKeyWord]])]),Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("input",{type:"radio",class:"btn-check",value:"ALL",name:"storeTypeRadio",id:"allStoreType",autocomplete:"off",onClick:t[11]||(t[11]=e=>s.getStoreData("ALL")),checked:"ALL"==l.storeType},null,8,Fo),Yo,Object(a["createElementVNode"])("input",{type:"radio",class:"btn-check",value:"VOLUNTARY_CHAIN",name:"storeTypeRadio",id:"voluntaryStoreType",autocomplete:"off",onClick:t[12]||(t[12]=e=>s.getStoreData("VOLUNTARY_CHAIN")),checked:"VOLUNTARY_CHAIN"==l.storeType},null,8,Ko),Ho,Object(a["createElementVNode"])("input",{type:"radio",class:"btn-check",value:"FRANCHISE_CHAIN",name:"storeTypeRadio",id:"franchiseStoreType",autocomplete:"off",onClick:t[13]||(t[13]=e=>s.getStoreData("FRANCHISE_CHAIN")),checked:"FRANCHISE_CHAIN"==l.storeType},null,8,Wo),$o])]),Object(a["createElementVNode"])("div",Qo,[Object(a["createElementVNode"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"selectAllStore",onClick:t[14]||(t[14]=e=>s.selectAll(e,"store")),disabled:c.disabledStatus},null,8,zo),Xo]),Object(a["createElementVNode"])("div",Jo,[Object(a["createElementVNode"])("div",Zo,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(s.filterStoresByGroup,e=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:"accordion-item border rounded mb-2",key:e.name},[Object(a["createElementVNode"])("h2",qo,[Object(a["createElementVNode"])("div",el,[Object(a["createElementVNode"])("div",tl,[Object(a["createElementVNode"])("input",{class:"form-check-input mt-0 me-2",type:"checkbox",onClick:t=>s.setApplyArea(t,e.name),id:`${e.name}${e.id}`,checked:s.checkAreaStatus(e.name),disabled:c.disabledStatus},null,8,cl),Object(a["createElementVNode"])("label",{class:"form-check-label text-nowrap",for:`${e.name}${e.id}`},Object(a["toDisplayString"])(e.name),9,al)]),Object(a["createElementVNode"])("button",{class:"accordion-button bg-white shadow-none py-2",type:"button","data-bs-toggle":"collapse","data-bs-target":"#accordion"+e.name,"aria-expanded":"true","aria-controls":"accordion"+e.name},null,8,ol)])]),Object(a["createElementVNode"])("div",{id:"accordion"+e.name,class:"accordion-collapse collapse show","aria-labelledby":"panelsStayOpen-headingOne"},[Object(a["createElementVNode"])("div",sl,[Object(a["createElementVNode"])("div",nl,[Object(a["createElementVNode"])("div",il,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.stores,(t,o)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:"col",key:t.id},[Object(a["createElementVNode"])("div",dl,[Object(a["createElementVNode"])("input",{class:"form-check-input",type:"checkbox","data-test":"store",disabled:c.disabledStatus,name:e.name,id:t.id,onClick:c=>s.setApplyStore(c,e.name,t),checked:s.checkItem(l.appliedStoreByGroup[e.name],t.id)},null,8,rl),Object(a["createElementVNode"])("label",{class:"form-check-label fs-small fw-normal",for:t.id},Object(a["toDisplayString"])(t.short_name),9,ml)])]))),128))])])])],8,ll)]))),128))])])])])])]),Object(a["createElementVNode"])("div",pl,[Object(a["createElementVNode"])("div",bl,[ul,Object(a["createElementVNode"])("div",Ol,[Object(a["createElementVNode"])("div",hl,[0===l.appliedMember.length?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",yl,El)):Object(a["createCommentVNode"])("",!0),(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(l.appliedMember,e=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:"form-check my-2",key:e.id},[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"form-check-input",type:"checkbox",checked:"",id:e.id,value:e,"onUpdate:modelValue":t[15]||(t[15]=e=>l.appliedMember=e),disabled:c.disabledStatus},null,8,Nl),[[a["vModelCheckbox"],l.appliedMember]]),Object(a["createElementVNode"])("label",{class:"form-check-label",for:e.id},Object(a["toDisplayString"])(e.name),9,fl)]))),128))]),Object(a["createElementVNode"])("div",gl,[Object(a["createElementVNode"])("div",Vl,[Object(a["createElementVNode"])("div",kl,[vl,Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",class:"form-control border-0",placeholder:"搜尋會員群組","onUpdate:modelValue":t[16]||(t[16]=e=>l.memberKeyWord=e)},null,512),[[a["vModelText"],l.memberKeyWord]])])]),Object(a["createElementVNode"])("div",Al,[Object(a["createElementVNode"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"memberSelectAll",onClick:t[17]||(t[17]=e=>s.selectAll(e,"member")),disabled:c.disabledStatus,checked:l.appliedMember.length===e.memberGroups.length&&0!==e.memberGroups.length},null,8,_l),Sl]),Object(a["createElementVNode"])("div",Cl,[Object(a["createElementVNode"])("div",Dl,[Object(a["createElementVNode"])("div",wl,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(s.filterAppliedMember,e=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:"col",key:e.id},[Object(a["createElementVNode"])("div",Tl,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"form-check-input",type:"checkbox",value:e,id:e.id,disabled:c.disabledStatus,"onUpdate:modelValue":t[18]||(t[18]=e=>l.appliedMember=e)},null,8,Bl),[[a["vModelCheckbox"],l.appliedMember]]),Object(a["createElementVNode"])("label",{class:"form-check-label fs-small fw-normal",for:e.id},Object(a["toDisplayString"])(e.name),9,xl)])]))),128))])])])])])])])])]),Object(a["createVNode"])(n,{excludeData:l.excludeData,onSaveExcludedData:s.setExcludedData},null,8,["excludeData","onSaveExcludedData"])],64)}var Rl=c("d0db");const Pl=e=>(Object(a["pushScopeId"])("data-v-7751d14a"),e=e(),Object(a["popScopeId"])(),e),Ml={class:"modal fade",id:"excludeProduct","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"excludeProductLabel","aria-hidden":"true","data-bs-focus":"false","data-bs-backdrop":"static"},Ll={class:"modal-dialog modal-dialog-centered modal-lg modal-dialog-scrollable modal-fullscreen-xl-down"},Ul={class:"modal-content"},Gl={class:"modal-body p-0"},Fl={class:"container-fluid"},Yl=Object(a["createStaticVNode"])('<div class="row" data-v-7751d14a><div class="col-3 bg-light-gray-white border-bottom border-end" data-v-7751d14a><p class="py-2 my-1 ms-2" data-v-7751d14a>已排除的商品</p></div><div class="col bg-light-gray-white border-bottom" data-v-7751d14a><p class="py-2 my-1 ms-2" data-v-7751d14a>排除商品</p></div></div>',1),Kl={class:"row",style:{"min-height":"500px"}},Hl={class:"col-3 border-end pe-0"},Wl={class:"list exclude-product"},$l=["id","value"],Ql=["for"],zl={class:"col d-column justify-content-between"},Xl={class:"container-fluid p-0"},Jl={class:"d-flex ms-1"},Zl={class:"border px-3 my-2 rounded-5 d-center"},ql=Pl(()=>Object(a["createElementVNode"])("span",{class:"mdi mdi-magnify search-widget-icon fs-base"},null,-1)),es={class:"d-center list"},ts={class:"row row-cols-3 w-80 product"},cs={class:"form-check mb-3"},as=["onClick","checked","id"],os=["for"],ls={class:"d-flex justify-content-center pb-3"},ss=Pl(()=>Object(a["createElementVNode"])("button",{type:"button","data-bs-dismiss":"modal",class:"btn btn-outline-primary cancel-btn me-3"}," 取消 ",-1));function ns(e,t,c,o,l,s){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Ml,[Object(a["createElementVNode"])("div",Ll,[Object(a["createElementVNode"])("div",Ul,[Object(a["createElementVNode"])("div",Gl,[Object(a["createElementVNode"])("div",Fl,[Yl,Object(a["createElementVNode"])("div",Kl,[Object(a["createElementVNode"])("div",Hl,[Object(a["createElementVNode"])("div",Wl,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(l.excluded,e=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:"form-check my-2",key:e.id},[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"form-check-input",type:"checkbox",id:e.id,value:e,"onUpdate:modelValue":t[0]||(t[0]=e=>l.excluded=e),checked:""},null,8,$l),[[a["vModelCheckbox"],l.excluded]]),Object(a["createElementVNode"])("label",{class:"form-check-label",for:e.id},Object(a["toDisplayString"])(e.id)+" "+Object(a["toDisplayString"])(e.name),9,Ql)]))),128))])]),Object(a["createElementVNode"])("div",zl,[Object(a["createElementVNode"])("div",Xl,[Object(a["createElementVNode"])("div",Jl,[Object(a["createElementVNode"])("div",Zl,[ql,Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",class:"form-control border-0",placeholder:"搜尋商品","onUpdate:modelValue":t[1]||(t[1]=e=>l.productKeyWord=e)},null,512),[[a["vModelText"],l.productKeyWord]])])]),Object(a["createElementVNode"])("div",es,[Object(a["createElementVNode"])("div",ts,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(s.filterProduct,e=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:"col",key:e.id},[Object(a["createElementVNode"])("div",cs,[Object(a["createElementVNode"])("input",{class:"form-check-input",type:"checkbox",onClick:t=>s.setExcludedData(t,e),checked:s.checkedItem(e.id),id:e.id},null,8,as),Object(a["createElementVNode"])("label",{class:"form-check-label fs-small fw-normal",for:e.id},Object(a["toDisplayString"])(e.id)+" "+Object(a["toDisplayString"])(e.name),9,os)])]))),128))])])]),Object(a["createElementVNode"])("div",ls,[ss,Object(a["createElementVNode"])("button",{type:"button",class:"btn btn-primary confirm-btn",onClick:t[2]||(t[2]=e=>s.saveData())}," 儲存 ")])])])])])])])])}var is=c("55cb"),ds={data(){return{modal:{},excluded:[],productKeyWord:""}},props:{excludeData:{type:Object}},emits:["saveExcludedData"],computed:{...Object(d["c"])([]),filterProduct(){return 0===this.excludeData.product.length?[]:this.excludeData.product.filter(e=>e.name.match(this.productKeyWord)||e.id.match(this.productKeyWord))}},watch:{excludeData:{deep:!0,immediate:!0,handler(e){this.excluded=[...e.excluded]}}},methods:{setExcludedData(e,t){const c=e.target.checked;if(c)this.excluded.push(t);else{const e=this.excluded.findIndex(e=>e.id===t.id);this.excluded.splice(e,1)}},checkedItem(e){return this.excluded.find(t=>t.id===e)},saveData(){this.$emit("saveExcludedData",this.excluded),this.modal.hide()}},mounted(){this.modal=Object(is["b"])("excludeProduct")}};c("ad66");const rs=oe()(ds,[["render",ns],["__scopeId","data-v-7751d14a"]]);var ms=rs;const ps=e=>new Promise((t,c)=>{Ue["a"].get("/v1/product/category",e).then(e=>{t(e)}).catch(e=>{c(e)})}),bs=e=>new Promise((t,c)=>{Ue["a"].get("/v1/product/category_items",e).then(e=>{t(e)}).catch(e=>{c(e)})}),us=e=>new Promise((t,c)=>{Ue["a"].get("/v1/product",e).then(e=>{t(e)}).catch(e=>{c(e)})});var Os={data(){return{truncateString:Rl["a"],promotionType:"product",category:"",categoryKeyWord:"",categoryItemKeyWord:"",storeType:"ALL",selectedProduct:{product:[],medium:[],main:[],small:[]},selectedKeyWord:"",storeByGroupKeyWord:"",appliedStoreByGroup:{},appliedStoreByGroupKeyWord:"",memberKeyWord:"",appliedMember:[],categoryProductMap:{},selectedExcludeId:"",excludeData:{excluded:[],product:[]}}},components:{ExcludeProducts:ms},props:{editData:{type:Object,default:null},disabledStatus:{type:Boolean,default:!1}},inject:["searchData","setType"],computed:{...Object(d["c"])(["categoriesWithProducts","getStoresByGroup","memberGroups","productCategoryGroups","productMediumCategory","productCategoryItems"]),filterCategory(){return this.categoriesWithProducts.filter(e=>(this.categoriesWithProducts.forEach(e=>{this.categoryProductMap[e.category_id]=e.products.map(e=>({id:e.product_id,name:e.product_name}))}),e.category_name.match(this.categoryKeyWord)))},filterCategoryItem(){const e={product:"categoryProductMap",medium:"productMediumCategory",main:"productCategoryGroups",small:"productCategoryItems"},t=e[this.promotionType],c="product"!==this.promotionType?this[t]:this[t][this.category.category_id];return c?c.filter(e=>e.name.match(this.categoryItemKeyWord)):[]},filterSelectedProduct(){return this.selectedProduct[this.promotionType].filter(e=>e.name.match(this.selectedKeyWord)).reverse()},filterStoresByGroup(){return this.getStoresByGroup.length>0?this.getStoresByGroup.filter(e=>(e.name.match(this.storeByGroupKeyWord)||e.stores.some(e=>e.short_name.match(this.storeByGroupKeyWord)))&&e.stores.length>0):[]},filterAppliedStoreByGroup(){const e=Object.keys(this.appliedStoreByGroup).map(e=>({name:e,stores:[...this.appliedStoreByGroup[e]]}));return e.filter(e=>e.name.match(this.appliedStoreByGroupKeyWord)||e.stores.some(e=>e.short_name.match(this.appliedStoreByGroupKeyWord)))},filterAppliedMember(){return this.memberGroups.filter(e=>e.name.match(this.memberKeyWord))},promotionTypeName(){const e={product:"商品",medium:"類別",main:"大類",small:"小類"};return e[this.promotionType]}},watch:{editData:{deep:!0,immediate:!0,handler(e){if(e&&("edit"===this.setType||"view"===this.setType)){const{vip_groups:t,items:c,stores:a}=e,o={PRODUCT:"product",CATEGORY:"medium",CATEGORY_GROUP:"main",CATEGORY_ITEM:"small"};c.forEach(e=>{this.selectedProduct[o[e.type]].push(e)});const l={};this.getStoresByGroup.forEach(e=>{e.stores.forEach(t=>{l[t.id]=e.name})}),a.forEach(e=>{this.appliedStoreByGroup[l[e.id]]||(this.appliedStoreByGroup[l[e.id]]=[]),this.appliedStoreByGroup[l[e.id]].push(e)}),this.appliedMember=[...t],this.checkSelectAllStatus()}}}},methods:{checkDiscountValue(e){const t=e.target.value;t>100?(e.target.value=100,Object(He["e"])("輸入錯誤!","折扣數不可大於100")):t<1&&(e.target.value=1,Object(He["e"])("輸入錯誤!","折扣數不可小於1"))},setSelectedItem(e,t){const c=e.target.checked,a=this.selectedProduct[this.promotionType],o={product:"PRODUCT",medium:"CATEGORY",main:"CATEGORY_GROUP",small:"CATEGORY_ITEM"};c?a.push({type:o[this.promotionType],id:t.id,..."product"===this.promotionType&&{category:this.category.category_name},name:t.name,promotion_type:"DISCOUNT",promotion_discount_rate:100,promotion_discount_price:0,vip_promotion_discount_rate:100,vip_promotion_discount_price:0,extend_content:[]}):this.delSelectedItem(a,t.id)},async setExcludeData(e){this.excludeData.product=[],this.excludeData.excluded=[];const{companyId:t}=this.searchData,c={company_id:t,..."main"===this.promotionType&&{category_group_ids:JSON.stringify([e.id]),enable_status:"ALL",type:"ALL"},..."medium"===this.promotionType&&{category_ids:JSON.stringify([e.id])}},a={medium:bs(c),main:ps(c),small:us(c)};this.$store.dispatch("setLoading");try{const e=await a[this.promotionType];if(console.log(e),200===e.status){const t="main"===this.promotionType?"category":"medium"===this.promotionType?"category_items":"products";this.excludeData.product=[...e.data[t]]}else this.excludeData.product=[]}catch(o){console.log(o),this.excludeData.product=[]}this.$store.dispatch("hideLoading"),this.selectedExcludeId=e.id,this.excludeData.excluded=[...e.extend_content]},setExcludedData(e){const t={main:"CATEGORY",medium:"CATEGORY_ITEM",small:"PRODUCT"};this.selectedProduct[this.promotionType].find(e=>e.id===this.selectedExcludeId).extend_content=e.map(e=>({id:e.id,type:t[this.promotionType]}))},delSelectedItem(e,t){const c=e.findIndex(e=>e.id===t);-1!==c&&e.splice(c,1)},selectAll(e,t){const c=e.target.checked;if("member"===t)this.appliedMember=c?[...this.memberGroups]:[];else{const e=this.getStoresByGroup.filter(e=>e.stores.length>0);if(c)e.forEach(e=>{if(this.appliedStoreByGroup[e.name]){const t=new Set(this.appliedStoreByGroup[e.name].map(e=>e.id));e.stores.forEach(c=>{t.has(c.id)||this.appliedStoreByGroup[e.name].push(c)})}else this.appliedStoreByGroup[e.name]=[...e.stores]});else{const t=e.flatMap(e=>e.stores.map(e=>e.id));for(const e in this.appliedStoreByGroup)this.appliedStoreByGroup[e]=this.appliedStoreByGroup[e].filter(e=>!t.includes(e.id)),0===this.appliedStoreByGroup[e].length&&delete this.appliedStoreByGroup[e]}}},setApplyArea(e,t){const c=e.target.checked;if(c){const e=this.getStoresByGroup.find(e=>e.name===t).stores;this.appliedStoreByGroup[t]?this.appliedStoreByGroup[t].push(...e):this.appliedStoreByGroup[t]=[...e]}else{const e=this.getStoresByGroup.find(e=>e.name===t).stores.map(e=>e.id);this.appliedStoreByGroup[t]=this.appliedStoreByGroup[t].filter(t=>!e.includes(t.id)),0===this.appliedStoreByGroup[t].length&&delete this.appliedStoreByGroup[t]}this.checkSelectAllStatus()},setApplyStore(e,t,c){const a=e.target.checked;if(a)this.appliedStoreByGroup[t]||(this.appliedStoreByGroup[t]=[]),this.appliedStoreByGroup[t].push(c);else{const e=this.appliedStoreByGroup[t].find(e=>e.id===c.id),a=this.appliedStoreByGroup[t].indexOf(e);this.appliedStoreByGroup[t].splice(a,1),0===this.appliedStoreByGroup[t].length?delete this.appliedStoreByGroup[t]:this.$nextTick(()=>{const e=document.querySelectorAll("input[name='applyStore']:not(:checked)");e.forEach(e=>e.checked=!0)})}this.checkSelectAllStatus()},async getStoreData(e){if(this.storeType===e)return;const{companyId:t}=this.searchData;this.$store.dispatch("setLoading"),this.storeType=e,await this.$store.dispatch("getStoresByGroup",{company_id:t,store_type:e}),this.checkSelectAllStatus(),this.$store.dispatch("hideLoading")},checkAreaStatus(e){const t=this.getStoresByGroup.find(t=>t.name===e).stores;if(!this.appliedStoreByGroup[e])return!1;const c=t.some(t=>this.appliedStoreByGroup[e].some(e=>e.id===t.id));return this.appliedStoreByGroup[e]&&c},checkSelectAllStatus(){this.$nextTick(()=>{const e=document.querySelectorAll("input[data-test='store']:not(:checked)").length,t=document.getElementById("selectAllStore");t.checked=0===e&&this.getStoresByGroup.length>0})},checkItem(e,t){return!!e&&e.find(e=>e.id===t)}}};c("8313");const hs=oe()(Os,[["render",Il],["__scopeId","data-v-37a50328"]]);var ys=hs,js={data(){return{id:"",positionId:99,name:"",description:"",startDate:"",endDate:"",startTime:"",endTime:"",specialPeriod:"NONE",promotionType:"",allDay:!0,week:[],specificDate:"",sale_method:{is_all:!0,content:[]},web_platform:{is_all:!0,content:[]},editData:{}}},components:{Datepicker:ee["a"],SpecialPromotion:ys},emits:["back"],inject:["searchData","setType","editStatus"],computed:{...Object(d["c"])(["companyConfig","storePlatforms","saleMethod","promotionDetails"]),disabledStatus(){return"edit"===this.setType&&"ACTIVE"===this.editStatus||"view"===this.setType},createType(){return this.companyConfig&&this.companyConfig.promotion_config?this.companyConfig.promotion_config.promotion_id_create_type:null}},watch:{storePlatforms:{deep:!0,immediate:!0,handler(e){this.web_platform.content=e.map(e=>({id:e.id,name:e.name}))}},saleMethod:{deep:!0,immediate:!0,handler(e){this.sale_method.content=e.map(e=>({id:e.sale_method_id,name:e.sale_method_name}))}},setType:{deep:!0,immediate:!0,handler(e){("edit"===e||"view"===e)&&Object.keys(this.promotionDetails).length>0&&this.setEditData()}}},methods:{openPicker(e){const t=e.target.parentElement.parentElement,c=t.querySelector(".v3dp__popout-time");c.style.cssText.includes("display: none;")&&c.style.removeProperty("display")},timeLimit(){const e=this.$refs.setPromotionTime.querySelectorAll(".v3dp__popout-time");e.forEach(e=>{e.style.display="none"}),this.$nextTick(async()=>{this.startTime.getTime()>this.endTime.getTime()&&(await Object(He["e"])("無法填寫！","促銷活動結束時間不可早於促銷活動開始時間"),this.startTime=this.endTime)})},checkItem(e,t,c=!1){const a=e.target.checked;"platform"===t?c?this.web_platform.content=a?this.storePlatforms.map(e=>({id:e.id,name:e.name})):[]:setTimeout(()=>{this.web_platform.is_all=!!a&&this.web_platform.content.length===this.storePlatforms.length},0):c?this.sale_method.content=a?this.saleMethod.map(e=>({id:e.sale_method_id,name:e.sale_method_name})):[]:setTimeout(()=>{this.sale_method.is_all=!!a&&this.sale_method.content.length===this.saleMethod.length},0)},async saveData(){if(!this.name)return void Object(He["e"])("無法儲存！","促銷名稱未填寫");if("DAY_OF_WEEK"===this.specialPeriod&&0===this.week.length)return void Object(He["e"])("無法儲存！","星期限定未選擇");if("DAY_OF_MONTH"===this.specialPeriod&&!this.specificDate)return void Object(He["e"])("無法儲存！","每月特定日未填寫");if(0===this.sale_method.content.length)return void Object(He["e"])("無法儲存！","活動銷售方式未選擇");if(0===this.web_platform.content.length)return void Object(He["e"])("無法儲存！","適用平台未選擇");if(!this.promotionType)return void Object(He["e"])("無法儲存！","促銷活動類型未選擇");const{companyId:e}=this.searchData,t=e=>Object.keys(e).flatMap(t=>e[t].map(e=>({id:e.id,name:e.name}))),c=e=>Object.keys(e).flatMap(t=>e[t]),a={company_id:e,id:"MANUAL"===this.createType||"edit"===this.setType?this.id:"",store_id:"0",position_id:this.positionId,name:this.name,description:this.description,start_date:Object(te["g"])(this.startDate),end_date:Object(te["g"])(this.endDate),is_all_day:this.allDay,...!this.allDay&&{start_time:Object(te["c"])(this.startTime)},...!this.allDay&&{end_time:Object(te["c"])(this.endTime)},special_period:{type:this.specialPeriod,..."DAY_OF_WEEK"===this.specialPeriod&&{week:{is_monday:this.week.includes("is_monday"),is_tuesday:this.week.includes("is_tuesday"),is_wednesday:this.week.includes("is_wednesday"),is_thursday:this.week.includes("is_thursday"),is_friday:this.week.includes("is_friday"),is_saturday:this.week.includes("is_saturday"),is_sunday:this.week.includes("is_sunday")}},..."DAY_OF_MONTH"===this.specialPeriod&&{day:this.specificDate}},sale_method:{...this.sale_method},web_platform:{...this.web_platform},type:this.promotionType,..."SPECIAL_SALE"===this.promotionType&&{items:c(this.$refs.specialPromotion.selectedProduct),stores:t(this.$refs.specialPromotion.appliedStoreByGroup),vip_groups:[...this.$refs.specialPromotion.appliedMember]}};console.log(a);const o="edit"===this.setType?Fe:Ge;console.log(this.setType);try{this.$store.dispatch("setLoading");const e=await o(a);this.$store.dispatch("hideLoading"),204===e.status?(await Object(He["g"])("edit"===this.setType?"編輯成功":"新增成功"),this.$emit("back")):Object(He["e"])("無法儲存!",e.data.message)}catch(l){Object(He["e"])("無法儲存!","請聯絡客服人員"),console.log(l),this.$store.dispatch("hideLoading")}},setEditData(){console.log(this.promotionDetails);const{id:e,name:t,description:c,position_id:a,special_period:o,start_date:l,end_date:s,start_time:n,end_time:i,is_all_day:d,special_period:{type:r},type:m,sale_method:p,web_platform:b,stores:u,vip_groups:O,items:h}=this.promotionDetails;Object.assign(this,{id:e,name:t,description:c,positionId:a,allDay:d,startDate:Object(te["e"])(l),endDate:Object(te["e"])(s),startTime:Object(te["f"])(n),endTime:Object(te["f"])(i),specialPeriod:r,promotionType:m,sale_method:{...p},web_platform:{...b},editData:{stores:u,vip_groups:O,items:h}}),"DAY_OF_WEEK"===r?Object.keys(o.week).forEach(e=>{o.week[e]&&this.week.push(e)}):"DAY_OF_MONTH"===r&&(this.specificDate=o.day)}},created(){if("edit"===this.setType||"view"===this.setType)return;const e=new Date,t=e.getFullYear(),c=e.getMonth(),a=e.getDate();this.startDate=e,this.endDate=e,this.startTime=new Date(t,c,a,0,0,0),this.endTime=new Date(t,c,a,23,59,59)}};c("ac32");const Es=oe()(js,[["render",da],["__scopeId","data-v-e8bf8556"]]);var Ns=Es,fs={data(){return{title:"促銷管理",items:[{text:"促銷活動管理",href:""},{text:"促銷管理",active:!0}],selectData:{companyId:""},setType:"search",editStatus:""}},components:{Layout:n["a"],PageHeader:i["a"],BasicData:r["a"],BasicSearch:se,PromotionList:Qe,PromotionSetting:Ns},computed:{...Object(d["c"])(["targetRouteAuthority"])},provide(){return{searchData:Object(a["computed"])(()=>this.selectData),setType:Object(a["computed"])(()=>this.setType),editStatus:Object(a["computed"])(()=>this.editStatus)}},methods:{setCompanyId(e){this.selectData.companyId=e,this.$refs.basicSearch&&this.$refs.basicSearch.reset()},saveData(){this.$refs.promotionSetting.saveData()},setEditData(e){const{data:t,type:c}=e;this.setType=c,this.editStatus=t.status},async back(){this.setType="search";const{companyId:e}=this.selectData,t=new Date,c=t.getFullYear(),a=t.getMonth(),o=new Date(c,a,1),l=new Date(c,a+1,0),s={company_id:e,start_date:Object(te["g"])(o),end_date:Object(te["g"])(l),types:JSON.stringify(["ALL"]),status:"ACTIVE"};this.$store.commit("SET_PROMOTION_SEARCH_PARAMS",s),this.$store.dispatch("setLoading"),await this.$store.dispatch("getPromotions",s),this.$store.dispatch("hideLoading")}},mounted(){this.$store.dispatch("hideLoading")}};c("57de");const gs=oe()(fs,[["render",s],["__scopeId","data-v-6e3d8b82"]]);t["default"]=gs},d0db:function(e,t,c){"use strict";c.d(t,"a",(function(){return a}));const a=(e,t)=>e.length>t?e.substring(0,t)+"...":e},d1e3:function(e,t,c){},dd88:function(e,t,c){"use strict";c.d(t,"a",(function(){return o}));const a=e=>{const t=e.target.className.includes("ri-sort-desc");let c="desc";return t?(e.target.classList.remove("ri-sort-desc"),e.target.classList.add("ri-sort-asc"),c="asc"):(e.target.classList.remove("ri-sort-asc"),e.target.classList.add("ri-sort-desc"),c="desc"),c},o=(e,t)=>{const c=a(e),o=e.target.getAttribute("data-sort-period"),l=e.target.getAttribute("data-sort-category"),s=e.target.getAttribute("data-sort-item"),n=e.target.getAttribute("data-sort-member"),i=e.target.getAttribute("data-sort-store"),d=e.target.getAttribute("data-sort-member-id"),r=e.target.getAttribute("data-sort-member-name"),m=e.target.getAttribute("data-sort-company"),p=e.target.getAttribute("data-sort-area"),b=e.target.getAttribute("data-sortTarget");return o?"asc"===c?t.sort((e,t)=>e[o][s]<t[o][s]?1:-1):"desc"===c&&t.sort((e,t)=>e[o][s]>t[o][s]?1:-1):n?"asc"===c?t.sort((e,t)=>e[n][s]<t[n][s]?1:-1):"desc"===c&&t.sort((e,t)=>e[n][s]>t[n][s]?1:-1):l?"asc"===c?t.sort((e,t)=>e[l][s]<t[l][s]?1:-1):"desc"===c&&t.sort((e,t)=>e[l][s]>t[l][s]?1:-1):i?"asc"===c?t.sort((e,t)=>e[i][s]<t[i][s]?1:-1):"desc"===c&&t.sort((e,t)=>e[i][s]>t[i][s]?1:-1):d?"asc"===c?t.sort((e,t)=>e.member.id<t.member.id?1:-1):"desc"===c&&t.sort((e,t)=>e.member.id>t.member.id?1:-1):r?"asc"===c?t.sort((e,t)=>e.member.name<t.member.name?1:-1):"desc"===c&&t.sort((e,t)=>e.member.name>t.member.name?1:-1):m?"asc"===c?t.sort((e,t)=>e.company.id<t.company.id?1:-1):"desc"===c&&t.sort((e,t)=>e.company.id>t.company.id?1:-1):p?"asc"===c?t.sort((e,t)=>e.area.id<t.area.id?1:-1):"desc"===c&&t.sort((e,t)=>e.area.id>t.area.id?1:-1):"totalOrderPrice"==b?"asc"===c?t.sort((e,t)=>e.charges.total.amount<t.charges.total.amount?1:-1):"desc"===c&&t.sort((e,t)=>e.charges.total.amount>t.charges.total.amount?1:-1):"delivery"==b?"asc"===c?t.sort((e,t)=>e.delivery.id<t.delivery.id?1:-1):"desc"===c&&t.sort((e,t)=>e.delivery.id>t.delivery.id?1:-1):"acceptancePrice"==b?"asc"===c?t.sort((e,t)=>e.charges.acceptance.amount<t.charges.acceptance.amount?1:-1):"desc"===c&&t.sort((e,t)=>e.charges.acceptance.amount>t.charges.acceptance.amount?1:-1):"differencePrice"==b?"asc"===c?t.sort((e,t)=>e.charges.difference.amount<t.charges.difference.amount?1:-1):"desc"===c&&t.sort((e,t)=>e.charges.difference.amount>t.charges.difference.amount?1:-1):"supplierId"==b?"asc"===c?t.sort((e,t)=>e.supplier.id<t.supplier.id?1:-1):"desc"===c&&t.sort((e,t)=>e.supplier.id>t.supplier.id?1:-1):"asc"===c?t.sort((e,t)=>e[s]<t[s]?1:-1):"desc"===c&&t.sort((e,t)=>e[s]>t[s]?1:-1),t}},f76b:function(e,t,c){"use strict";c("935f")}}]);