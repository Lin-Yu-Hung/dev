(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c8babb0"],{"212c":function(e,t,a){"use strict";a.r(t);var o=a("7a23");const c={class:"card mb-3 pt-2 px-2"},l={class:"d-flex border-bottom mb-4"},s={class:"btn-group searchTypeBtns",role:"group","aria-label":"report type radio"},n=Object(o["createElementVNode"])("label",{class:"btn px-4 mb-0",for:"searchCompanyBtnRadio"},"公司別",-1),r=Object(o["createElementVNode"])("label",{class:"btn px-4 mb-0",for:"searchAreaBtnRadio"},"區域別",-1),d=Object(o["createElementVNode"])("label",{class:"btn px-4 mb-0",for:"searchStoreBtnRadio"},"門市別",-1),i={key:0,class:"card p-2"},m={class:"text-start mb-2"},p={key:0};function b(e,t,a,b,u,h){const O=Object(o["resolveComponent"])("PageHeader"),y=Object(o["resolveComponent"])("FilterFieldCompany"),j=Object(o["resolveComponent"])("FilterFieldArea"),E=Object(o["resolveComponent"])("FilterFieldStore"),g=Object(o["resolveComponent"])("TotalPointCompany"),N=Object(o["resolveComponent"])("TotalPointArea"),S=Object(o["resolveComponent"])("TotalPointStore"),V=Object(o["resolveComponent"])("Layout");return Object(o["openBlock"])(),Object(o["createBlock"])(V,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(O,{title:u.title,items:u.items},null,8,["title","items"]),Object(o["createElementVNode"])("div",c,[Object(o["createElementVNode"])("div",l,[Object(o["createElementVNode"])("div",s,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"radio","onUpdate:modelValue":t[0]||(t[0]=e=>u.searchType=e),class:"btn-check",onClick:t[1]||(t[1]=(...e)=>h.changeSearchType&&h.changeSearchType(...e)),value:"COMPANY",name:"searchTypeRadio",id:"searchCompanyBtnRadio",autocomplete:"off",checked:""},null,512),[[o["vModelRadio"],u.searchType]]),n,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"radio","onUpdate:modelValue":t[2]||(t[2]=e=>u.searchType=e),class:"btn-check",onClick:t[3]||(t[3]=(...e)=>h.changeSearchType&&h.changeSearchType(...e)),value:"AREA",name:"searchTypeRadio",id:"searchAreaBtnRadio",autocomplete:"off"},null,512),[[o["vModelRadio"],u.searchType]]),r,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"radio","onUpdate:modelValue":t[4]||(t[4]=e=>u.searchType=e),class:"btn-check",onClick:t[5]||(t[5]=(...e)=>h.changeSearchType&&h.changeSearchType(...e)),value:"STORE",name:"searchTypeRadio",id:"searchStoreBtnRadio",autocomplete:"off"},null,512),[[o["vModelRadio"],u.searchType]]),d])]),"COMPANY"==u.searchType?(Object(o["openBlock"])(),Object(o["createBlock"])(y,{key:0,onSearchTotalPoint:h.getTotalPoint},null,8,["onSearchTotalPoint"])):Object(o["createCommentVNode"])("",!0),"AREA"==u.searchType?(Object(o["openBlock"])(),Object(o["createBlock"])(j,{key:1,onSearchTotalPoint:h.getTotalPoint},null,8,["onSearchTotalPoint"])):Object(o["createCommentVNode"])("",!0),"STORE"==u.searchType?(Object(o["openBlock"])(),Object(o["createBlock"])(E,{key:2,onSearchTotalPoint:h.getTotalPoint},null,8,["onSearchTotalPoint"])):Object(o["createCommentVNode"])("",!0)]),e.total_pointsUsageRecords?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",i,[Object(o["createElementVNode"])("ul",m,[Object(o["createElementVNode"])("li",null,"企業別："+Object(o["toDisplayString"])(e.totalPointInfo.conglomerate),1),"COMPANY"!==u.searchType?(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",p," 公司別："+Object(o["toDisplayString"])(e.totalPointInfo.company),1)):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("li",null,"分析日期："+Object(o["toDisplayString"])(e.totalPointInfo.dateRange),1)]),"COMPANY"==u.searchType?(Object(o["openBlock"])(),Object(o["createBlock"])(g,{key:0})):Object(o["createCommentVNode"])("",!0),"AREA"==u.searchType?(Object(o["openBlock"])(),Object(o["createBlock"])(N,{key:1})):Object(o["createCommentVNode"])("",!0),"STORE"==u.searchType?(Object(o["openBlock"])(),Object(o["createBlock"])(S,{key:2})):Object(o["createCommentVNode"])("",!0)])):Object(o["createCommentVNode"])("",!0)]),_:1})}var u=a("6a34"),h=a("2579");const O={class:"table-responsive my-2"},y={class:"reportTable table table-hover table-bordered table-bordered",id:"pointTotal",ref:"table"},j={class:"bg-light"},E=Object(o["createElementVNode"])("tr",{class:"d-none"},[Object(o["createElementVNode"])("th",{colspan:"11"},"點數總表_公司別")],-1),g=Object(o["createElementVNode"])("tr",{class:"d-none"},[Object(o["createElementVNode"])("th",{colspan:"2"})],-1),N={scope:"col",rowspan:"2",class:"bg-light"},S={class:"tableTitle"},V=Object(o["createElementVNode"])("span",null,"公司別",-1),f={scope:"col",rowspan:"2"},k={class:"tableTitle"},C=Object(o["createElementVNode"])("span",null,"年 ",-1),_={scope:"col",rowspan:"2"},v={class:"tableTitle"},T=Object(o["createElementVNode"])("span",null," 月 ",-1),A=Object(o["createElementVNode"])("th",{scope:"col",colspan:"3",class:"text-center"},"發行點數",-1),D=Object(o["createElementVNode"])("th",{scope:"col",colspan:"3",class:"text-center"},"兌換點數",-1),x={scope:"col",rowspan:"2"},w={class:"tableTitle"},L=Object(o["createElementVNode"])("span",null,"剩餘點數",-1),P={scope:"col",rowspan:"2"},I={class:"tableTitle"},R=Object(o["createElementVNode"])("span",null," 累計點數 ",-1),Y={scope:"col"},B={class:"tableTitle"},U=Object(o["createElementVNode"])("span",null," 銷售贈點 ",-1),G={scope:"col"},$={class:"tableTitle"},M=Object(o["createElementVNode"])("span",null," 活動贈點 ",-1),F={scope:"col"},q={class:"tableTitle"},K=Object(o["createElementVNode"])("span",null," 合計 ",-1),W={scope:"col"},H={class:"tableTitle"},z=Object(o["createElementVNode"])("span",null," 兌換商品 ",-1),J={scope:"col"},Q={class:"tableTitle"},X=Object(o["createElementVNode"])("span",null," 點數折現 ",-1),Z={scope:"col"},ee={class:"tableTitle"},te=Object(o["createElementVNode"])("span",null," 合計 ",-1),ae={key:0},oe=Object(o["createElementVNode"])("th",{scope:"row",class:"bg-white"},"總計",-1),ce=Object(o["createElementVNode"])("td",{class:"text-center"},"-",-1),le=Object(o["createElementVNode"])("td",{class:"text-center"},"-",-1),se={scope:"row",class:"bg-white"},ne={class:"text-start"},re={class:"text-start"};function de(e,t,a,c,l,s){const n=Object(o["resolveComponent"])("ExportToExcel");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[e.total_pointsUsageRecords.length>0?(Object(o["openBlock"])(),Object(o["createBlock"])(n,{key:0,fileName:e.totalPointInfo.conglomerate+"_點數總表_公司別",sheetName:e.totalPointInfo.conglomerate+"_點數總表_公司別",mergeArray:l.mergeArray,tableInfo:e.totalPointInfo},null,8,["fileName","sheetName","mergeArray","tableInfo"])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("div",O,[Object(o["createElementVNode"])("table",y,[Object(o["createElementVNode"])("thead",j,[E,g,Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("th",N,[Object(o["createElementVNode"])("div",S,[V,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc",onClick:t[0]||(t[0]=(...e)=>s.sortData&&s.sortData(...e)),"data-sort-company":"id"})])]),Object(o["createElementVNode"])("th",f,[Object(o["createElementVNode"])("div",k,[C,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc",onClick:t[1]||(t[1]=(...e)=>s.sortData&&s.sortData(...e)),"data-sort-item":"year"})])]),Object(o["createElementVNode"])("th",_,[Object(o["createElementVNode"])("div",v,[T,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc",onClick:t[2]||(t[2]=(...e)=>s.sortData&&s.sortData(...e)),"data-sort-item":"month"})])]),A,D,Object(o["createElementVNode"])("th",x,[Object(o["createElementVNode"])("div",w,[L,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc",onClick:t[3]||(t[3]=(...e)=>s.sortData&&s.sortData(...e)),"data-sort-item":"points_left"})])]),Object(o["createElementVNode"])("th",P,[Object(o["createElementVNode"])("div",I,[R,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc",onClick:t[4]||(t[4]=(...e)=>s.sortData&&s.sortData(...e)),"data-sort-item":"sum_of_points"})])])]),Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("th",Y,[Object(o["createElementVNode"])("div",B,[U,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc",onClick:t[5]||(t[5]=(...e)=>s.sortData&&s.sortData(...e)),"data-sort-item":"total_reward_points_earned"})])]),Object(o["createElementVNode"])("th",G,[Object(o["createElementVNode"])("div",$,[M,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc",onClick:t[6]||(t[6]=(...e)=>s.sortData&&s.sortData(...e)),"data-sort-item":"total_events_points_earned"})])]),Object(o["createElementVNode"])("th",F,[Object(o["createElementVNode"])("div",q,[K,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc",onClick:t[7]||(t[7]=(...e)=>s.sortData&&s.sortData(...e)),"data-sort-item":"total_send_points"})])]),Object(o["createElementVNode"])("th",W,[Object(o["createElementVNode"])("div",H,[z,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc",onClick:t[8]||(t[8]=(...e)=>s.sortData&&s.sortData(...e)),"data-sort-item":"total_redeem_items"})])]),Object(o["createElementVNode"])("th",J,[Object(o["createElementVNode"])("div",Q,[X,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc",onClick:t[9]||(t[9]=(...e)=>s.sortData&&s.sortData(...e)),"data-sort-item":"total_redeem_amount"})])]),Object(o["createElementVNode"])("th",Z,[Object(o["createElementVNode"])("div",ee,[te,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc",onClick:t[10]||(t[10]=(...e)=>s.sortData&&s.sortData(...e)),"data-sort-item":"total_redeem_points"})])])])]),e.total_pointsUsageRecords.length>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("tbody",ae,[Object(o["createElementVNode"])("tr",null,[oe,ce,le,Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_sumOfPointsUsageRecords.total_reward_points_earned.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_sumOfPointsUsageRecords.total_events_points_earned.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_sumOfPointsUsageRecords.total_send_points.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_sumOfPointsUsageRecords.total_redeem_items.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_sumOfPointsUsageRecords.total_redeem_amount.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_sumOfPointsUsageRecords.total_redeem_points.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_sumOfPointsUsageRecords.points_left.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_sumOfPointsUsageRecords.sum_of_points.toLocaleString()),1)]),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(l.totalPointsUsageRecords,e=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:e},[Object(o["createElementVNode"])("th",se,Object(o["toDisplayString"])(e.company.name),1),Object(o["createElementVNode"])("td",ne,Object(o["toDisplayString"])(e.year),1),Object(o["createElementVNode"])("td",re,Object(o["toDisplayString"])(e.month),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_reward_points_earned.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_events_points_earned.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_send_points.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_redeem_items.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_redeem_amount.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_redeem_points.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.points_left.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.sum_of_points.toLocaleString()),1)]))),128))])):Object(o["createCommentVNode"])("",!0)],512)])],64)}var ie=a("dd88"),me=a("5502"),pe=a("45c2"),be={data(){return{totalPointsUsageRecords:"",test:"te\nst",mergeArray:["A4","B4","B2","C4","J4","K4","H3","I3","E3","F3","K1","B1","C1","D1","E1","F1","G1","H1","J1","I1"],shopData:[],totalData:{reward_points_earned:0,events_points_earned:0,send_points:0,redeem_items:0,redeem_amount:0,redeem_points:0,points_left:0,sum_of_points:0}}},components:{ExportToExcel:pe["a"]},watch:{total_pointsUsageRecords:{immediate:!0,deep:!0,handler(){""!==this.total_pointsUsageRecords&&(this.totalPointsUsageRecords=JSON.parse(JSON.stringify(this.total_pointsUsageRecords)))}}},computed:{...Object(me["c"])(["total_pointsUsageRecords","total_sumOfPointsUsageRecords","totalPointInfo"])},methods:{sortData(e){this.totalPointsUsageRecords=Object(ie["a"])(e,this.totalPointsUsageRecords)}}},ue=a("6b0d"),he=a.n(ue);const Oe=he()(be,[["render",de]]);var ye=Oe;const je={class:"table-responsive"},Ee={class:"reportTable table table-hover table-bordered table-bordered",id:"pointTotal",ref:"table"},ge={class:"bg-light"},Ne=Object(o["createElementVNode"])("tr",{class:"d-none"},[Object(o["createElementVNode"])("th",{colspan:"11"},"點數總表_區域別")],-1),Se=Object(o["createElementVNode"])("tr",{class:"d-none"},[Object(o["createElementVNode"])("th",{colspan:"2"})],-1),Ve={scope:"col",rowspan:"2",class:"bg-light"},fe={class:"tableTitle"},ke=Object(o["createElementVNode"])("span",null," 區域別 ",-1),Ce={scope:"col",rowspan:"2"},_e={class:"tableTitle"},ve=Object(o["createElementVNode"])("span",null," 年 ",-1),Te={scope:"col",rowspan:"2"},Ae={class:"tableTitle"},De=Object(o["createElementVNode"])("span",null," 月 ",-1),xe=Object(o["createElementVNode"])("th",{scope:"col",colspan:"3",class:"text-center"},"發行點數",-1),we=Object(o["createElementVNode"])("th",{scope:"col",colspan:"3",class:"text-center"},"兌換點數",-1),Le={scope:"col",rowspan:"2"},Pe={class:"tableTitle"},Ie=Object(o["createElementVNode"])("span",null," 剩餘點數 ",-1),Re={scope:"col",rowspan:"2"},Ye={class:"tableTitle"},Be=Object(o["createElementVNode"])("span",null," 累計點數 ",-1),Ue={scope:"col"},Ge={class:"tableTitle"},$e=Object(o["createElementVNode"])("span",null," 銷售贈點 ",-1),Me={scope:"col"},Fe={class:"tableTitle"},qe=Object(o["createElementVNode"])("span",null," 活動贈點 ",-1),Ke={scope:"col"},We={class:"tableTitle"},He=Object(o["createElementVNode"])("span",null," 合計 ",-1),ze={scope:"col"},Je={class:"tableTitle"},Qe=Object(o["createElementVNode"])("span",null," 兌換商品 ",-1),Xe={scope:"col"},Ze={class:"tableTitle"},et=Object(o["createElementVNode"])("span",null," 點數折現 ",-1),tt={scope:"col"},at={class:"tableTitle"},ot=Object(o["createElementVNode"])("span",null," 合計 ",-1),ct={key:0},lt=Object(o["createElementVNode"])("th",{scope:"row",class:"bg-white"},"總計",-1),st=Object(o["createElementVNode"])("td",{class:"text-center"},"-",-1),nt=Object(o["createElementVNode"])("td",{class:"text-center"},"-",-1),rt={scope:"row",class:"bg-white"},dt={class:"text-start"},it={class:"text-start"};function mt(e,t,a,c,l,s){const n=Object(o["resolveComponent"])("ExportToExcel");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[e.total_pointsUsageRecords.length>0?(Object(o["openBlock"])(),Object(o["createBlock"])(n,{key:0,fileName:e.totalPointInfo.company+"_點數總表_區域別",sheetName:e.totalPointInfo.company+"_點數總表_區域別",mergeArray:l.mergeArray,tableInfo:e.totalPointInfo},null,8,["fileName","sheetName","mergeArray","tableInfo"])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("div",je,[Object(o["createElementVNode"])("table",Ee,[Object(o["createElementVNode"])("thead",ge,[Ne,Se,Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("th",Ve,[Object(o["createElementVNode"])("div",fe,[ke,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc",onClick:t[0]||(t[0]=(...e)=>s.sortData&&s.sortData(...e)),"data-sort-area":"id"})])]),Object(o["createElementVNode"])("th",Ce,[Object(o["createElementVNode"])("div",_e,[ve,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc",onClick:t[1]||(t[1]=(...e)=>s.sortData&&s.sortData(...e)),"data-sort-item":"year"})])]),Object(o["createElementVNode"])("th",Te,[Object(o["createElementVNode"])("div",Ae,[De,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc",onClick:t[2]||(t[2]=(...e)=>s.sortData&&s.sortData(...e)),"data-sort-item":"month"})])]),xe,we,Object(o["createElementVNode"])("th",Le,[Object(o["createElementVNode"])("div",Pe,[Ie,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc",onClick:t[3]||(t[3]=(...e)=>s.sortData&&s.sortData(...e)),"data-sort-item":"points_left"})])]),Object(o["createElementVNode"])("th",Re,[Object(o["createElementVNode"])("div",Ye,[Be,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc",onClick:t[4]||(t[4]=(...e)=>s.sortData&&s.sortData(...e)),"data-sort-item":"sum_of_points"})])])]),Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("th",Ue,[Object(o["createElementVNode"])("div",Ge,[$e,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc",onClick:t[5]||(t[5]=(...e)=>s.sortData&&s.sortData(...e)),"data-sort-item":"total_reward_points_earned"})])]),Object(o["createElementVNode"])("th",Me,[Object(o["createElementVNode"])("div",Fe,[qe,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc",onClick:t[6]||(t[6]=(...e)=>s.sortData&&s.sortData(...e)),"data-sort-item":"total_events_points_earned"})])]),Object(o["createElementVNode"])("th",Ke,[Object(o["createElementVNode"])("div",We,[He,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc",onClick:t[7]||(t[7]=(...e)=>s.sortData&&s.sortData(...e)),"data-sort-item":"total_send_points"})])]),Object(o["createElementVNode"])("th",ze,[Object(o["createElementVNode"])("div",Je,[Qe,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc",onClick:t[8]||(t[8]=(...e)=>s.sortData&&s.sortData(...e)),"data-sort-item":"total_redeem_items"})])]),Object(o["createElementVNode"])("th",Xe,[Object(o["createElementVNode"])("div",Ze,[et,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc",onClick:t[9]||(t[9]=(...e)=>s.sortData&&s.sortData(...e)),"data-sort-item":"total_redeem_amount"})])]),Object(o["createElementVNode"])("th",tt,[Object(o["createElementVNode"])("div",at,[ot,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc",onClick:t[10]||(t[10]=(...e)=>s.sortData&&s.sortData(...e)),"data-sort-item":"total_redeem_points"})])])])]),e.total_pointsUsageRecords.length>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("tbody",ct,[Object(o["createElementVNode"])("tr",null,[lt,st,nt,Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_sumOfPointsUsageRecords.total_reward_points_earned.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_sumOfPointsUsageRecords.total_events_points_earned.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_sumOfPointsUsageRecords.total_send_points.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_sumOfPointsUsageRecords.total_redeem_items.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_sumOfPointsUsageRecords.total_redeem_amount.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_sumOfPointsUsageRecords.total_redeem_points.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_sumOfPointsUsageRecords.points_left.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_sumOfPointsUsageRecords.sum_of_points.toLocaleString()),1)]),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(l.totalPointsUsageRecords,e=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:e},[Object(o["createElementVNode"])("th",rt,Object(o["toDisplayString"])(e.area.name),1),Object(o["createElementVNode"])("td",dt,Object(o["toDisplayString"])(e.year),1),Object(o["createElementVNode"])("td",it,Object(o["toDisplayString"])(e.month),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_reward_points_earned.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_events_points_earned.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_send_points.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_redeem_items.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_redeem_amount.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_redeem_points.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.points_left.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.sum_of_points.toLocaleString()),1)]))),128))])):Object(o["createCommentVNode"])("",!0)],512)])],64)}var pt={data(){return{totalPointsUsageRecords:"",mergeArray:["B1","C1","D1","E1","F1","G1","H1","J1","I1","J1","K1","B2","A4","B4","C4","E3","F3","H3","I3","J4","K4"]}},components:{ExportToExcel:pe["a"]},watch:{total_pointsUsageRecords:{immediate:!0,deep:!0,handler(){""!==this.total_pointsUsageRecords&&(this.totalPointsUsageRecords=JSON.parse(JSON.stringify(this.total_pointsUsageRecords)))}}},computed:{...Object(me["c"])(["total_pointsUsageRecords","total_sumOfPointsUsageRecords","totalPointInfo"])},methods:{sortData(e){this.totalPointsUsageRecords=Object(ie["a"])(e,this.totalPointsUsageRecords)}}};const bt=he()(pt,[["render",mt]]);var ut=bt;const ht=e=>(Object(o["pushScopeId"])("data-v-5cdaf178"),e=e(),Object(o["popScopeId"])(),e),Ot={class:"table-responsive"},yt={class:"reportTable table table-hover table-bordered table-bordered fixedTable",id:"pointTotal",ref:"table"},jt={class:"bg-light"},Et=ht(()=>Object(o["createElementVNode"])("tr",{class:"d-none"},[Object(o["createElementVNode"])("th",{colspan:"12"},"點數總表_門市別")],-1)),gt=ht(()=>Object(o["createElementVNode"])("tr",{class:"d-none"},[Object(o["createElementVNode"])("th",{colspan:"2"})],-1)),Nt={scope:"col",rowspan:"2",class:"bg-light"},St={class:"tableTitle"},Vt=ht(()=>Object(o["createElementVNode"])("span",null," 區域別 ",-1)),ft={scope:"col",rowspan:"2",class:"bg-light"},kt={class:"tableTitle"},Ct=ht(()=>Object(o["createElementVNode"])("span",null," 門市別 ",-1)),_t={scope:"col",rowspan:"2"},vt={class:"tableTitle"},Tt=ht(()=>Object(o["createElementVNode"])("span",null," 年 ",-1)),At={scope:"col",rowspan:"2"},Dt={class:"tableTitle"},xt=ht(()=>Object(o["createElementVNode"])("span",null," 月 ",-1)),wt=ht(()=>Object(o["createElementVNode"])("th",{scope:"col",colspan:"3",class:"text-center"},"發行點數",-1)),Lt=ht(()=>Object(o["createElementVNode"])("th",{scope:"col",colspan:"3",class:"text-center"},"兌換點數",-1)),Pt={scope:"col",rowspan:"2"},It={class:"tableTitle"},Rt=ht(()=>Object(o["createElementVNode"])("span",null," 剩餘點數 ",-1)),Yt={scope:"col",rowspan:"2"},Bt={class:"tableTitle"},Ut=ht(()=>Object(o["createElementVNode"])("span",null," 累計點數 ",-1)),Gt={scope:"col"},$t={class:"tableTitle"},Mt=ht(()=>Object(o["createElementVNode"])("span",null," 銷售贈點 ",-1)),Ft={scope:"col"},qt={class:"tableTitle"},Kt=ht(()=>Object(o["createElementVNode"])("span",null," 活動贈點 ",-1)),Wt={scope:"col"},Ht={class:"tableTitle"},zt=ht(()=>Object(o["createElementVNode"])("span",null," 合計 ",-1)),Jt={scope:"col"},Qt={class:"tableTitle"},Xt=ht(()=>Object(o["createElementVNode"])("span",null," 兌換商品 ",-1)),Zt={scope:"col"},ea={class:"tableTitle"},ta=ht(()=>Object(o["createElementVNode"])("span",null," 點數折現 ",-1)),aa={scope:"col"},oa={class:"tableTitle"},ca=ht(()=>Object(o["createElementVNode"])("span",null," 合計 ",-1)),la={key:0},sa=ht(()=>Object(o["createElementVNode"])("th",{scope:"row",class:"bg-white"},"總計",-1)),na=ht(()=>Object(o["createElementVNode"])("th",{class:"text-center"},"-",-1)),ra=ht(()=>Object(o["createElementVNode"])("td",{class:"text-center"},"-",-1)),da=ht(()=>Object(o["createElementVNode"])("td",{class:"text-center"},"-",-1)),ia={scope:"row",class:"bg-white"},ma={class:"text-start"},pa={class:"text-start"},ba={class:"text-start"};function ua(e,t,a,c,l,s){const n=Object(o["resolveComponent"])("ExportToExcel");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[e.total_pointsUsageRecords.length>0?(Object(o["openBlock"])(),Object(o["createBlock"])(n,{key:0,fileName:e.totalPointInfo.company+"_點數總表_門市別",sheetName:e.totalPointInfo.company+"_點數總表_門市別",mergeArray:l.mergeArray,tableInfo:e.totalPointInfo},null,8,["fileName","sheetName","mergeArray","tableInfo"])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("div",Ot,[Object(o["createElementVNode"])("table",yt,[Object(o["createElementVNode"])("thead",jt,[Et,gt,Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("th",Nt,[Object(o["createElementVNode"])("div",St,[Vt,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc",onClick:t[0]||(t[0]=(...e)=>s.sortData&&s.sortData(...e)),"data-sort-area":"id"})])]),Object(o["createElementVNode"])("th",ft,[Object(o["createElementVNode"])("div",kt,[Ct,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc",onClick:t[1]||(t[1]=(...e)=>s.sortData&&s.sortData(...e)),"data-sort-store":"store","data-sort-item":"id"})])]),Object(o["createElementVNode"])("th",_t,[Object(o["createElementVNode"])("div",vt,[Tt,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc",onClick:t[2]||(t[2]=(...e)=>s.sortData&&s.sortData(...e)),"data-sort-item":"year"})])]),Object(o["createElementVNode"])("th",At,[Object(o["createElementVNode"])("div",Dt,[xt,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc",onClick:t[3]||(t[3]=(...e)=>s.sortData&&s.sortData(...e)),"data-sort-item":"month"})])]),wt,Lt,Object(o["createElementVNode"])("th",Pt,[Object(o["createElementVNode"])("div",It,[Rt,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc",onClick:t[4]||(t[4]=(...e)=>s.sortData&&s.sortData(...e)),"data-sort-item":"points_left"})])]),Object(o["createElementVNode"])("th",Yt,[Object(o["createElementVNode"])("div",Bt,[Ut,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc",onClick:t[5]||(t[5]=(...e)=>s.sortData&&s.sortData(...e)),"data-sort-item":"sum_of_points"})])])]),Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("th",Gt,[Object(o["createElementVNode"])("div",$t,[Mt,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc",onClick:t[6]||(t[6]=(...e)=>s.sortData&&s.sortData(...e)),"data-sort-item":"total_reward_points_earned"})])]),Object(o["createElementVNode"])("th",Ft,[Object(o["createElementVNode"])("div",qt,[Kt,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc",onClick:t[7]||(t[7]=(...e)=>s.sortData&&s.sortData(...e)),"data-sort-item":"total_events_points_earned"})])]),Object(o["createElementVNode"])("th",Wt,[Object(o["createElementVNode"])("div",Ht,[zt,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc",onClick:t[8]||(t[8]=(...e)=>s.sortData&&s.sortData(...e)),"data-sort-item":"total_send_points"})])]),Object(o["createElementVNode"])("th",Jt,[Object(o["createElementVNode"])("div",Qt,[Xt,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc",onClick:t[9]||(t[9]=(...e)=>s.sortData&&s.sortData(...e)),"data-sort-item":"total_redeem_items"})])]),Object(o["createElementVNode"])("th",Zt,[Object(o["createElementVNode"])("div",ea,[ta,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc",onClick:t[10]||(t[10]=(...e)=>s.sortData&&s.sortData(...e)),"data-sort-item":"total_redeem_amount"})])]),Object(o["createElementVNode"])("th",aa,[Object(o["createElementVNode"])("div",oa,[ca,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc",onClick:t[11]||(t[11]=(...e)=>s.sortData&&s.sortData(...e)),"data-sort-item":"total_redeem_points"})])])])]),e.total_pointsUsageRecords.length>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("tbody",la,[Object(o["createElementVNode"])("tr",null,[sa,na,ra,da,Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_sumOfPointsUsageRecords.total_reward_points_earned.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_sumOfPointsUsageRecords.total_events_points_earned.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_sumOfPointsUsageRecords.total_send_points.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_sumOfPointsUsageRecords.total_redeem_items.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_sumOfPointsUsageRecords.total_redeem_amount.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_sumOfPointsUsageRecords.total_redeem_points.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_sumOfPointsUsageRecords.points_left.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_sumOfPointsUsageRecords.sum_of_points.toLocaleString()),1)]),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(l.totalPointsUsageRecords,e=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:e},[Object(o["createElementVNode"])("th",ia,Object(o["toDisplayString"])(e.area.name),1),Object(o["createElementVNode"])("th",ma,Object(o["toDisplayString"])(e.store.name),1),Object(o["createElementVNode"])("td",pa,Object(o["toDisplayString"])(e.year),1),Object(o["createElementVNode"])("td",ba,Object(o["toDisplayString"])(e.month),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_reward_points_earned.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_events_points_earned.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_send_points.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_redeem_items.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_redeem_amount.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.total_redeem_points.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.points_left.toLocaleString()),1),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.sum_of_points.toLocaleString()),1)]))),128))])):Object(o["createCommentVNode"])("",!0)],512)])],64)}var ha={data(){return{totalPointsUsageRecords:"",mergeArray:["B1","C1","D1","E1","F1","G1","H1","J1","I1","K1","L1","B2","A4","B4","C4","D4","F3","G3","I3","J3","K4","L4"]}},components:{ExportToExcel:pe["a"]},watch:{total_pointsUsageRecords:{immediate:!0,deep:!0,handler(){""!==this.total_pointsUsageRecords&&(this.totalPointsUsageRecords=JSON.parse(JSON.stringify(this.total_pointsUsageRecords)))}}},computed:{...Object(me["c"])(["total_pointsUsageRecords","total_sumOfPointsUsageRecords","totalPointInfo"])},methods:{sortData(e){this.totalPointsUsageRecords=Object(ie["a"])(e,this.totalPointsUsageRecords)}}};a("2f3e");const Oa=he()(ha,[["render",ua],["__scopeId","data-v-5cdaf178"]]);var ya=Oa;const ja=e=>(Object(o["pushScopeId"])("data-v-b7ab72f4"),e=e(),Object(o["popScopeId"])(),e),Ea={class:"container py-3"},ga={class:"row ps-0 ps-md-3 ps-lg-0"},Na={class:"col-md-12"},Sa={class:"row mb-4 ps-0 ps-lg-4 ps-xl-0"},Va=ja(()=>Object(o["createElementVNode"])("label",{class:"col-xl-2 col-form-label required-input text-start text-xl-end"},[Object(o["createElementVNode"])("span",null,"*"),Object(o["createTextVNode"])("選擇公司:")],-1)),fa={class:"col-xl-10"},ka={class:"dropdown-company-menu dropdown-menu w-50"},Ca={class:"p-2 pt-1 searchlist-input"},_a={class:"limitDropDown list-unstyled dropdown-list p-2 mb-0"},va={key:0,class:"border-bottom ps-3 py-2 mb-2"},Ta={class:"form-check"},Aa=ja(()=>Object(o["createElementVNode"])("label",{class:"form-check-label",for:"selectAllCompany"},"全選",-1)),Da={class:"form-check"},xa=["value","id","checked"],wa=["for"],La={class:"col-6 col-xl-6"},Pa={class:"row mb-4"},Ia=ja(()=>Object(o["createElementVNode"])("label",{class:"col-lg-4 col-xl-4 col-form-label required-input text-start text-lg-end"},[Object(o["createElementVNode"])("span",null,"*"),Object(o["createTextVNode"])("交易日期:")],-1)),Ra={class:"column"},Ya={class:"col-xl-6"},Ba={class:"row mb-4"},Ua=ja(()=>Object(o["createElementVNode"])("label",{class:"col-lg-2 col-xl-4 col-form-label required-input text-start text-lg-end mb-1"},[Object(o["createElementVNode"])("span",null,"*"),Object(o["createTextVNode"])("門市類型:")],-1)),Ga={class:"col-lg-8"},$a={class:"d-flex"},Ma=["checked"],Fa=["checked"],qa=["checked"],Ka={class:"d-flex"},Wa={class:"d-end"},Ha=["disabled"];function za(e,t,a,c,l,s){const n=Object(o["resolveComponent"])("Datepicker");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ea,[Object(o["createElementVNode"])("div",ga,[Object(o["createElementVNode"])("div",Na,[Object(o["createElementVNode"])("div",Sa,[Va,Object(o["createElementVNode"])("div",fa,[Object(o["createElementVNode"])("input",{type:"text",class:Object(o["normalizeClass"])(["form-control rounded-end company-input",{"border-danger":!l.selectedCompany}]),readonly:"",id:"companyDropdown",placeholder:"請選擇公司別","data-bs-toggle":"dropdown","data-bs-auto-close":"outside","aria-expanded":"false",ref:"companyInput"},null,2),Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])(["invalid-feedback",{"d-none":l.selectedCompany,"d-block":!l.selectedCompany}])}," 此欄位為必填 ",2),Object(o["createElementVNode"])("div",ka,[Object(o["createElementVNode"])("div",Ca,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.companyKeyWord=e),class:"form-control form-control-sm border search-countryList",placeholder:"查詢公司關鍵字"},null,512),[[o["vModelText"],l.companyKeyWord]])]),Object(o["createElementVNode"])("ul",_a,["company"==l.searchType?(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",va,[Object(o["createElementVNode"])("div",Ta,[Object(o["createElementVNode"])("input",{class:"form-check-input",type:"checkbox",value:"all",id:"selectAllCompany",onClick:t[1]||(t[1]=(...e)=>s.toggleSelectAllCompany&&s.toggleSelectAllCompany(...e)),checked:""}),Aa])])):Object(o["createCommentVNode"])("",!0),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(s.filterCompanyList,e=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:e.id,class:"ps-3 py-2 mb-2"},[Object(o["createElementVNode"])("div",Da,[Object(o["createElementVNode"])("input",{class:"form-check-input",type:"checkbox",name:"selectCompanyCheckbox",value:e.id,id:"select"+e.name,onClick:t[2]||(t[2]=(...e)=>s.toggleCompanyCheckbox&&s.toggleCompanyCheckbox(...e)),checked:!l.notCheck.includes(e.id)},null,8,xa),Object(o["createElementVNode"])("label",{class:"form-check-label",for:"select"+e.name},Object(o["toDisplayString"])(e.name),9,wa)])]))),128))])])])])]),Object(o["createElementVNode"])("div",La,[Object(o["createElementVNode"])("div",Pa,[Ia,Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])(["col-lg-6 col-xl-8 d-sm-flex",{"align-items-center":l.defaultStartYear,"align-items-start":!l.defaultStartYear}])},[Object(o["createElementVNode"])("div",Ra,[Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])(["d-flex border border-1 rounded-2",{"border-danger":!l.defaultStartYear}])},[Object(o["createVNode"])(n,{class:"yearInput border-0 rounded-1 border-end px-2 py-1",modelValue:l.defaultStartYear,"onUpdate:modelValue":t[3]||(t[3]=e=>l.defaultStartYear=e),inputFormat:"yyyy-MM",startingView:"month",minimumView:"month",lowerLimit:s.minDate,upperLimit:l.selectedEndYear?l.selectedEndYear:l.defaultEndYear,placeholder:"請選擇日期"},null,8,["modelValue","lowerLimit","upperLimit"])],2),Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])(["invalid-feedback mt-2",{"d-none":l.defaultStartYear,"d-block":!l.defaultStartYear}])}," 此欄位為必填 ",2)]),Object(o["createElementVNode"])("span",{class:Object(o["normalizeClass"])(["mx-2",{"mt-0":l.defaultStartYear,"mt-2":!l.defaultStartYear}])},"至",2),Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])(["d-flex border border-1 rounded-2",{"border-danger":!l.selectedEndYear}])},[Object(o["createVNode"])(n,{class:"yearInput border-0 rounded-1 border-end px-2 py-1",modelValue:l.selectedEndYear,"onUpdate:modelValue":t[4]||(t[4]=e=>l.selectedEndYear=e),inputFormat:"yyyy-MM",startingView:"month",minimumView:"month",upperLimit:l.defaultEndYear,lowerLimit:l.defaultStartYear,placeholder:"請選擇日期"},null,8,["modelValue","upperLimit","lowerLimit"])],2)],2)])]),Object(o["createElementVNode"])("div",Ya,[Object(o["createElementVNode"])("div",Ba,[Ua,Object(o["createElementVNode"])("div",Ga,[Object(o["createElementVNode"])("div",$a,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"radio","onUpdate:modelValue":t[5]||(t[5]=e=>l.selectedParams.store_type=e),id:"allStoreType",class:"btn-check",onClick:t[6]||(t[6]=e=>this.storeType="ALL"),value:"ALL",name:"storeTypeRadio",autocomplete:"off",checked:"ALL"==this.selectedParams.store_type},null,8,Ma),[[o["vModelRadio"],l.selectedParams.store_type]]),Object(o["createElementVNode"])("label",{class:Object(o["normalizeClass"])(["btn btn-outline-secondary me-3",{"border-danger":""==l.selectedParams.store_type}]),for:"allStoreType"},"全部",2),Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"radio","onUpdate:modelValue":t[7]||(t[7]=e=>l.selectedParams.store_type=e),id:"voluntaryStoreType",class:"btn-check",onClick:t[8]||(t[8]=e=>this.storeType="VOLUNTARY_CHAIN"),value:"VOLUNTARY_CHAIN",name:"storeTypeRadio",autocomplete:"off",checked:"VOLUNTARY_CHAIN"==this.selectedParams.store_type},null,8,Fa),[[o["vModelRadio"],l.selectedParams.store_type]]),Object(o["createElementVNode"])("label",{class:Object(o["normalizeClass"])(["btn btn-outline-secondary me-3",{"border-danger":""==l.selectedParams.store_type}]),for:"voluntaryStoreType"},"直營店",2),Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"radio","onUpdate:modelValue":t[9]||(t[9]=e=>l.selectedParams.store_type=e),id:"franchiseStoreType",class:"btn-check",onClick:t[10]||(t[10]=e=>this.storeType="FRANCHISE_CHAIN"),value:"FRANCHISE_CHAIN",name:"storeTypeRadio",autocomplete:"off",checked:"FRANCHISE_CHAIN"==this.selectedParams.store_type},null,8,qa),[[o["vModelRadio"],l.selectedParams.store_type]]),Object(o["createElementVNode"])("label",{class:Object(o["normalizeClass"])(["btn btn-outline-secondary",{"border-danger":""==l.selectedParams.store_type}]),for:"franchiseStoreType"},"加盟店",2)]),Object(o["createElementVNode"])("div",Ka,[Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])(["invalid-feedback mt-0",{"d-none":""!==l.selectedParams.store_type,"d-block":""==l.selectedParams.store_type}])}," 此欄位為必填 ",2)])])])])]),Object(o["createElementVNode"])("div",Wa,[Object(o["createElementVNode"])("button",{class:"btn me-4 pb-0 text-decoration-underline",type:"button",onClick:t[11]||(t[11]=(...e)=>s.reset&&s.reset(...e))}," 清空搜尋條件 "),Object(o["createElementVNode"])("button",{class:"btn btn-primary text-white",type:"button",onClick:t[12]||(t[12]=(...e)=>s.goSearch&&s.goSearch(...e)),disabled:!l.defaultStartYear||!l.selectedEndYear||""==l.selectedParams.store_type||!l.selectedCompany}," 查詢 ",8,Ha)])])}a("14d9");var Ja=a("c535"),Qa=a("9dab"),Xa=a("b7eb"),Za=a("6512"),eo=a("55cb"),to=a("6286"),ao={data(){return{searchType:"company",defaultCompanyId:Object(Qa["b"])("company"),selectAllCompany:!0,companyKeyWord:"",companyDropdown:"",notCheck:[],selectedCompany:!0,storeType:"ALL",defaultStartYear:Object(Ja["d"])(new Date,730),defaultEndYear:new Date,selectedEndYear:new Date,selectedParams:{data:"",start_date:"",end_date:"",store_type:"ALL"}}},emits:["searchTotalPoint"],components:{Datepicker:Xa["a"]},watch:{companyKeyWord:{handler(){const e=document.getElementById("selectAllCompany");e&&setTimeout(()=>{this.selectAllCheckState()},0)}},selectedEndYear:{handler(e){e&&this.defaultStartYear&&(this.defaultStartYear=Object(Za["a"])(this.defaultStartYear,this.selectedEndYear))}}},computed:{...Object(me["c"])(["companyList"]),minDate(){return this.selectedEndYear?new Date(this.selectedEndYear.getFullYear()-2,this.selectedEndYear.getMonth(),this.selectedEndYear.getDate()):null},filterCompanyList(){if(Array.isArray(this.companyList)){const e=JSON.parse(JSON.stringify(this.companyList)),t=e.filter(e=>e.name.match(this.companyKeyWord));return t}return[]}},methods:{async getCompanyList(){const e=await Object(to["a"])();this.$store.commit("SET_COMPANY_LIST",e.data.companies),1==this.companyList.length?document.querySelector(".company-input").value="已選擇 "+this.companyList[0].name:setTimeout(()=>{this.setCompanyInput()},0)},toggleNotCheckbox(e,t){if("add"!=t||this.notCheck.includes(e)){if("del"==t){const t=this.notCheck.findIndex(t=>t===e);if(-1==t)return;this.notCheck.splice(t,1)}}else this.notCheck.push(e)},toggleSelectAllCompany(e){const t=e.target.checked,a=document.querySelectorAll('input[name="selectCompanyCheckbox"]');a.forEach(e=>{this.toggleNotCheckbox(e.value,t?"del":"add")})},setCompanyInput(){const e=document.querySelectorAll('input[name="selectCompanyCheckbox"]:checked').length;e==this.companyList.length?this.$refs.companyInput.value="已選擇 全部公司":this.$refs.companyInput.value=0==e?"":`已選 ${e} 間公司`},setSelectedCompany(){const e=document.querySelectorAll('input[name="selectCompanyCheckbox"]:checked');if(e.length>0){const t=[];e.forEach(e=>{const a={id:e.value};t.push(a)}),this.selectedParams.data={companies:t},this.selectedCompany=!0}else this.filterCompanyList.length===this.companyList.length&&0===e.length&&(this.selectedParams.data="",this.selectedCompany=!1)},toggleCompanyCheckbox(e){const t=e.target.checked;this.toggleNotCheckbox(e.target.value,t?"del":"add"),this.selectAllCheckState()},selectAllCheckState(){const e=document.getElementById("selectAllCompany");if(0==this.filterCompanyList.length)return e.checked=!1,void(e.disabled=!0);e.disabled=!1;const t=document.querySelectorAll("input[name='selectCompanyCheckbox']:not(:checked)");e.checked=0==t.length},removeCompanySelected(){const e=document.querySelectorAll('input[name="selectCompanyCheckbox"]:checked'),t=document.getElementById("selectAllCompany");t.checked=!1,e.forEach(e=>{this.toggleNotCheckbox(e.value,"add")})},removeStoreTypeRadio(){const e=document.querySelectorAll('input[name="storeTypeRadio"]');e.forEach(e=>e.checked=!1)},setDateRange(e){switch(e){case"today":this.dateRange.start=Object(Ja["g"])(new Date),this.dateRange.end=Object(Ja["g"])(new Date);break;case"yesterday":this.dateRange.start=Object(Ja["g"])(Object(Ja["d"])(new Date,1)),this.dateRange.end=Object(Ja["g"])(Object(Ja["d"])(new Date,1));break;case"week":this.dateRange.start=Object(Ja["g"])(Object(Ja["d"])(new Date,6)),this.dateRange.end=Object(Ja["g"])(new Date);break;case"month":this.dateRange.start=Object(Ja["g"])(Object(Ja["d"])(new Date,29)),this.dateRange.end=Object(Ja["g"])(new Date);break;default:break}this.tempDateRange=JSON.parse(JSON.stringify(this.dateRange))},reset(){this.companyDropdown.hide(),this.companyKeyWord="",this.sele,setTimeout(()=>{this.selectedCompany=!1,this.$refs.companyInput.value="",this.removeCompanySelected(),this.defaultStartYear=null,this.selectedEndYear=null,this.selectedParams.data="",this.selectedParams.store_type="",this.$store.commit("SET_TOTAL_POINT_POINTSUSAGE",""),this.$store.commit("SET_TOTAL_POINT_SUMPOINTSUSAGE","")},0)},setApiParams(){return new Promise(e=>{this.companyKeyWord="",setTimeout(()=>{const t=document.querySelectorAll("input[name='selectCompanyCheckbox']:checked");if(0===t.length)return this.selectedCompany=!1,void this.setCompanyInput();this.setSelectedCompany(),this.setCompanyInput(),e()},0)})},async goSearch(){await this.setApiParams(),this.selectedParams.start_date=`${new Date(this.defaultStartYear).getFullYear()}-${new Date(this.defaultStartYear).getMonth()+1}`,this.selectedParams.end_date=`${new Date(this.selectedEndYear).getFullYear()}-${new Date(this.selectedEndYear).getMonth()+1}`,console.log("selectedParams",this.selectedParams),this.$emit("search-total-point",this.selectedParams)}},mounted(){this.getCompanyList(),this.companyDropdown=Object(eo["a"])("companyDropdown");const e=document.querySelectorAll(".yearInput");e.forEach(e=>{e.style.maxWidth="130px",e.style.border="1px solid #ced4da",e.style.borderRight="none",e.style.borderRadius="6px 0 0 6px"}),this.$refs.companyInput.addEventListener("hide.bs.dropdown",()=>{this.setApiParams()})}};a("cc75");const oo=he()(ao,[["render",za],["__scopeId","data-v-b7ab72f4"]]);var co=oo;const lo=e=>(Object(o["pushScopeId"])("data-v-227c6e74"),e=e(),Object(o["popScopeId"])(),e),so={class:"container py-3"},no={class:"row ps-0 ps-md-3 ps-lg-0"},ro={class:"col-md-12"},io={class:"row mb-4 ps-0 ps-lg-4 ps-xl-0"},mo=lo(()=>Object(o["createElementVNode"])("label",{class:"col-xl-2 col-form-label required-input text-start text-xl-end"},[Object(o["createElementVNode"])("span",null,"*"),Object(o["createTextVNode"])("選擇公司/區域:")],-1)),po={class:"col-xl-10"},bo={class:"dropdown-company-menu dropdown-menu w-50"},uo={class:"row"},ho={class:"col-5 border-end"},Oo={class:"ps-2 py-2 searchlist-input"},yo={class:"limitDropDown list-unstyled dropdown-list p-2 mb-0"},jo=["value","id","onClick","checked"],Eo=["for"],go={class:"col-7 ps-1"},No={class:"pe-2 py-2 searchlist-input"},So=["disabled"],Vo={class:"limitDropDown d-column filterAccordion accordion list-unstyled dropdown-list"},fo={class:"w-100 border-bottom ps-3"},ko={class:"form-check py-2"},Co=["disabled"],_o=lo(()=>Object(o["createElementVNode"])("label",{class:"form-check-label",for:"selectAllArea"},"全選",-1)),vo={class:"form-check py-2 ms-3"},To=["name","value","id","checked"],Ao=["for"],Do={class:"col-6 col-xl-6"},xo={class:"row mb-4"},wo=lo(()=>Object(o["createElementVNode"])("label",{class:"col-lg-4 col-xl-4 col-form-label required-input text-start text-lg-end"},[Object(o["createElementVNode"])("span",null,"*"),Object(o["createTextVNode"])("交易日期:")],-1)),Lo={class:"column"},Po={class:"col-xl-6"},Io={class:"row mb-4"},Ro=lo(()=>Object(o["createElementVNode"])("label",{class:"col-lg-2 col-xl-4 col-form-label required-input text-start text-lg-end mb-1"},[Object(o["createElementVNode"])("span",null,"*"),Object(o["createTextVNode"])("門市類型:")],-1)),Yo={class:"col-lg-8"},Bo={class:"d-flex"},Uo=["checked"],Go=["checked"],$o=["checked"],Mo={class:"d-flex"},Fo={class:"d-end"},qo=["disabled"];function Ko(e,t,a,c,l,s){const n=Object(o["resolveComponent"])("Datepicker");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",so,[Object(o["createElementVNode"])("div",no,[Object(o["createElementVNode"])("div",ro,[Object(o["createElementVNode"])("div",io,[mo,Object(o["createElementVNode"])("div",po,[Object(o["createElementVNode"])("input",{type:"text",id:"areaDropdown",class:Object(o["normalizeClass"])(["form-control rounded-end company-input",{"border-danger":!l.areaIsSelected}]),readonly:"",placeholder:"請選擇公司(單選)及區域(複選)","data-bs-toggle":"dropdown","data-bs-auto-close":"outside","aria-expanded":"false",ref:"areaInput"},null,2),Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])(["invalid-feedback",{"d-none":l.areaIsSelected,"d-block":!l.areaIsSelected}])}," 此欄位為必填 ",2),Object(o["createElementVNode"])("div",bo,[Object(o["createElementVNode"])("div",uo,[Object(o["createElementVNode"])("div",ho,[Object(o["createElementVNode"])("div",Oo,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.companyKeyWord=e),class:"form-control form-control-sm border search-countryList",placeholder:"查詢公司關鍵字"},null,512),[[o["vModelText"],l.companyKeyWord]])]),Object(o["createElementVNode"])("ul",yo,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(s.filterCompanyList,e=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:e.id,class:"form-check mb-2"},[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{class:"form-check-input",name:"selectCompanyRadio",type:"radio",value:e.id,id:e.name,"onUpdate:modelValue":t[1]||(t[1]=e=>l.selectCompany=e),onClick:t=>(s.setStoreGroup(e),l.chooseStatus=!0),checked:l.selectCompany==e.id},null,8,jo),[[o["vModelRadio"],l.selectCompany]]),Object(o["createElementVNode"])("label",{class:"form-check-label",for:e.name},Object(o["toDisplayString"])(e.name),9,Eo)]))),128))])]),Object(o["createElementVNode"])("div",go,[Object(o["createElementVNode"])("div",No,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>l.storeGroupKeyWord=e),class:"form-control form-control-sm border search-countryList",placeholder:"搜尋區域或門市",disabled:!l.companyIsSelected},null,8,So),[[o["vModelText"],l.storeGroupKeyWord]])]),Object(o["createElementVNode"])("ul",Vo,[Object(o["createElementVNode"])("li",fo,[Object(o["createElementVNode"])("div",ko,[Object(o["createElementVNode"])("input",{class:"form-check-input",type:"checkbox",value:"all",id:"selectAllArea",onClick:t[3]||(t[3]=(...e)=>s.toggleSelectStoreGroup&&s.toggleSelectStoreGroup(...e)),checked:"",disabled:!l.companyIsSelected},null,8,Co),_o])]),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(s.filterStoresGroup,e=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:e.id},[Object(o["createElementVNode"])("div",vo,[Object(o["createElementVNode"])("input",{class:"form-check-input areaCheckbox",name:"area"+e.id,type:"checkbox",value:e.id,id:"select"+e.name,onClick:t[4]||(t[4]=(...e)=>s.toggleSelectedArea&&s.toggleSelectedArea(...e)),checked:!l.notSelect.includes(l.selectCompany+e.id)},null,8,To),Object(o["createElementVNode"])("label",{class:"form-check-label",for:"select"+e.name},Object(o["toDisplayString"])(e.name),9,Ao)])]))),128))])])])])])])]),Object(o["createElementVNode"])("div",Do,[Object(o["createElementVNode"])("div",xo,[wo,Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])(["col-lg-6 col-xl-8 d-sm-flex",{"align-items-center":l.defaultStartYear,"align-items-start":!l.defaultStartYear}])},[Object(o["createElementVNode"])("div",Lo,[Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])(["d-flex border border-1 rounded-2",{"border-danger":!l.defaultStartYear}])},[Object(o["createVNode"])(n,{class:"yearInput border-0 rounded-1 border-end px-2 py-1",modelValue:l.defaultStartYear,"onUpdate:modelValue":t[5]||(t[5]=e=>l.defaultStartYear=e),inputFormat:"yyyy-MM",startingView:"month",minimumView:"month",lowerLimit:s.minDate,upperLimit:l.selectedEndYear?l.selectedEndYear:l.defaultEndYear,placeholder:"請選擇日期"},null,8,["modelValue","lowerLimit","upperLimit"])],2),Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])(["invalid-feedback mt-2",{"d-none":l.defaultStartYear,"d-block":!l.defaultStartYear}])}," 此欄位為必填 ",2)]),Object(o["createElementVNode"])("span",{class:Object(o["normalizeClass"])(["mx-2",{"mt-0":l.defaultStartYear,"mt-2":!l.defaultStartYear}])},"至",2),Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])(["d-flex border border-1 rounded-2",{"border-danger":!l.selectedEndYear}])},[Object(o["createVNode"])(n,{class:"yearInput border-0 rounded-1 border-end px-2 py-1",modelValue:l.selectedEndYear,"onUpdate:modelValue":t[6]||(t[6]=e=>l.selectedEndYear=e),inputFormat:"yyyy-MM",startingView:"month",minimumView:"month",upperLimit:l.defaultEndYear,lowerLimit:l.defaultStartYear,placeholder:"請選擇日期"},null,8,["modelValue","upperLimit","lowerLimit"])],2)],2)])]),Object(o["createElementVNode"])("div",Po,[Object(o["createElementVNode"])("div",Io,[Ro,Object(o["createElementVNode"])("div",Yo,[Object(o["createElementVNode"])("div",Bo,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"radio","onUpdate:modelValue":t[7]||(t[7]=e=>l.selectedParams.store_type=e),id:"allStoreType",class:"btn-check",onClick:t[8]||(t[8]=e=>this.storeType="ALL"),value:"ALL",name:"storeTypeRadio",autocomplete:"off",checked:"ALL"==l.selectedParams.store_type},null,8,Uo),[[o["vModelRadio"],l.selectedParams.store_type]]),Object(o["createElementVNode"])("label",{class:Object(o["normalizeClass"])(["btn btn-outline-secondary me-3",{"border-danger":""==l.selectedParams.store_type}]),for:"allStoreType"},"全部",2),Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"radio","onUpdate:modelValue":t[9]||(t[9]=e=>l.selectedParams.store_type=e),id:"voluntaryStoreType",class:"btn-check",onClick:t[10]||(t[10]=e=>this.storeType="VOLUNTARY_CHAIN"),value:"VOLUNTARY_CHAIN",name:"storeTypeRadio",autocomplete:"off",checked:"VOLUNTARY_CHAIN"==l.selectedParams.store_type},null,8,Go),[[o["vModelRadio"],l.selectedParams.store_type]]),Object(o["createElementVNode"])("label",{class:Object(o["normalizeClass"])(["btn btn-outline-secondary me-3",{"border-danger":""==l.selectedParams.store_type}]),for:"voluntaryStoreType"},"直營店",2),Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"radio","onUpdate:modelValue":t[11]||(t[11]=e=>l.selectedParams.store_type=e),id:"franchiseStoreType",class:"btn-check",onClick:t[12]||(t[12]=e=>this.storeType="FRANCHISE_CHAIN"),value:"FRANCHISE_CHAIN",name:"storeTypeRadio",autocomplete:"off",checked:"FRANCHISE_CHAIN"==l.selectedParams.store_type},null,8,$o),[[o["vModelRadio"],l.selectedParams.store_type]]),Object(o["createElementVNode"])("label",{class:Object(o["normalizeClass"])(["btn btn-outline-secondary",{"border-danger":""==l.selectedParams.store_type}]),for:"franchiseStoreType"},"加盟店",2)]),Object(o["createElementVNode"])("div",Mo,[Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])(["invalid-feedback mt-0",{"d-none":""!==l.selectedParams.store_type,"d-block":""===l.selectedParams.store_type}])}," 此欄位為必填 ",2)])])])])]),Object(o["createElementVNode"])("div",Fo,[Object(o["createElementVNode"])("button",{class:"btn me-4 pb-0 text-decoration-underline",type:"button",onClick:t[13]||(t[13]=(...e)=>s.reset&&s.reset(...e))}," 清空搜尋條件 "),Object(o["createElementVNode"])("button",{class:"btn btn-primary text-white",type:"button",onClick:t[14]||(t[14]=(...e)=>s.goSearch&&s.goSearch(...e)),disabled:!l.defaultStartYear||!l.selectedEndYear||""==l.selectedParams.store_type||!l.areaIsSelected}," 查詢 ",8,qo)])])}var Wo=a("e582"),Ho={data(){return{notSelect:[],chooseStatus:!1,selectCompany:"",areaDropdown:"",companyIsSelected:!1,areaIsSelected:!0,selectedCompanyName:"",defaultCompanyId:Object(Qa["b"])("company"),selectAllCompany:!0,companyKeyWord:"",storeGroupKeyWord:"",storeType:"ALL",defaultStartYear:Object(Ja["d"])(new Date,730),defaultEndYear:new Date,selectedEndYear:new Date,selectedParams:{data:{},start_date:"",end_date:"",store_type:"ALL"}}},components:{Datepicker:Xa["a"]},emits:["searchTotalPoint"],computed:{...Object(me["c"])(["companyList","areaList","cityList","administrativeList","stores","companyId","getStoresByGroup"]),minDate(){return this.selectedEndYear?new Date(this.selectedEndYear.getFullYear()-2,this.selectedEndYear.getMonth(),this.selectedEndYear.getDate()):null},filterCompanyList(){if(Array.isArray(this.companyList)){const e=JSON.parse(JSON.stringify(this.companyList)),t=e.filter(e=>e.name.match(this.companyKeyWord));return t.forEach((e,a)=>{t.length>0&&0==a&&""!==this.companyKeyWord&&this.selectCompany!==e.id&&!this.chooseStatus&&(this.chooseStatus=!1,this.selectCompany=e.id,this.selectedCompanyName=e.name,this.companyIsSelected=!0,this.getStoresGroup(e.id))}),t}return[]},filterStoresGroup(){return Array.isArray(this.getStoresByGroup)?this.getStoresByGroup.filter(e=>e.name.match(this.storeGroupKeyWord)):[]}},watch:{storeGroupKeyWord:{deep:!0,immediate:!0,handler(){if(this.filterStoresGroup.length)setTimeout(()=>{const e=document.getElementById("selectAllArea");e&&(e.disabled=!1,this.selectAllCheckState())},0);else{const e=document.getElementById("selectAllArea");e&&(e.disabled=!0,e.checked=!1)}}},companyKeyWord:{immediate:!0,handler(e,t){if(""!==e&&(this.chooseStatus=!1,0==this.filterCompanyList.length)){this.$store.commit("SET_STORES_BY_GROUP",[]),this.companyIsSelected=!1;const e=document.getElementById("selectAllArea");e&&(e.checked=!1)}if(""===e&&""!==t){const e=document.getElementById("selectAllArea");e&&(this.companyIsSelected=!0,this.selectAllCheckState()),this.selectCompany=this.filterCompanyList[0].id,this.selectedCompanyName=this.filterCompanyList[0].name,this.getStoresGroup(this.filterCompanyList[0].id)}}},selectedEndYear:{handler(e){e&&this.defaultStartYear&&(this.defaultStartYear=Object(Za["a"])(this.defaultStartYear,this.selectedEndYear))}}},methods:{getCompanyList(){this.$store.dispatch("getCompanyList"),setTimeout(()=>{this.selectCompany=this.companyList[0].id,this.setStoreGroup(this.companyList[0]);const e=[{id:this.companyList[0].id,areas:[]}];this.selectedParams.data={companies:e}})},async getStoresGroup(e=this.defaultCompanyId){const t={company_id:e},a=await Object(Wo["a"])(t);this.$store.commit("SET_STORES_BY_GROUP",a.data.areas),this.selectAllCheckState()},setSelectedCompany(){return new Promise(e=>{setTimeout(()=>{const t=document.querySelector('input[name="selectCompanyRadio"]:checked').value,a=document.querySelectorAll("input[name^='area']:not(:checked)"),o=[{id:t,areas:0==a.length?[]:this.setSelectedStoreGroup()}];this.selectedParams.data={companies:o},e()},0)})},setSelectedStoreGroup(){let e=[];const t=document.querySelectorAll("input[name*='area']:checked");return t.forEach(t=>{const a={id:t.value};e.push(a)}),e},async setStoreGroup(e){this.companyIsSelected=!0,e.id!==this.selectCompany&&this.$store.commit("SET_STORES_BY_GROUP",[]),this.selectCompany=e.id,this.selectedCompanyName=e.name,await this.getStoresGroup(e.id),this.setInputText(),this.selectAllCheckState()},setInputText(){if(!this.$refs.areaInput)return;if(!this.companyIsSelected)return void(this.$refs.areaInput.value="");const e=document.querySelectorAll(".areaCheckbox:checked");e.length==this.getStoresByGroup.length?this.$refs.areaInput.value=`已選擇 ${this.selectedCompanyName} - 全部區域`:0==e.length?this.$refs.areaInput.value="":this.$refs.areaInput.value=`已選擇 ${this.selectedCompanyName} - ${e.length} 個區域`},toggleSelectStoreGroup(e){const t=e.target.checked,a=document.querySelectorAll(".areaCheckbox");a.forEach(e=>{this.toggleNotCheckbox(this.selectCompany+e.value,t?"del":"add")})},toggleNotCheckbox(e,t){if("add"!=t||this.notSelect.includes(e)){if("del"==t){const t=this.notSelect.findIndex(t=>t===e);if(-1==t)return;this.notSelect.splice(t,1)}}else this.notSelect.push(e)},toggleSelectedArea(e){const t=document.getElementById("selectAllArea"),a=e.target.checked,o=e.target.value,c=document.querySelectorAll(".areaCheckbox:not(:checked)");this.toggleNotCheckbox(this.selectCompany+o,a?"del":"add"),setTimeout(()=>{t.checked=0==c.length},0)},selectAllCheckState(){if(0==this.filterStoresGroup.length)return;const e=document.getElementById("selectAllArea"),t=document.querySelectorAll(".areaCheckbox:not(:checked)");e.checked=0==t.length},reset(){this.areaDropdown.hide(),document.getElementById("selectAllArea").checked=!1;const e=document.querySelector("input[name='selectCompanyRadio']:checked");e&&(e.checked=!1),this.$store.commit("SET_STORES_BY_GROUP",[]),this.notSelect.splice(0),this.defaultStartYear=null,this.selectedEndYear=null,this.selectedParams.data="",this.selectedParams.store_type="",this.companyIsSelected=!1,this.areaIsSelected=!1,this.$store.commit("SET_TOTAL_POINT_POINTSUSAGE",""),this.$store.commit("SET_TOTAL_POINT_SUMPOINTSUSAGE",""),setTimeout(()=>{this.$refs.areaInput.value=""},0)},setApiParams(){return new Promise(e=>{this.$refs.areaInput&&(""!==this.companyKeyWord?(this.storeGroupKeyWord="",setTimeout(async()=>{const t=document.querySelectorAll("input.areaCheckbox:checked");this.areaIsSelected=0!==t.length,this.setInputText(),this.areaIsSelected&&(this.setInputText(),await this.setSelectedCompany(),e())},0)):(this.storeGroupKeyWord="",setTimeout(async()=>{const t=document.querySelectorAll("input.areaCheckbox:checked"),a=document.getElementById("selectAllArea");this.areaIsSelected=0!==t.length,this.setInputText(),this.areaIsSelected&&(a.checked||t.length!==this.getStoresByGroup.length||(a.checked=!0),await this.setSelectedCompany(),e())},0)))})},async goSearch(){await this.setApiParams(),this.selectedParams.start_date=`${new Date(this.defaultStartYear).getFullYear()}-${new Date(this.defaultStartYear).getMonth()+1}`,this.selectedParams.end_date=`${new Date(this.selectedEndYear).getFullYear()}-${new Date(this.selectedEndYear).getMonth()+1}`,console.log(this.selectedParams.data.companies[0]),this.$emit("search-total-point",this.selectedParams)}},mounted(){this.areaDropdown=Object(eo["a"])("areaDropdown"),this.getCompanyList();const e=document.querySelectorAll(".yearInput");e.forEach(e=>{e.style.maxWidth="130px",e.style.border="1px solid #ced4da",e.style.borderRight="none",e.style.borderRadius="6px 0 0 6px"}),this.$refs.areaInput.addEventListener("hide.bs.dropdown",()=>{this.setApiParams()})}};a("6284");const zo=he()(Ho,[["render",Ko],["__scopeId","data-v-227c6e74"]]);var Jo=zo;const Qo=e=>(Object(o["pushScopeId"])("data-v-e3f67918"),e=e(),Object(o["popScopeId"])(),e),Xo={class:"container py-3"},Zo={class:"row ps-0 ps-md-3 ps-lg-0"},ec={class:"col-md-12"},tc={class:"row mb-4 ps-0 ps-lg-3 ps-xl-0"},ac=Qo(()=>Object(o["createElementVNode"])("label",{class:"col-xl-2 col-form-label required-input text-start text-xl-end"},[Object(o["createElementVNode"])("span",null,"*"),Object(o["createTextVNode"])("公司/區域/門市:")],-1)),oc={class:"col-xl-10"},cc={class:"dropdown-company-menu dropdown-menu w-100"},lc={class:"row"},sc={class:"col-3 border-end"},nc={class:"ps-2 py-2 searchlist-input"},rc={class:"limitDropDown list-unstyled dropdown-list p-2 mb-0"},dc=["value","id","onClick","checked"],ic=["for"],mc={class:"col-9"},pc={class:"searchlist-input d-between pe-2 py-2"},bc=["disabled"],uc={class:"d-flex"},hc=["disabled","checked"],Oc=Qo(()=>Object(o["createElementVNode"])("label",{class:"btn btn-outline-secondary fs-small text-nowrap mb-0 mx-3",for:"allStoreType"},"全部",-1)),yc=["disabled","checked"],jc=Qo(()=>Object(o["createElementVNode"])("label",{class:"btn btn-outline-secondary fs-small text-nowrap mb-0 me-3",for:"voluntaryStoreType"},"直營",-1)),Ec=["disabled","checked"],gc=Qo(()=>Object(o["createElementVNode"])("label",{class:"btn btn-outline-secondary fs-small text-nowrap mb-0 me-3",for:"franchiseStoreType"},"加盟",-1)),Nc={class:"limitDropDown filterAccordion accordion list-unstyled dropdown-list px-2"},Sc={class:"border-bottom mb-3"},Vc={class:"form-check py-2"},fc=["disabled"],kc=Qo(()=>Object(o["createElementVNode"])("label",{class:"form-check-label",for:"selectAllArea"},"全選",-1)),Cc={key:0,class:"accordion-item ps-2"},_c={class:"d-between"},vc={class:"form-check"},Tc=["name","value","id","checked"],Ac=["for"],Dc=["data-bs-target","aria-controls"],xc=["id","aria-labelledby"],wc={class:"accordion-body row"},Lc=["data-area-id","name","value","id","checked"],Pc=["for"],Ic={class:"col-6 col-xl-6"},Rc={class:"row mb-4"},Yc=Qo(()=>Object(o["createElementVNode"])("label",{class:"col-lg-4 col-xl-4 col-form-label required-input text-start text-lg-end"},[Object(o["createElementVNode"])("span",null,"*"),Object(o["createTextVNode"])("交易日期:")],-1)),Bc={class:"column"},Uc={class:"d-end"},Gc=["disabled"];function $c(e,t,a,c,l,s){const n=Object(o["resolveComponent"])("Datepicker");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Xo,[Object(o["createElementVNode"])("div",Zo,[Object(o["createElementVNode"])("div",ec,[Object(o["createElementVNode"])("div",tc,[ac,Object(o["createElementVNode"])("div",oc,[Object(o["createElementVNode"])("input",{type:"text",class:Object(o["normalizeClass"])(["form-control rounded-end company-input",{"border-danger":!l.storeIsSelected}]),readonly:"",placeholder:"請選擇公司(單選)、區域(複選)及門市(複選)","data-bs-toggle":"dropdown","data-bs-auto-close":"outside","aria-expanded":"false",ref:"storeInput"},null,2),Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])(["invalid-feedback",{"d-none":l.storeIsSelected,"d-block":!l.storeIsSelected}])}," 此欄位為必填 ",2),Object(o["createElementVNode"])("div",cc,[Object(o["createElementVNode"])("div",lc,[Object(o["createElementVNode"])("div",sc,[Object(o["createElementVNode"])("div",nc,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.companyKeyWord=e),class:"form-control form-control-sm border search-countryList",placeholder:"查詢公司關鍵字"},null,512),[[o["vModelText"],l.companyKeyWord]])]),Object(o["createElementVNode"])("ul",rc,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(s.filterCompanyList,e=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:e.id,class:"form-check mb-2"},[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{class:"form-check-input",name:"selectCompanyRadio",type:"radio",value:e.id,id:e.id,onClick:t=>(s.setStoreGroup(e),l.chooseStatus=!0),checked:l.selectCompany===e.id,"onUpdate:modelValue":t[1]||(t[1]=e=>l.selectCompany=e)},null,8,dc),[[o["vModelRadio"],l.selectCompany]]),Object(o["createElementVNode"])("label",{class:"form-check-label",for:e.id},Object(o["toDisplayString"])(e.name),9,ic)]))),128))])]),Object(o["createElementVNode"])("div",mc,[Object(o["createElementVNode"])("div",pc,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>l.storeGroupKeyWord=e),class:"form-control form-control-sm border search-countryList",placeholder:"搜尋區域或門市",disabled:!l.selectCompany},null,8,bc),[[o["vModelText"],l.storeGroupKeyWord]]),Object(o["createElementVNode"])("div",uc,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"radio","onUpdate:modelValue":t[3]||(t[3]=e=>l.selectedParams.store_type=e),id:"allStoreType",class:"btn-check",onClick:t[4]||(t[4]=e=>s.changeStoreType(l.selectCompany,"ALL")),value:"ALL",name:"storeTypeRadio",autocomplete:"off",disabled:!l.selectCompany,checked:"ALL"==l.selectedParams.store_type},null,8,hc),[[o["vModelRadio"],l.selectedParams.store_type]]),Oc,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"radio","onUpdate:modelValue":t[5]||(t[5]=e=>l.selectedParams.store_type=e),id:"voluntaryStoreType",class:"btn-check",onClick:t[6]||(t[6]=e=>s.changeStoreType(l.selectCompany,"VOLUNTARY_CHAIN")),value:"VOLUNTARY_CHAIN",name:"storeTypeRadio",autocomplete:"off",disabled:!l.selectCompany,checked:"VOLUNTARY_CHAIN"==l.selectedParams.store_type},null,8,yc),[[o["vModelRadio"],l.selectedParams.store_type]]),jc,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"radio","onUpdate:modelValue":t[7]||(t[7]=e=>l.selectedParams.store_type=e),id:"franchiseStoreType",class:"btn-check",onClick:t[8]||(t[8]=e=>s.changeStoreType(l.selectCompany,"FRANCHISE_CHAIN")),value:"FRANCHISE_CHAIN",name:"storeTypeRadio",disabled:!l.selectCompany,autocomplete:"off",checked:"FRANCHISE_CHAIN"==l.selectedParams.store_type},null,8,Ec),[[o["vModelRadio"],l.selectedParams.store_type]]),gc])]),Object(o["createElementVNode"])("ul",Nc,[Object(o["createElementVNode"])("li",Sc,[Object(o["createElementVNode"])("div",Vc,[Object(o["createElementVNode"])("input",{class:"form-check-input",type:"checkbox",value:"all",id:"selectAllArea",onClick:t[9]||(t[9]=(...e)=>s.toggleSelectStoreGroup&&s.toggleSelectStoreGroup(...e)),disabled:!l.selectCompany,checked:""},null,8,fc),kc])]),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(s.filterStoresGroup,e=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:e.id,class:"mb-3"},[e.stores.length>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Cc,[Object(o["createElementVNode"])("div",_c,[Object(o["createElementVNode"])("div",vc,[Object(o["createElementVNode"])("input",{class:"form-check-input areaCheckbox",name:"area"+e.id,type:"checkbox",value:e.id,id:"select"+e.name,onClick:t[10]||(t[10]=(...e)=>s.toggleSelectedArea&&s.toggleSelectedArea(...e)),checked:!l.notCheck.includes(l.selectCompany+e.id)},null,8,Tc),Object(o["createElementVNode"])("label",{class:"form-check-label",for:"select"+e.name},Object(o["toDisplayString"])(e.name),9,Ac)]),Object(o["createElementVNode"])("button",{class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#areaAccoddion"+e.id,"aria-expanded":"true","aria-controls":"areaAccoddion"+e.id},null,8,Dc)]),Object(o["createElementVNode"])("div",{id:"areaAccoddion"+e.id,class:"accordion-collapse collapse show px-3","aria-labelledby":"areaAccordion"+e.id},[Object(o["createElementVNode"])("ul",wc,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.stores,a=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:a.id,class:"form-check col-4"},[Object(o["createElementVNode"])("input",{class:"form-check-input storeCheckbox","data-area-id":e.id,name:"store"+e.id,type:"checkbox",value:a.id,id:"select"+a.id,onClick:t[11]||(t[11]=(...e)=>s.toggleSelectedStore&&s.toggleSelectedStore(...e)),checked:!l.notCheck.includes(l.selectCompany+a.id)},null,8,Lc),Object(o["createElementVNode"])("label",{class:"form-check-label",for:"select"+a.id},Object(o["toDisplayString"])(a.id)+" "+Object(o["toDisplayString"])(a.name),9,Pc)]))),128))])],8,xc)])):Object(o["createCommentVNode"])("",!0)]))),128))])])])])])])]),Object(o["createElementVNode"])("div",Ic,[Object(o["createElementVNode"])("div",Rc,[Yc,Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])(["col-lg-6 col-xl-8 d-sm-flex",{"align-items-center":l.defaultStartYear,"align-items-start":!l.defaultStartYear}])},[Object(o["createElementVNode"])("div",Bc,[Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])(["d-flex border border-1 rounded-2",{"border-danger":!l.defaultStartYear}])},[Object(o["createVNode"])(n,{class:"yearInput border-0 rounded-1 border-end px-2 py-1",modelValue:l.defaultStartYear,"onUpdate:modelValue":t[12]||(t[12]=e=>l.defaultStartYear=e),inputFormat:"yyyy-MM",startingView:"month",minimumView:"month",lowerLimit:s.minDate,upperLimit:l.selectedEndYear?l.selectedEndYear:l.defaultEndYear,placeholder:"請選擇日期"},null,8,["modelValue","lowerLimit","upperLimit"])],2),Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])(["invalid-feedback mt-2",{"d-none":l.defaultStartYear,"d-block":!l.defaultStartYear}])}," 此欄位為必填 ",2)]),Object(o["createElementVNode"])("span",{class:Object(o["normalizeClass"])(["mx-2",{"mt-0":l.defaultStartYear,"mt-2":!l.defaultStartYear}])},"至",2),Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])(["d-flex border border-1 rounded-2",{"border-danger":!l.selectedEndYear}])},[Object(o["createVNode"])(n,{class:"yearInput border-0 rounded-1 border-end px-2 py-1",modelValue:l.selectedEndYear,"onUpdate:modelValue":t[13]||(t[13]=e=>l.selectedEndYear=e),inputFormat:"yyyy-MM",startingView:"month",minimumView:"month",upperLimit:l.defaultEndYear,lowerLimit:l.defaultStartYear,placeholder:"請選擇日期"},null,8,["modelValue","upperLimit","lowerLimit"])],2)],2)])])]),Object(o["createElementVNode"])("div",Uc,[Object(o["createElementVNode"])("button",{class:"btn me-4 pb-0 text-decoration-underline",type:"button",onClick:t[14]||(t[14]=(...e)=>s.reset&&s.reset(...e))}," 清空搜尋條件 "),Object(o["createElementVNode"])("button",{class:"btn btn-primary text-white",type:"button",onClick:t[15]||(t[15]=(...e)=>s.goSearch&&s.goSearch(...e)),disabled:!l.defaultStartYear||!l.selectedEndYear||""==l.selectedParams.store_type||!l.storeIsSelected||!l.selectCompany}," 查詢 ",8,Gc)])])}var Mc={data(){return{chooseStatus:!1,selectCompany:"",notCheck:[],storeIsSelected:!0,selectedCompanyName:"",selectedCompanyId:"",defaultCompanyId:Object(Qa["b"])("company"),selectAllCompany:!0,companyKeyWord:"",storeGroupKeyWord:"",storeType:"ALL",defaultStartYear:Object(Ja["d"])(new Date,730),defaultEndYear:new Date,selectedEndYear:new Date,selectedParams:{data:{},start_date:"",end_date:"",store_type:"ALL"}}},components:{Datepicker:Xa["a"]},emits:["searchTotalPoint"],computed:{...Object(me["c"])(["companyList","areaList","cityList","administrativeList","stores","companyId","getStoresByGroup"]),minDate(){return this.selectedEndYear?new Date(this.selectedEndYear.getFullYear()-2,this.selectedEndYear.getMonth(),this.selectedEndYear.getDate()):null},filterCompanyList(){if(Array.isArray(this.companyList)){const e=JSON.parse(JSON.stringify(this.companyList)),t=e.filter(e=>e.name.match(this.companyKeyWord));return t.forEach((e,a)=>{t.length>0&&0==a&&""!==this.companyKeyWord&&this.selectCompany!==e.id&&!this.chooseStatus&&(this.chooseStatus=!1,this.selectCompany=e.id,this.selectedCompanyName=e.name,this.getStoresGroup(e.id))}),t}return[]},filterStoresGroup(){if(Array.isArray(this.getStoresByGroup)){const e=JSON.parse(JSON.stringify(this.getStoresByGroup)),t=[];return e.forEach(e=>{let a=[];e.name.match(this.storeGroupKeyWord)?t.push(e):(e.stores.forEach(e=>{e.name.match(this.storeGroupKeyWord)&&a.push(e)}),0!==a.length&&t.push({id:e.id,name:e.name,stores:a}))}),t}return[]}},watch:{companyKeyWord:{immediate:!0,handler(e,t){if(""!==e&&(this.chooseStatus=!1,0==this.filterCompanyList.length)){this.$store.commit("SET_STORES_BY_GROUP",[]),this.selectCompany=null;const e=document.getElementById("selectAllArea");e&&(e.checked=!1)}if(""===e&&""!==t){const e=document.getElementById("selectAllArea");e&&this.selectAllCheckState(),this.selectCompany=this.filterCompanyList[0].id,this.selectedCompanyName=this.filterCompanyList[0].name,this.getStoresGroup(this.filterCompanyList[0].id)}setTimeout(()=>{this.selectAllCheckState(),this.toggleAllAreaStatus()},0)}},storeGroupKeyWord:{deep:!0,immediate:!0,handler(){if(this.filterStoresGroup.length)setTimeout(()=>{const e=document.getElementById("selectAllArea");e&&(e.disabled=!1,this.selectAllCheckState()),this.toggleAllAreaStatus()},0);else{const e=document.getElementById("selectAllArea");e&&(e.disabled=!0,e.checked=!1)}}},selectedEndYear:{handler(e){e&&this.defaultStartYear&&(this.defaultStartYear=Object(Za["a"])(this.defaultStartYear,this.selectedEndYear))}}},methods:{async getCompanyList(){const e=await Object(to["a"])();this.$store.commit("SET_COMPANY_LIST",e.data.companies),this.selectCompany=this.companyList[0].id,this.selectedCompanyName=this.companyList[0].name,this.selectedCompanyId=this.companyList[0].id,this.setStoreGroup(this.companyList[0]);const t=[{id:this.companyList[0].id,areas:[]}];this.selectedParams.data={companies:t}},async getStoresGroup(e=this.selectCompany,t="ALL"){const a={company_id:e,store_type:t},o=await Object(Wo["a"])(a);this.$store.commit("SET_STORES_BY_GROUP",o.data.areas),this.selectedParams.store_type||(this.selectedParams.store_type="ALL"),this.selectAllCheckState()},setSelectedCompany(){const e=document.querySelector('input[name="selectCompanyRadio"]:checked').value,t=[{id:e,areas:this.setSelectedStoreGroup()}];this.selectedParams.data={companies:t}},setSelectedStoreGroup(){let e=[];const t=document.querySelectorAll("input[name*='area']:checked"),a=document.querySelectorAll('input[type="checkbox"][name^="store"]:not(:checked)');return t.forEach(t=>{const o={id:t.value,stores:0==a.length?[]:this.setStoreParams(t.value)};e.push(o)}),e},setStoreParams(e){let t=[];const a=document.querySelectorAll(`input[name='store${e}']:checked`);return a.forEach(e=>{t.push(e.value)}),t},async setStoreGroup(e){this.selectCompany!=e.id&&this.$store.commit("SET_STORES_BY_GROUP",[]),this.selectedCompanyName=e.name,this.selectedCompanyId=e.id,this.selectedParams.store_type="ALL",await this.getStoresGroup(e.id),""==this.storeGroupKeyWord&&this.setInputText(),this.selectAllCheckState()},setInputText(){if(!this.$refs.storeInput)return;const e=document.querySelectorAll(".areaCheckbox:checked"),t=document.querySelectorAll(".storeCheckbox:checked");let a=0;this.getStoresByGroup.forEach(e=>{a+=e.stores.length}),a==t.length?this.$refs.storeInput.value=`已選擇 ${this.selectedCompanyName} - 全部區域及全部門市`:0==e.length?this.$refs.storeInput.value="":this.$refs.storeInput.value=`已選擇 ${this.selectedCompanyName} - ${e.length} 個區域、 ${t.length} 個門市`},toggleNotCheckbox(e,t){if("add"!=t||this.notCheck.includes(e)){if("del"==t){const t=this.notCheck.findIndex(t=>t===e);if(-1==t)return;this.notCheck.splice(t,1)}}else this.notCheck.push(e)},toggleSelectStoreGroup(e){const t=e.target.checked,a=document.querySelectorAll(".areaCheckbox"),o=document.querySelectorAll(".storeCheckbox");a.forEach(e=>this.toggleNotCheckbox(this.selectCompany+e.value,t?"del":"add")),o.forEach(e=>this.toggleNotCheckbox(this.selectCompany+e.value,t?"del":"add"))},toggleSelectedArea(e){const t=e.target.checked,a=e.target.value;this.toggleNotCheckbox(this.selectCompany+a,t?"del":"add");const o=document.querySelectorAll(`input[name="store${a}"]`);o.forEach(e=>this.toggleNotCheckbox(this.selectCompany+e.value,t?"del":"add")),setTimeout(()=>{this.selectAllCheckState()},0)},toggleAllAreaStatus(){const e=document.querySelectorAll("input[name^='area']");e.forEach(e=>{const t=[...document.querySelectorAll(`input[name="store${e.value}"]`)],a=t.some(e=>1==e.checked);this.toggleNotCheckbox(this.selectCompany+e.value,a?"del":"add")}),setTimeout(()=>{this.selectAllCheckState()},0)},toggleSelectedStore(e){const t=e.target.checked,a=e.target.getAttribute("data-area-id"),o=document.querySelectorAll(`input[name="store${a}"]:checked`).length,c=document.querySelector(`input[name="area${a}"]`);this.toggleNotCheckbox(this.selectCompany+e.target.value,t?"del":"add"),t&&!c.checked?this.toggleNotCheckbox(this.selectCompany+c.value,"del"):0==o&&this.toggleNotCheckbox(this.selectCompany+c.value,"add"),setTimeout(()=>{this.selectAllCheckState()},0)},async changeStoreType(e,t){await this.getStoresGroup(e,t),this.toggleAllAreaStatus()},selectAllCheckState(){if(0==this.filterStoresGroup.length)return;const e=document.getElementById("selectAllArea"),t=document.querySelectorAll(".areaCheckbox:not(:checked)"),a=document.querySelectorAll(".storeCheckbox:not(:checked)");e.checked=0==t.length&&0==a.length},removeAllStoreByGroup(){if(this.getStoresByGroup.length>1&&this.getStoresByGroup[0].stores.length>1){this.storeIsSelected=!1;const e=document.querySelectorAll("input[name*='area']"),t=document.getElementById("selectAllArea");e.forEach(e=>e.checked=!1),t.checked=!1,this.storeIsSelected=!1;const a=document.querySelectorAll("input.storeCheckbox");a.forEach(e=>e.checked=!1)}},reset(){this.$refs.storeInput.value="",this.storeIsSelected=null,document.getElementById("selectAllArea").checked=!1,this.$store.commit("SET_STORES_BY_GROUP",[]),this.notCheck.splice(0),this.selectCompany=null,this.selectedParams.data="",this.selectedParams.store_type="",this.defaultStartYear=null,this.selectedEndYear=null,this.$store.commit("SET_TOTAL_POINT_POINTSUSAGE",""),this.$store.commit("SET_TOTAL_POINT_SUMPOINTSUSAGE","")},goSearch(){this.selectedParams.start_date=`${new Date(this.defaultStartYear).getFullYear()}-${new Date(this.defaultStartYear).getMonth()+1}`,this.selectedParams.end_date=`${new Date(this.selectedEndYear).getFullYear()}-${new Date(this.selectedEndYear).getMonth()+1}`,this.$emit("search-total-point",this.selectedParams)}},mounted(){this.getCompanyList();const e=document.querySelectorAll(".yearInput");e.forEach(e=>{e.style.maxWidth="130px",e.style.border="1px solid #ced4da",e.style.borderRight="none",e.style.borderRadius="6px 0 0 6px"}),this.$refs.storeInput.addEventListener("hide.bs.dropdown",()=>{if(this.$refs.storeInput)return this.selectCompany?void(""!==this.companyKeyWord?(this.storeGroupKeyWord="",setTimeout(()=>{const e=document.querySelectorAll("input.storeCheckbox:checked");this.storeIsSelected=0!==e.length,this.setSelectedCompany(),this.setInputText()},200)):(this.storeGroupKeyWord="",setTimeout(()=>{const e=document.querySelectorAll("input.storeCheckbox:checked");this.storeIsSelected=0!==e.length,this.setSelectedCompany(),this.setInputText()},200))):(this.$refs.storeInput.value="",void(this.storeIsSelected=!1))})}};a("e1ab");const Fc=he()(Mc,[["render",$c],["__scopeId","data-v-e3f67918"]]);var qc=Fc,Kc={data(){return{title:"點數總表",items:[{text:"商務分析報表",href:"/"},{text:"點數總表",active:!0}],searchType:"COMPANY"}},components:{Layout:u["a"],PageHeader:h["a"],FilterFieldCompany:co,FilterFieldArea:Jo,FilterFieldStore:qc,TotalPointCompany:ye,TotalPointArea:ut,TotalPointStore:ya},computed:{...Object(me["c"])(["total_pointsUsageRecords","totalPointInfo"])},methods:{getTotalPoint(e){this.$store.dispatch("setLoading");const t=e;t.query_type=this.searchType,this.$store.dispatch("getTotalPoint",t)},changeSearchType(){this.$store.commit("SET_TOTAL_POINT_POINTSUSAGE",""),this.$store.commit("SET_TOTAL_POINT_SUMPOINTSUSAGE","")}},beforeRouteEnter(e,t,a){a(e=>{e.$store.commit("SET_TOTAL_POINT_POINTSUSAGE",""),e.$store.commit("SET_TOTAL_POINT_SUMPOINTSUSAGE","")})}};const Wc=he()(Kc,[["render",b]]);t["default"]=Wc},"2f3e":function(e,t,a){"use strict";a("acb6")},"55cb":function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return n})),a.d(t,"f",(function(){return r})),a.d(t,"g",(function(){return d})),a.d(t,"e",(function(){return i})),a.d(t,"h",(function(){return m})),a.d(t,"d",(function(){return p}));var o=a("7b17"),c=a("cfb9");const l=e=>new o["e"](document.getElementById(e)),s=e=>new o["j"](document.getElementById(e)),n=e=>new o["d"](document.getElementById(e)),r=e=>{c["a"].emit("emit-machine-setting",e);const t=l("machineSettingModal");t.show()},d=e=>{c["a"].emit("emit-payment-setting",e);const t=l("paymentSettingModal");t.show()},i=e=>{const t=l("addPayment");t.show()},m=e=>{const t=l(e);t.show()},p=e=>{const t=document.getElementById(e),a=document.querySelector(".modal-backdrop");document.body.setAttribute("data-aos-duration",0),t.classList.remove("show"),t.style.display="none",document.body.className="",document.body.style="",a.remove()}},"584b":function(e,t,a){},6284:function(e,t,a){"use strict";a("92d9")},6286:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return l}));var o=a("1970");const c=e=>new Promise((t,a)=>{o["a"].get("/v1/basic/companies",e).then(e=>{t(e)}).catch(e=>{a(e)})}),l=e=>new Promise((t,a)=>{o["a"].get("/v2/basic/stores",e).then(e=>{t(e)}).catch(e=>{a(e)})})},6512:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return c}));const o=(e,t)=>{const a=new Date(e),o=new Date(t),c=o-a,l=c/31536e6;return l>2?new Date(o.getFullYear()-2,o.getMonth(),o.getDate()):e},c=(e,t,a)=>{const o=new Date,c=new Date(t),l=o.getDate()===c.getDate()&&o.getMonth()===c.getMonth()&&o.getFullYear()===c.getFullYear();if(l){const o=new Date(e),c=new Date(t),l=Math.abs(o.getTime()-c.getTime()),s=Math.ceil(l/864e5);return a===s}return!1}},"83bb":function(e,t,a){},"92d9":function(e,t,a){},acb6:function(e,t,a){},cc75:function(e,t,a){"use strict";a("83bb")},e1ab:function(e,t,a){"use strict";a("584b")},e582:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var o=a("1970");const c=e=>new Promise((t,a)=>{o["a"].get("/v1/basic/stores_by_group",e).then(e=>{t(e)}).catch(e=>{a(e)})})}}]);