(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8257cae2"],{"0d32":function(e,t,a){"use strict";a.d(t,"e",(function(){return c})),a.d(t,"a",(function(){return n})),a.d(t,"f",(function(){return s})),a.d(t,"c",(function(){return d})),a.d(t,"b",(function(){return r})),a.d(t,"g",(function(){return i})),a.d(t,"d",(function(){return l}));var o=a("1970");const c=e=>new Promise((t,a)=>{o["a"].patch("/v1/basic/machine/config",e).then(e=>{t(e)}).catch(e=>{a(e)})}),n=e=>new Promise((t,a)=>{o["a"].post("/v1/basic/printer/config",e).then(e=>{t(e)}).catch(e=>{a(e)})}),s=e=>new Promise((t,a)=>{o["a"].patch("/v1/basic/printer/config",e).then(e=>{t(e)}).catch(e=>{a(e)})}),d=e=>new Promise((t,a)=>{o["a"].delete("/v1/basic/printer/config",e).then(e=>{t(e)}).catch(e=>{a(e)})}),r=e=>new Promise((t,a)=>{o["a"].post("/v1/basic/printer/group",e).then(e=>{t(e)}).catch(e=>{a(e)})}),i=e=>new Promise((t,a)=>{o["a"].patch("/v1/basic/printer/group",e).then(e=>{t(e)}).catch(e=>{a(e)})}),l=e=>new Promise((t,a)=>{o["a"].delete("/v1/basic/printer/group",e).then(e=>{t(e)}).catch(e=>{a(e)})})},"1dea":function(e,t,a){"use strict";var o=a("7a23");const c={class:"d-inline"},n={class:"input-group"},s=["disabled"],d={class:"dropdown-company-menu dropdown-menu"},r={class:"p-2 pt-1 searchlist-input"},i={class:"limitDropDown list-unstyled dropdown-list mb-0"},l=["onClick"];function m(e,t,a,m,p,u){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",c,[Object(o["createElementVNode"])("div",n,[Object(o["createElementVNode"])("i",{class:Object(o["normalizeClass"])(["input-group-text ri-building-line bg-white border-end-0 pe-0",{disableInput:e.companyList.length<2}])},null,2),Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>p.selectedCompany=e),type:"text",class:"form-control border-start-0 border-end-0",readonly:"",role:"button",placeholder:"請選擇公司別","data-bs-toggle":"dropdown","data-bs-auto-close":"true","aria-expanded":"false",disabled:e.companyList.length<2},null,8,s),[[o["vModelText"],p.selectedCompany]]),Object(o["createElementVNode"])("div",d,[Object(o["createElementVNode"])("div",r,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>p.companyKeyWord=e),placeholder:"查詢公司關鍵字",class:"form-control-sm border search-countryList w-100"},null,512),[[o["vModelText"],p.companyKeyWord]])]),Object(o["createElementVNode"])("ul",i,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(u.filterCompanyList,e=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:e.id,class:Object(o["normalizeClass"])({active:p.selectedCompany===e.name})},[Object(o["createElementVNode"])("button",{type:"button",class:"btn",onClick:t=>u.setSelectCompany(e.name,e.id)},Object(o["toDisplayString"])(e.name),9,l)],2))),128))])]),Object(o["createElementVNode"])("i",{"data-bs-toggle":"dropdown","data-bs-auto-close":"true","aria-expanded":"false",class:Object(o["normalizeClass"])(["input-group-text ri-arrow-down-s-line bg-white border-start-0 ps-0",{disableInput:e.companyList.length<2}])},null,2)])])}var p=a("5502"),u=a("c535"),b={data(){return{companyKeyWord:"",selectedCompany:"",selectedCompanyId:""}},emits:["setCompanyId"],props:{page:{type:String}},computed:{...Object(p["c"])(["companyList","searchCompany"]),filterCompanyList(){return this.companyList.length>0?this.companyList.filter(e=>e.name.match(this.companyKeyWord)||e.id.match(this.companyKeyWord)):[]}},watch:{companyKeyWord:{immediate:!0,handler(e,t){0!==this.filterCompanyList.length&&(""===e&&t||""!==e)&&(this.selectedCompanyId=this.filterCompanyList[0].id,this.selectedCompany=this.filterCompanyList[0].name,this.getData())}},selectedCompanyId:{immediate:!0,handler(e){this.$emit("setCompanyId",e)}}},methods:{async getData(){this.$store.dispatch("setLoading");const e={company_id:this.selectedCompanyId};if("comboManage"===this.page)await Promise.all([this.$store.dispatch("getCombos",e),this.$store.dispatch("getAllComboListData",e)]);else if("companyManage"===this.page)await Promise.all([this.$store.dispatch("getCompanyConfig",e),this.$store.dispatch("getWebPlatformConfig",e)]);else if("promotionManage"===this.page){const t=new Date,a=t.getFullYear(),o=t.getMonth(),c=new Date(a,o,1),n=new Date(a,o+1,0);await Promise.all([this.$store.dispatch("getCompanyConfig",e),this.$store.dispatch("getPromotionBasicData",e),this.$store.dispatch("getPromotions",{...e,status:"ACTIVE",types:JSON.stringify(["ALL"]),start_date:Object(u["g"])(c),end_date:Object(u["g"])(n)})])}this.$store.dispatch("hideLoading")},setSelectCompany(e,t){this.selectedCompany=e,this.selectedCompanyId=t,this.getData()}},async created(){this.$store.dispatch("setLoading"),await this.$store.dispatch("getCompanyList"),this.searchCompany?(this.selectedCompanyId=this.searchCompany,this.selectedCompany=this.companyList.find(e=>e.id===this.searchCompany).name,this.$store.commit("SET_SEARCH_COMPANY",null)):(this.selectedCompany=this.companyList[0].name,this.selectedCompanyId=this.companyList[0].id),await this.getData(),this.$store.dispatch("hideLoading")}},O=(a("c579"),a("6b0d")),g=a.n(O);const h=g()(b,[["render",m],["__scopeId","data-v-b46f6534"]]);t["a"]=h},2501:function(e,t,a){"use strict";a.r(t);var o=a("7a23");const c=e=>(Object(o["pushScopeId"])("data-v-677e6796"),e=e(),Object(o["popScopeId"])(),e),n={class:"d-between pt-md-3 mb-3"},s={key:0,class:"d-column"},d={class:"card"},r={class:"row"},i={class:"col-md"},l={class:"row item-spacing"},m=c(()=>Object(o["createElementVNode"])("div",{class:"col-4 text-end"},[Object(o["createElementVNode"])("label",{class:"field-name fs-base"},"商品編號 :")],-1)),p={class:"col-7"},u={class:"col-md"},b={class:"row item-spacing"},O=c(()=>Object(o["createElementVNode"])("div",{class:"col-4 text-end"},[Object(o["createElementVNode"])("label",{class:"field-name fs-base"},"商品名稱 :")],-1)),g={class:"col-7"},h={class:"d-end mt-3"},E={class:"card"},j={key:1,class:"card",style:{height:"70vh"}},N={class:"d-end"},y=c(()=>Object(o["createElementVNode"])("h2",{class:"emptyDataMessage"},"目前沒有建立套餐商品資料喲~",-1));function V(e,t,a,c,V,C){const f=Object(o["resolveComponent"])("PageHeader"),_=Object(o["resolveComponent"])("BasicData"),I=Object(o["resolveComponent"])("ComboList"),v=Object(o["resolveComponent"])("SetCombo"),D=Object(o["resolveComponent"])("Layout");return Object(o["openBlock"])(),Object(o["createBlock"])(D,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(f,{title:V.title,items:V.items},null,8,["title","items"]),Object(o["createElementVNode"])("div",n,[Object(o["createVNode"])(_,{page:"comboManage",onSetCompanyId:C.setCompanyId},null,8,["onSetCompanyId"]),V.isEmptyData?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:0,class:"btn btn-primary text-white px-4 py-2",type:"button","data-bs-toggle":"modal","data-bs-target":"#setCombo",onClick:t[0]||(t[0]=e=>V.setType="create")}," 新增 "))]),V.isEmptyData?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",j,[Object(o["createElementVNode"])("div",N,[Object(o["createElementVNode"])("button",{class:"btn btn-primary text-white px-3 py-2",type:"button","data-bs-toggle":"modal","data-bs-target":"#setCombo",onClick:t[5]||(t[5]=e=>V.setType="create")}," 新增套餐 ")]),y])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",s,[Object(o["createElementVNode"])("div",d,[Object(o["createElementVNode"])("div",r,[Object(o["createElementVNode"])("div",i,[Object(o["createElementVNode"])("div",l,[m,Object(o["createElementVNode"])("div",p,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>V.productId=e)},null,512),[[o["vModelText"],V.productId]])])])]),Object(o["createElementVNode"])("div",u,[Object(o["createElementVNode"])("div",b,[O,Object(o["createElementVNode"])("div",g,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>V.productName=e)},null,512),[[o["vModelText"],V.productName]])])])])]),Object(o["createElementVNode"])("div",h,[Object(o["createElementVNode"])("button",{class:"btn me-5 pb-0 text-decoration-underline",type:"button",onClick:t[3]||(t[3]=e=>C.reset())}," 清空全部搜尋條件 "),Object(o["createElementVNode"])("button",{class:"btn btn-primary text-white px-4 py-2",type:"button",onClick:t[4]||(t[4]=(...e)=>C.search&&C.search(...e))}," 查詢 ")])]),Object(o["createElementVNode"])("div",E,[Object(o["createVNode"])(I,{onSwitchSetType:C.switchSetType},null,8,["onSwitchSetType"])])])),Object(o["createVNode"])(v)]),_:1})}var C=a("6a34"),f=a("2579"),_=a("5502"),I=a("c457"),v=a("2dbd"),D=a.n(v);const x=e=>(Object(o["pushScopeId"])("data-v-69174a88"),e=e(),Object(o["popScopeId"])(),e),A={class:"accordion mt-3 border border-bottom-0",id:"webplatform"},T={class:"content-layout"},k={key:0,class:"container-fluid"},S={class:"row align-items-center p-3 bg-secondary-light"},w={class:"col"},R={class:"d-flex"},L=x(()=>Object(o["createElementVNode"])("p",null,"類別",-1)),M={class:"col"},P={class:"d-flex"},B=x(()=>Object(o["createElementVNode"])("p",null,"商品編號",-1)),U={class:"col"},$={class:"d-flex"},G=x(()=>Object(o["createElementVNode"])("p",null,"商品名稱",-1)),q=x(()=>Object(o["createElementVNode"])("div",{class:"col"},[Object(o["createElementVNode"])("p",null,"加值")],-1)),F=x(()=>Object(o["createElementVNode"])("div",{class:"col text-end"},[Object(o["createElementVNode"])("p",{class:"detail-title"},"詳細資訊")],-1)),K=x(()=>Object(o["createElementVNode"])("div",{class:"col-1"},null,-1)),H={class:"row align-items-center border-bottom p-3 mt-1"},W={class:"col"},Y={class:"col"},J={class:"col"},X={class:"col"},z={class:"col text-end"},Q=["data-bs-target","aria-controls"],Z={class:"col-1"},ee=["onClick"],te=x(()=>Object(o["createElementVNode"])("img",{class:"me-1",src:D.a,alt:"刪除"},null,-1)),ae=["id"],oe={class:"accordion-body bg-gray-light"},ce={class:"d-end"},ne=["onClick"],se={class:"card mt-2"},de={class:"table"},re=x(()=>Object(o["createElementVNode"])("thead",null,[Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("th",{class:"fs-small text-center"},"群組名稱"),Object(o["createElementVNode"])("th",{class:"fs-small"},[Object(o["createElementVNode"])("span",null,"預設"),Object(o["createElementVNode"])("span",null,"群組品項"),Object(o["createElementVNode"])("span",null,"數量"),Object(o["createElementVNode"])("span",null,"加價")]),Object(o["createElementVNode"])("th",{class:"fs-small"}),Object(o["createElementVNode"])("th",{class:"fs-small text-center"},"是否必選"),Object(o["createElementVNode"])("th",{class:"fs-small text-end"},"數量控管"),Object(o["createElementVNode"])("th",{class:"fs-small"},"操作")])],-1)),ie=["id"],le={class:"d-flex align-items-center"},me=x(()=>Object(o["createElementVNode"])("i",{class:"lab las la-braille moveIcon drag-handle fs-medium"},null,-1)),pe={class:"flex-grow-1 text-center fs-small"},ue={key:0,class:"d-column"},be=["id"],Oe=["data-bs-target","aria-controls"],ge={class:"text-center"},he={class:"text-end"},Ee={class:"d-center flex-wrap"},je=["onClick"],Ne=x(()=>Object(o["createElementVNode"])("i",{class:"ri-pencil-line me-1"},null,-1)),ye=["onClick"],Ve=x(()=>Object(o["createElementVNode"])("img",{class:"me-1",src:D.a,alt:"刪除"},null,-1));function Ce(e,t,a,c,n,s){const d=Object(o["resolveComponent"])("draggable");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",A,[Object(o["createElementVNode"])("div",T,[n.comboList.length>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",k,[Object(o["createElementVNode"])("div",S,[Object(o["createElementVNode"])("div",w,[Object(o["createElementVNode"])("div",R,[L,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc p-0 ms-1","data-sort-category":"category","data-sort-item":"name",onClick:t[0]||(t[0]=(...e)=>s.sortData&&s.sortData(...e))})])]),Object(o["createElementVNode"])("div",M,[Object(o["createElementVNode"])("div",P,[B,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc p-0 ms-1","data-sort-item":"id",onClick:t[1]||(t[1]=(...e)=>s.sortData&&s.sortData(...e))})])]),Object(o["createElementVNode"])("div",U,[Object(o["createElementVNode"])("div",$,[G,Object(o["createElementVNode"])("button",{type:"button",class:"btn ri-sort-desc p-0 ms-1","data-sort-item":"name",onClick:t[2]||(t[2]=(...e)=>s.sortData&&s.sortData(...e))})])]),q,F,K]),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(n.comboList,(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:e.id},[Object(o["createElementVNode"])("div",H,[Object(o["createElementVNode"])("div",W,Object(o["toDisplayString"])(e.category.name),1),Object(o["createElementVNode"])("div",Y,Object(o["toDisplayString"])(e.id),1),Object(o["createElementVNode"])("div",J,Object(o["toDisplayString"])(e.name),1),Object(o["createElementVNode"])("div",X,Object(o["toDisplayString"])(n.truncateString(e.taste_names,10)),1),Object(o["createElementVNode"])("div",z,[Object(o["createElementVNode"])("button",{class:"accordion-button d-end collapsed bg-white p-2 shadow-none",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapse"+e.id,"aria-expanded":"false","aria-controls":"collapse"+e.id}," 詳細資料 ",8,Q)]),Object(o["createElementVNode"])("div",Z,[Object(o["createElementVNode"])("button",{type:"button",class:"btn operate-btn d-center m-1",onClick:t=>s.deleteData(e.id)},[te,Object(o["createTextVNode"])(" 刪除 ")],8,ee)])]),Object(o["createElementVNode"])("div",{id:"collapse"+e.id,class:"accordion-collapse collapse","aria-labelledby":"heading1","data-bs-parent":"#webplatform"},[Object(o["createElementVNode"])("div",oe,[Object(o["createElementVNode"])("div",ce,[Object(o["createElementVNode"])("button",{class:"btn btn-primary text-white px-3 py-1",type:"button","data-bs-toggle":"modal","data-bs-target":"#setCombo",onClick:t=>s.addGroup(e)}," + 新增群組 ",8,ne)]),Object(o["createElementVNode"])("div",se,[Object(o["createElementVNode"])("table",de,[re,Object(o["createVNode"])(d,Object(o["mergeProps"])({tag:"tbody",modelValue:n.groupList[e.id],"onUpdate:modelValue":t=>n.groupList[e.id]=t},s.dragOptions,{"item-key":"id",handle:".drag-handle",onStart:s.closeAccordion,onEnd:t=>s.updateGroupPosition(n.groupList[e.id],e.id)}),{item:Object(o["withCtx"])(({element:t,index:a})=>[Object(o["createElementVNode"])("tr",{id:t.id},[Object(o["createElementVNode"])("td",null,[Object(o["createElementVNode"])("div",le,[me,Object(o["createElementVNode"])("span",pe,Object(o["toDisplayString"])(t.name),1)])]),Object(o["createElementVNode"])("td",null,[n.groupItems[`${t.id}${t.name}`]?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ue,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(n.groupItems[`${t.id}${t.name}`].firstThreeItems,e=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"item",key:e.id},[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.is_default?"✓":"-"),1),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.id)+Object(o["toDisplayString"])(e.name),1),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.quantity),1),Object(o["createElementVNode"])("span",null,"$ "+Object(o["toDisplayString"])(e.additional_price),1)]))),128)),t.items.length>3?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:0,id:"collapse-group"+t.id,class:"accordion-collapse collapse",name:"collapse"},[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(n.groupItems[`${t.id}${t.name}`].extraItem,e=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"extraItem",key:e.id},[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.is_default?"✓":"-"),1),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.id)+Object(o["toDisplayString"])(e.name),1),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.quantity),1),Object(o["createElementVNode"])("span",null,"$ "+Object(o["toDisplayString"])(e.additional_price),1)]))),128))],8,be)):Object(o["createCommentVNode"])("",!0)])):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("td",null,[Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])(["d-center",{invisible:t.items.length<=3}])},[Object(o["createElementVNode"])("button",{class:"accordion-button shadow-none bg-white p-2 border rounded",name:"accordion-btn",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapse-group"+t.id,"aria-expanded":"false","aria-controls":"collapse-group"+t.id}," 展開群組品項 ",8,Oe)],2)]),Object(o["createElementVNode"])("td",ge,Object(o["toDisplayString"])(t.is_need_choosed?"是":"否"),1),Object(o["createElementVNode"])("td",he,[Object(o["createElementVNode"])("p",null," 同品項最高可選數量 "+Object(o["toDisplayString"])(t.same_item_max_quantity),1),Object(o["createElementVNode"])("p",null," 群組品項最高可選數量 "+Object(o["toDisplayString"])(t.item_max_quantity),1),Object(o["createElementVNode"])("p",null," 群組品項最低可選數量 "+Object(o["toDisplayString"])(t.item_min_quantity),1)]),Object(o["createElementVNode"])("td",null,[Object(o["createElementVNode"])("div",Ee,[Object(o["createElementVNode"])("button",{type:"button",class:"btn operate-btn d-center m-1","data-bs-toggle":"modal","data-bs-target":"#setCombo",onClick:a=>s.setEditData(e,t)},[Ne,Object(o["createTextVNode"])("編輯 ")],8,je),Object(o["createElementVNode"])("button",{type:"button",class:"btn operate-btn d-center m-1",onClick:a=>s.deleteData(e.id,t.id)},[Ve,Object(o["createTextVNode"])(" 刪除 ")],8,ye)])])],8,ie)]),_:2},1040,["modelValue","onUpdate:modelValue","onStart","onEnd"])])])])],8,ae)],64))),128))])):Object(o["createCommentVNode"])("",!0)])])}var fe=a("55cb"),_e=(a("0d32"),a("31c3")),Ie=a("b76a"),ve=a.n(Ie),De=a("5cc4"),xe=a("1970");const Ae=e=>new Promise((t,a)=>{xe["a"].post("/v1/product/combo/groups",e).then(e=>{t(e)}).catch(e=>{a(e)})}),Te=e=>new Promise((t,a)=>{xe["a"].patch("/v1/product/combo/group",e).then(e=>{t(e)}).catch(e=>{a(e)})}),ke=e=>new Promise((t,a)=>{xe["a"].delete("/v1/product/combo/groups",e).then(e=>{t(e)}).catch(e=>{a(e)})}),Se=e=>new Promise((t,a)=>{xe["a"].patch("/v1/product/combo/group/position",e).then(e=>{t(e)}).catch(e=>{a(e)})});var we=a("dd88"),Re=a("d0db"),Le={data(){return{delBtnLen:"",groupList:{},groupItems:{},tempData:De,comboList:[],truncateString:Re["a"]}},components:{draggable:ve.a},provide(){return{translate:this.translate}},emits:["switchSetType"],inject:["searchData"],computed:{...Object(_["c"])(["combos"]),dragOptions(){return{animation:200,group:"description",ghostClass:"ghost"}}},watch:{combos:{deep:!0,immediate:!0,handler(e){this.comboList=e?JSON.parse(JSON.stringify(e)):[],this.comboList.forEach(e=>{this.groupList[e.id]=[...e.groups],e.groups.forEach(e=>{this.groupItems[`${e.id}${e.name}`]={firstThreeItems:e.items.slice(0,3),extraItem:e.items.length>3?e.items.slice(3):null}})})}}},methods:{async updateGroupPosition(e,t){this.$store.dispatch("setLoading");const{companyId:a}=this.searchData,o={company_id:a,id:t,groups:e.map((e,t)=>({id:""+e.id,position_id:t+1}))};console.log("🚀  params:",o);try{const e=await Se(o);console.log(e)}catch(c){console.log(c)}this.$store.dispatch("hideLoading")},closeAccordion(){const e=document.querySelectorAll("[name='collapse'].show"),t=document.querySelectorAll("[name^='accordion-btn']:not(.collapsed)");e.length>0&&Array.from(e).forEach(e=>{e.classList.remove("show")}),t.length>0&&Array.from(t).forEach(e=>{e.classList.add("collapsed")})},setEditData(e,t){console.log("🚀  editData:",t);const a={id:e.id,name:e.name,positionId:t.position_id};this.$emit("switchSetType","editGroup"),this.$store.commit("SET_GROUP_EDIT_DATA",t),this.$store.commit("SET_GROUP_COMBO_INFO",a)},addGroup(e){const t={id:e.id,name:e.name,positionId:e.groups.length+1};this.$emit("switchSetType","createGroup"),this.$store.commit("SET_GROUP_COMBO_INFO",t)},async deleteData(e,t=null){this.$store.dispatch("setLoading");const a={company_id:this.searchData.companyId,id:e,...t&&{group_id:t}};try{const e=await ke(a);console.log(e),204===e.status&&await this.$store.dispatch("getCombos",{company_id:this.searchData.companyId}),this.$store.dispatch("hideLoading")}catch(o){Object(_e["e"])("無法刪除!","請聯絡客服人員"),console.log(o),this.$store.dispatch("hideLoading")}},sortData(e){this.comboList=JSON.parse(JSON.stringify(Object(we["a"])(e,this.comboList)))}}},Me=(a("31bd"),a("6b0d")),Pe=a.n(Me);const Be=Pe()(Le,[["render",Ce],["__scopeId","data-v-69174a88"]]);var Ue=Be;const $e=e=>(Object(o["pushScopeId"])("data-v-6a8aab8a"),e=e(),Object(o["popScopeId"])(),e),Ge={class:"modal fade",id:"setCombo","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"setComboLabel","aria-hidden":"true","data-bs-focus":"false","data-bs-backdrop":"static"},qe={class:"modal-dialog modal-lg modal-dialog-scrollable modal-fullscreen-xl-down"},Fe={class:"modal-content"},Ke={class:"modal-header mb-2"},He={class:"fs-title fw-normal",id:"setComboLabel"},We={class:"modal-body"},Ye={class:"container-fluid"},Je=$e(()=>Object(o["createElementVNode"])("h2",{class:"fs-medium"},"基本資料",-1)),Xe={class:"row item-spacing"},ze=$e(()=>Object(o["createElementVNode"])("div",{class:"col-2 text-end"},[Object(o["createElementVNode"])("span",{class:"text-danger"},"*"),Object(o["createTextVNode"])(" 類別 ")],-1)),Qe={class:"col-4"},Ze=$e(()=>Object(o["createElementVNode"])("option",{selected:"",value:"",disabled:""},"請選擇類別",-1)),et=["value"],tt={class:"row item-spacing"},at=$e(()=>Object(o["createElementVNode"])("div",{class:"col-2 text-end"},[Object(o["createElementVNode"])("span",{class:"text-danger"},"*"),Object(o["createTextVNode"])(" 商品 ")],-1)),ot={class:"col-8"},ct={class:"row"},nt={class:"col"},st=$e(()=>Object(o["createElementVNode"])("option",{selected:"",value:"",disabled:""},"請選擇商品",-1)),dt=["value"],rt=$e(()=>Object(o["createElementVNode"])("div",{class:"col d-flex align-items-end"},null,-1)),it={key:0,class:"fs-medium"},lt={class:"container-fluid py-4 border mt-2"},mt={class:"d-flex align-items-center w-50"},pt=$e(()=>Object(o["createElementVNode"])("p",{class:"text-nowrap me-3"},[Object(o["createElementVNode"])("span",{class:"text-danger"},"*"),Object(o["createTextVNode"])(" 群組名稱 ")],-1)),ut={class:"p-3 bg-gray-light border-bottom"},bt={key:0,class:"accordion",id:"detailAccordion"},Ot={class:"container-fluid py-4 border border-top-0"},gt={class:"row align-items-center"},ht={class:"col-1 text-center"},Et={class:"col-4"},jt=["onUpdate:modelValue"],Nt={class:"col-2"},yt={class:"col-2"},Vt={class:"col-2"},Ct=["data-bs-target","aria-controls"],ft={class:"col-1 d-flex align-items-center"},_t=["onClick"],It=["id"],vt={class:"p-3 bg-gray-light"},Dt={class:"modal-footer justify-content-center border-top-0"};function xt(e,t,a,c,n,s){const d=Object(o["resolveComponent"])("ComboDataSet");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ge,[Object(o["createElementVNode"])("div",qe,[Object(o["createElementVNode"])("div",Fe,[Object(o["createElementVNode"])("div",Ke,[Object(o["createElementVNode"])("h2",He,Object(o["toDisplayString"])(s.title),1)]),Object(o["createElementVNode"])("div",We,[Object(o["createElementVNode"])("div",Ye,["create"===s.setType?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[Je,Object(o["createElementVNode"])("div",Xe,[ze,Object(o["createElementVNode"])("div",Qe,[Object(o["withDirectives"])(Object(o["createElementVNode"])("select",{class:"form-select","onUpdate:modelValue":t[0]||(t[0]=e=>n.category=e),onChange:t[1]||(t[1]=(...e)=>s.searchProduct&&s.searchProduct(...e))},[Ze,(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.comboProductCategory,(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("option",{key:t,value:e.id},Object(o["toDisplayString"])(e.name),9,et))),128))],544),[[o["vModelSelect"],n.category]])])]),Object(o["createElementVNode"])("div",tt,[at,Object(o["createElementVNode"])("div",ot,[Object(o["createElementVNode"])("div",ct,[Object(o["createElementVNode"])("div",nt,[Object(o["withDirectives"])(Object(o["createElementVNode"])("select",{class:"form-select","onUpdate:modelValue":t[2]||(t[2]=e=>n.product=e)},[st,(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.uncreatedCombos,(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("option",{key:t,value:{id:e.product_id,name:e.product_name}},Object(o["toDisplayString"])(e.product_name),9,dt))),128))],512),[[o["vModelSelect"],n.product]])]),rt])])]),n.product&&n.category&&"create"===s.setType?(Object(o["openBlock"])(),Object(o["createElementBlock"])("h2",it," 套餐資料設定 ")):Object(o["createCommentVNode"])("",!0)],64)):Object(o["createCommentVNode"])("",!0),n.product&&n.category||"create"!==s.setType?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:1},[Object(o["createElementVNode"])("div",lt,[Object(o["createElementVNode"])("div",mt,[pt,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",class:"form-control fs-small",placeholder:"請輸入群組名稱","onUpdate:modelValue":t[3]||(t[3]=e=>n.groupName=e)},null,512),[[o["vModelText"],n.groupName]])])]),Object(o["createElementVNode"])("div",ut,[Object(o["createVNode"])(d,{dataIndex:0,groupName:n.groupName,onAddData:s.updateData,ref:"addData"},null,8,["groupName","onAddData"])]),"create"==s.setType&&n.addedGroup.length>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",bt,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(n.addedGroup,(e,a)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:e},[Object(o["createElementVNode"])("div",Ot,[Object(o["createElementVNode"])("div",gt,[Object(o["createElementVNode"])("div",ht,"0"+Object(o["toDisplayString"])(a+1),1),Object(o["createElementVNode"])("div",Et,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",class:"form-control",placeholder:"請輸入群組名稱","onUpdate:modelValue":t=>e.groupName=t},null,8,jt),[[o["vModelText"],e.groupName]])]),Object(o["createElementVNode"])("div",Nt," 群組商品"+Object(o["toDisplayString"])(e.groupProductRequired?"必選":"非必選"),1),Object(o["createElementVNode"])("div",yt," 共 "+Object(o["toDisplayString"])(e.productList.length)+" 品項 ",1),Object(o["createElementVNode"])("div",Vt,[Object(o["createElementVNode"])("button",{class:"accordion-button bg-white shadow-none collapsed text-nowrap",type:"button","data-bs-toggle":"collapse","data-bs-target":"#comboDetail"+(a+1),"aria-controls":"comboDetail"+(a+1),"aria-expanded":"false"}," 詳細資料 ",8,Ct)]),Object(o["createElementVNode"])("div",ft,[Object(o["createElementVNode"])("img",{class:"me-1",role:"button",src:D.a,alt:"刪除",onClick:e=>s.delGroup(a)},null,8,_t)])])]),Object(o["createElementVNode"])("div",{id:"comboDetail"+(a+1),class:"accordion-collapse collapse bg-gray-light","data-bs-parent":"#detailAccordion"},[Object(o["createElementVNode"])("div",vt,[Object(o["createVNode"])(d,{dataIndex:a+1,addedData:e,groupName:e.groupName,onUpdateAddedData:s.updateAddedData,onAddedUnValidate:t[4]||(t[4]=e=>n.addedValidate=!1),ref_for:!0,ref:"addedData"},null,8,["dataIndex","addedData","groupName","onUpdateAddedData"])])],8,It)],64))),128))])):Object(o["createCommentVNode"])("",!0)],64)):Object(o["createCommentVNode"])("",!0)])]),Object(o["createElementVNode"])("div",Dt,[Object(o["createElementVNode"])("button",{type:"button",onClick:t[5]||(t[5]=e=>s.closeModal()),class:"btn btn-outline-primary cancel-btn"}," 取消 "),Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-primary confirm-btn",onClick:t[6]||(t[6]=e=>s.saveData())}," 儲存 ")])])])])}a("14d9");var At=a("623c"),Tt=a.n(At);const kt=e=>(Object(o["pushScopeId"])("data-v-492b0a74"),e=e(),Object(o["popScopeId"])(),e),St={class:"d-flex align-items-start"},wt=kt(()=>Object(o["createElementVNode"])("div",{class:"d-flex text-nowrap"},[Object(o["createElementVNode"])("span",{class:"text-danger"},"*"),Object(o["createElementVNode"])("span",{class:"ms-1"},"數量控管")],-1)),Rt=["data-bs-title","id"],Lt={class:"d-column container-fluid"},Mt={class:"row my-2 align-items-center mt-0"},Pt=kt(()=>Object(o["createElementVNode"])("div",{class:"col-2 col-xl-3 col-xxxl-2 text-end"},[Object(o["createElementVNode"])("label",{class:"field-name fs-small text-nowrap",for:"display_name"},"群組商品是否必選")],-1)),Bt={class:"col"},Ut={class:"form-check form-check-inline"},$t=["name","id"],Gt=["for"],qt={class:"form-check form-check-inline"},Ft=["name","id"],Kt=["for"],Ht={class:"row my-2 align-items-center"},Wt=kt(()=>Object(o["createElementVNode"])("div",{class:"col-2 col-xl-3 col-xxxl-2 text-end"},[Object(o["createElementVNode"])("label",{class:"field-name fs-small text-nowrap",for:"display_name"},"同品項最高可選數量")],-1)),Yt={class:"col-1"},Jt={class:"row my-2 align-items-center"},Xt=kt(()=>Object(o["createElementVNode"])("div",{class:"col-2 col-xl-3 col-xxxl-2 text-end"},[Object(o["createElementVNode"])("label",{class:"field-name fs-small text-nowrap",for:"display_name"},"群組品項最高可選數量")],-1)),zt={class:"col-1"},Qt={class:"row my-2 align-items-center"},Zt=kt(()=>Object(o["createElementVNode"])("div",{class:"col-2 col-xl-3 col-xxxl-2 text-end"},[Object(o["createElementVNode"])("label",{class:"field-name fs-small text-nowrap",for:"display_name"},"群組品項最低可選數量")],-1)),ea={class:"col-1"},ta=["disabled"],aa=kt(()=>Object(o["createElementVNode"])("span",{class:"text-danger ms-1"},"*",-1)),oa=kt(()=>Object(o["createElementVNode"])("span",{class:"ms-1"},"群組品項",-1)),ca={class:"container-fluid"},na=Object(o["createStaticVNode"])('<div class="row item-spacing-medium" data-v-492b0a74><div class="col-1" data-v-492b0a74></div><div class="col-4" data-v-492b0a74><span class="fs-small" data-v-492b0a74>商品編號　商品名稱</span></div><div class="col-1 fs-small text-center" data-v-492b0a74>預設</div><div class="col-1 fs-small text-end" data-v-492b0a74>數量</div><div class="col-1 fs-small text-end ms-5" data-v-492b0a74>加價</div></div>',1),sa={class:"row item-spacing-medium"},da={class:"col-1 d-end pe-0"},ra=["id"],ia={class:"col-4"},la={class:"input-group border rounded"},ma=["id","value","onClick"],pa=kt(()=>Object(o["createElementVNode"])("span",{class:"input-group-text ri-arrow-down-s-line bg-white border-0 rounded"},null,-1)),ua={class:"dropdown-menu"},ba={class:"container-fluid"},Oa={class:"row"},ga={class:"col-5 border-end px-0"},ha={class:"searchlist-input px-2"},Ea={class:"dataList mt-2"},ja=["onClick"],Na={key:0,class:"las la-angle-right"},ya={class:"col ps-0"},Va={class:"searchlist-input ps-2"},Ca={class:"dataList mt-2"},fa=["onClick"],_a={class:"col-1 d-center"},Ia=["onUpdate:modelValue","onClick","name","disabled","checked"],va={class:"col-1 text-center"},Da=["onChange","disabled","onUpdate:modelValue"],xa={class:"col-1 text-center ms-5"},Aa=["onChange","onUpdate:modelValue","disabled"],Ta={class:"col"},ka=["onClick"],Sa={class:"row item-spacing-medium mb-0"},wa=kt(()=>Object(o["createElementVNode"])("div",{class:"col-1"},null,-1)),Ra={class:"col-6"},La={class:"d-flex align-items-center"},Ma=kt(()=>Object(o["createElementVNode"])("span",{class:"fs-small ms-2"},"新增商品",-1)),Pa={key:0,class:"col ps-4 ps-xxxl-5"};function Ba(e,t,a,c,n,s){const d=Object(o["resolveComponent"])("draggable");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createElementVNode"])("div",St,[wt,Object(o["createElementVNode"])("img",{class:"m-1",src:Tt.a,"data-bs-toggle":"tooltip","data-bs-placement":"right","data-bs-html":"true","data-bs-title":"\n      <p>數量控管說明</p> \n      <p>1. 同品項最高可選數量：單樣商品最高可以選擇的數量。</p> \n      <p>2. 群組品項最高可選數量：表示這個群組最多可以選擇的數量。</p> \n      <p>3. 群組品項最低可選數量：數量設定3，表示這個群組最少一定要選擇3個。</p> \n      <p>挑選完商品後點擊新增商品可以再新增子項商品。</p> \n      ",id:"tooltip"+a.dataIndex},null,8,Rt),Object(o["createElementVNode"])("div",Lt,[Object(o["createElementVNode"])("div",Mt,[Pt,Object(o["createElementVNode"])("div",Bt,[Object(o["createElementVNode"])("div",Ut,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{class:"form-check-input",type:"radio",name:"radioOption"+a.dataIndex,id:`radioOption${a.dataIndex}true`,value:!0,onClick:t[0]||(t[0]=e=>n.groupItemMinCount=1),"onUpdate:modelValue":t[1]||(t[1]=e=>n.groupProductRequired=e)},null,8,$t),[[o["vModelRadio"],n.groupProductRequired]]),Object(o["createElementVNode"])("label",{class:"form-check-label fw-normal fs-small",for:`radioOption${a.dataIndex}true`},"是",8,Gt)]),Object(o["createElementVNode"])("div",qt,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{class:"form-check-input",type:"radio",name:"radioOption"+a.dataIndex,id:`radioOption${a.dataIndex}false`,value:!1,onClick:t[2]||(t[2]=e=>n.groupItemMinCount=0),"onUpdate:modelValue":t[3]||(t[3]=e=>n.groupProductRequired=e)},null,8,Ft),[[o["vModelRadio"],n.groupProductRequired]]),Object(o["createElementVNode"])("label",{class:"form-check-label fw-normal fs-small",for:`radioOption${a.dataIndex}false`},"否",8,Kt)])])]),Object(o["createElementVNode"])("div",Ht,[Wt,Object(o["createElementVNode"])("div",Yt,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",class:"form-control text-center fs-small",onChange:t[4]||(t[4]=e=>s.validateNumber(e,null,"sameItemMaxCount")),"onUpdate:modelValue":t[5]||(t[5]=e=>n.sameItemMaxCount=e)},null,544),[[o["vModelText"],n.sameItemMaxCount]])])]),Object(o["createElementVNode"])("div",Jt,[Xt,Object(o["createElementVNode"])("div",zt,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",class:"form-control text-center fs-small",onChange:t[6]||(t[6]=e=>s.validateNumber(e,null,"groupItemMaxCount")),"onUpdate:modelValue":t[7]||(t[7]=e=>n.groupItemMaxCount=e)},null,544),[[o["vModelText"],n.groupItemMaxCount]])])]),Object(o["createElementVNode"])("div",Qt,[Zt,Object(o["createElementVNode"])("div",ea,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",class:"form-control text-center fs-small",disabled:!n.groupProductRequired,onChange:t[8]||(t[8]=e=>s.validateNumber(e,null,"groupItemMinCount")),"onUpdate:modelValue":t[9]||(t[9]=e=>n.groupItemMinCount=e)},null,40,ta),[[o["vModelText"],n.groupItemMinCount]])])])])]),aa,oa,Object(o["createElementVNode"])("div",ca,[na,Object(o["createVNode"])(d,Object(o["mergeProps"])({modelValue:n.productList,"onUpdate:modelValue":t[12]||(t[12]=e=>n.productList=e)},s.dragOptions,{"item-key":"order",handle:".drag-handle",onEnd:t[13]||(t[13]=e=>s.initDrowDown())}),{item:Object(o["withCtx"])(({element:e,index:c})=>[Object(o["createElementVNode"])("div",sa,[Object(o["createElementVNode"])("div",da,[Object(o["createElementVNode"])("i",{class:"lab las la-braille moveIcon drag-handle fs-title me-2",id:e.order},null,8,ra)]),Object(o["createElementVNode"])("div",ia,[Object(o["createElementVNode"])("div",la,[Object(o["createElementVNode"])("input",{type:"text",id:`dropdown${c}${a.dataIndex}`,class:"form-control border-start-0 border-0 fs-small","data-bs-toggle":"dropdown","data-bs-auto-close":"outside","aria-expanded":"false",placeholder:"請選擇商品",role:"button","aria-label":"請選擇商品",value:e.product.name?`${e.product.id}　${e.product.name}`:"請選擇商品",onClick:t=>s.setCategory(e.product.name),readonly:""},null,8,ma),pa,Object(o["createElementVNode"])("div",ua,[Object(o["createElementVNode"])("div",ba,[Object(o["createElementVNode"])("div",Oa,[Object(o["createElementVNode"])("div",ga,[Object(o["createElementVNode"])("div",ha,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",placeholder:"查詢類別關鍵字","onUpdate:modelValue":t[10]||(t[10]=e=>n.categoryKeyWord=e),class:"form-control form-control-sm border search-countryList"},null,512),[[o["vModelText"],n.categoryKeyWord]])]),Object(o["createElementVNode"])("ul",Ea,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(s.filterCategory,e=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:e.category_id,class:Object(o["normalizeClass"])(["d-between",{active:e.category_id===n.selectedCategory}]),onClick:t=>n.selectedCategory=e.category_id},[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.category_name)+" ",1),e.category_id===n.selectedCategory?(Object(o["openBlock"])(),Object(o["createElementBlock"])("i",Na)):Object(o["createCommentVNode"])("",!0)],10,ja))),128))])]),Object(o["createElementVNode"])("div",ya,[Object(o["createElementVNode"])("div",Va,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",placeholder:"查詢商品關鍵字","onUpdate:modelValue":t[11]||(t[11]=e=>n.productKeyWord=e),class:"form-control form-control-sm border search-countryList"},null,512),[[o["vModelText"],n.productKeyWord]])]),Object(o["createElementVNode"])("ul",Ca,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(s.groupItems,t=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{class:Object(o["normalizeClass"])(["form-check",{active:e.product.name&&e.product.name==t.product_name}]),key:t.product_id,onClick:e=>s.setProduct(t,c)},Object(o["toDisplayString"])(t.product_name),11,fa))),128))])])])])])])]),Object(o["createElementVNode"])("div",_a,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t=>e.default=t,onClick:e=>s.clickCheckBox(e,c),name:"checkbox"+a.dataIndex,disabled:!e.product,checked:e.default},null,8,Ia),[[o["vModelCheckbox"],e.default]])]),Object(o["createElementVNode"])("div",va,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",class:"form-control text-end fs-small",onChange:e=>s.validateNumber(e,c,"count"),disabled:!e.default||!e.product,"onUpdate:modelValue":t=>e.count=t},null,40,Da),[[o["vModelText"],e.count]])]),Object(o["createElementVNode"])("div",xa,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"number",class:"form-control text-end fs-small",onChange:e=>s.validateNumber(e,c,"extraCharge"),"onUpdate:modelValue":t=>e.extraCharge=t,disabled:!e.product},null,40,Aa),[[o["vModelText"],e.extraCharge]])]),Object(o["createElementVNode"])("div",Ta,[Object(o["createElementVNode"])("i",{class:"ri-indeterminate-circle-fill fs-4",role:"button",onClick:e=>s.setProductList("reduce",c)},null,8,ka)])])]),_:1},16,["modelValue"]),Object(o["createElementVNode"])("div",Sa,[wa,Object(o["createElementVNode"])("div",Ra,[Object(o["createElementVNode"])("div",La,[Object(o["createElementVNode"])("i",{class:"ri-add-circle-fill fs-medium",role:"button",onClick:t[14]||(t[14]=e=>s.setProductList("add"))}),Ma])]),"create"==s.setType&&0===a.dataIndex?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Pa,[Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-primary ms-5",onClick:t[15]||(t[15]=e=>s.addGroup())}," 新增完成 ")])):Object(o["createCommentVNode"])("",!0)])])],64)}a("13d5");var Ua={data(){return{groupProductRequired:!1,sameItemMaxCount:0,groupItemMaxCount:1,groupItemMinCount:0,productList:[{order:1,default:!1,product:"",count:1,extraCharge:0}],selectedCategory:"",categoryKeyWord:"",productKeyWord:"",dropdownMap:{}}},components:{draggable:ve.a},emits:["addData","updateAddedData","addedUnValidate"],inject:["searchData","setType"],props:{dataIndex:{type:Number},groupName:{type:String},addedData:{type:Object}},computed:{...Object(_["c"])(["groupEditData","categoriesWithProducts"]),dragOptions(){return{animation:200,group:"description",ghostClass:"ghost"}},filterCategory(){return this.categoriesWithProducts.filter(e=>e.category_name.match(this.categoryKeyWord))},groupItems(){if(this.selectedCategory){const e=this.categoriesWithProducts.find(e=>e.category_id===this.selectedCategory).products;return e.filter(e=>e.product_name.match(this.productKeyWord))}return[]},setData(){return{groupName:this.groupName,groupProductRequired:this.groupProductRequired,sameItemMaxCount:this.sameItemMaxCount,groupItemMaxCount:this.groupItemMaxCount,groupItemMinCount:this.groupItemMinCount,productList:[...this.productList]}},isAddingData(){const e={groupProductRequired:this.groupProductRequired,sameItemMaxCount:this.sameItemMaxCount,groupItemMaxCount:this.groupItemMaxCount,groupItemMinCount:this.groupItemMinCount,productList:[...this.productList],selectedCategory:"",categoryKeyWord:"",productKeyWord:"",dropdownMap:{}};return JSON.stringify(this.$options.data())!==JSON.stringify(e)},categoryIdMap(){return this.categoriesWithProducts.length>0?this.categoriesWithProducts.reduce((e,t)=>(t.products.map(a=>{e[a.product_name]=t.category_id}),e),{}):{}}},watch:{groupProductRequired:{handler(e){this.addedData||"editGroup"===this.setType||(this.groupItemMinCount=e?1:0)}},groupEditData:{deep:!0,immediate:!0,handler(e){if(Object.keys(e).length>0){const{is_need_choosed:t,item_max_quantity:a,item_min_quantity:o,same_item_max_quantity:c,items:n}=e;this.groupProductRequired=t,this.sameItemMaxCount=c,this.groupItemMaxCount=a,this.groupItemMinCount=o,this.productList=n.map(e=>({order:e.position_id,default:e.is_default,product:{id:e.id,name:e.name},count:e.quantity,extraCharge:e.additional_price})),this.initDrowDown()}}}},methods:{addGroup(){const e=this.validateData();e&&(this.$emit("addData",this.setData),Object.assign(this.$data,this.$options.data()))},clickCheckBox(e,t){this.productList[t].product?this.productList[t].count=1:(e.preventDefault(),Object(_e["e"])("無法勾選","請先選擇商品"))},validateData(){const{groupName:e,productList:t,sameItemMaxCount:a,groupItemMaxCount:o,groupItemMinCount:c}=this.setData;if(console.log("驗證資料",this.setData),!e)return Object(_e["e"])("無法新增","套餐資料設定的群組名稱未填寫"),!1;const n=t.filter(e=>!e.product.name);if(n.length>0)return Object(_e["e"])("無法新增",`<p>套餐資料設定-${e}</p>有商品資料未填寫`),!1;const s=[],d={};if(t.forEach(e=>{d[e.product.name]?s.push(e.product.name):d[e.product.name]=!0}),s.length>0)return Object(_e["e"])("無法新增",`<p>套餐資料設定-${e}</p>有商品資料重覆(${s.join("、")})`),!1;const r=t.filter(e=>e.default),i=r.filter(e=>parseInt(e.count)>a);if(i.length>0&&this.sameItemMaxCount>0){const t=i.map(e=>e.product.name);return Object(_e["e"])("無法新增",`<p>套餐資料設定-${e}</p>\n          <p>${t.join("、")}數量超過同品項最高可選數量(${a})</p>`),!1}if(r.length>0){const t=r.reduce((e,t)=>e+parseInt(t.count),0);if(t>o)return Object(_e["e"])("無法新增",`<p>套餐資料設定-${e}</p>\n          <p>所有啟用「預設」的群組品項總數量(${t})\n          超過群組品項最高可選數量(${o})</p>`),!1}return!(this.groupProductRequired&&r.length<c)||(Object(_e["e"])("無法新增",`<p>套餐資料設定-${e}</p>\n          <p>所有啟用「預設」的群組品項總數量(${r.length})\n          小於群組品項最低可選數量(${c})</p>`),!1)},validateNumber(e,t=null,a=null){const o=/^[^+-][0-9]*$/,c=e.target.value;if(o.test(c)){if("extraCharge"!==a&&c<1){if(null!==t)return Object(_e["i"])("無法填寫","套餐資料設定-群組品項清單中，有數量小於1的資料"),void(this.productList[t][a]=1);"groupItemMaxCount"===a?Object(_e["i"])("無法填寫","群組品項最高可選數量必需至少為1"):"groupItemMinCount"===a&&this.groupProductRequired&&Object(_e["i"])("無法填寫","群組商品為必選，群組品項最低可選數量必需至少為1"),this[a]=1}else if("extraCharge"!==a&&c>99&&null!==t)return Object(_e["i"])("無法輸入",`數量(${c})不可大於99`),void(this.productList[t][a]=1)}else null!==t?this.productList[t][a]="count"===a?1:0:this[a]="sameItemMaxCount"===a?0:1,Object(_e["i"])("輸入錯誤","請輸入數字")},reset(){Object.assign(this.$data,this.$options.data()),this.initDrowDown()},setProductList(e,t=null){if("add"===e){const e=this.productList[this.productList.length-1];this.productList.push({order:e?e.order+1:1,default:!1,product:"",count:1,extraCharge:0})}else this.productList.splice(t,1);this.initDrowDown()},setCategory(e){console.log(this.categoryIdMap),this.selectedCategory=e?this.categoryIdMap[e]:""},async setProduct(e,t){this.dropdownMap[`dropdown${t}${this.dataIndex}`]||await this.initDrowDown(),this.productList[t].product={id:e.product_id,name:e.product_name},this.dropdownMap[`dropdown${t}${this.dataIndex}`].hide()},sendAddedUpdateData(){if(!this.addedData)return;const e=this.validateData();e?this.$emit("updateAddedData",{data:this.setData,index:this.dataIndex}):this.$emit("addedUnValidate")},initDrowDown(){return new Promise((e,t)=>{this.$nextTick(()=>{const t=document.querySelectorAll("[id^='dropdown']");t.length>0&&t&&(t.forEach(e=>{this.dropdownMap[e.id]=Object(fe["a"])(e.id)}),e())})})}},created(){if(this.addedData){console.log("🚀  this.addedData:",this.addedData);const{groupProductRequired:e,sameItemMaxCount:t,groupItemMaxCount:a,groupItemMinCount:o,productList:c}=this.addedData;this.groupProductRequired=e,this.sameItemMaxCount=t,this.groupItemMaxCount=a,this.groupItemMinCount=o,this.productList=[...c]}},mounted(){Object(fe["c"])("tooltip"+this.dataIndex),this.initDrowDown()}};a("e560");const $a=Pe()(Ua,[["render",Ba],["__scopeId","data-v-492b0a74"]]);var Ga=$a,qa={data(){return{modal:{},editData:{},category:"",product:"",groupName:"",addedGroup:[],addedValidate:!0}},components:{draggable:ve.a,ComboDataSet:Ga},inject:["searchData","setType"],emits:["getData"],computed:{...Object(_["c"])(["groupEditData","groupComboInfo","comboProductCategory","uncreatedCombos"]),dragOptions(){return{animation:200,group:"description",ghostClass:"ghost"}},title(){return"create"===this.setType?"新增套餐":"editGroup"===this.setType?"群組品項編輯":"群組品項新增"}},watch:{groupEditData:{deep:!0,immediate:!0,handler(e){if(Object.keys(e).length>0){const{name:t}=e;this.groupName=t}}}},methods:{updateData(e){this.product&&this.category?(this.groupName="",this.addedGroup.push({...e}),console.log("🚀  this.addedGroup:",this.addedGroup)):Object(_e["e"])("無法新增","基本資料的類別或商品未填寫")},async searchProduct(){this.product="";const{companyId:e}=this.searchData,t={company_id:e,category_id:this.category};this.$store.dispatch("setLoading"),await this.$store.dispatch("getUncreatedCombos",t),this.$store.dispatch("hideLoading")},updateAddedData(e){const{data:t,index:a}=e;this.addedGroup[a-1]={...t}},async closeModal(){if(this.addedGroup.length>0){const e=await Object(_e["h"])("確定取消","取消後將清除當前填寫的資料","確定");if(!e)return}this.modal.hide()},delGroup(e){this.addedGroup.splice(e,1),this.$nextTick(()=>{const e=document.querySelectorAll("input[name='checkbox0']:checked");0!==e.length&&e.forEach(e=>e.checked=!1)})},reset(){this.category="",this.groupName="",this.product="",this.addedGroup.splice(0),this.$refs.addData&&this.$refs.addData.reset()},async saveData(){if(!this.$refs.addData)return;const{companyId:e}=this.searchData,t=e=>e.map((e,t)=>({id:e.product.id,name:e.product.name,is_default:e.default,quantity:parseInt(e.count),additional_price:e.extraCharge,position_id:t+1})),a=async(t,a)=>{console.log("🚀  params:",a);const o="editGroup"===this.setType?"編輯":"新增";try{this.$store.dispatch("setLoading");const c=await t(a);console.log(c),this.$store.dispatch("hideLoading"),204===c.status?(this.$store.dispatch("getCombos",{company_id:e}),this.modal.hide(),Object(_e["g"])(o+"成功")):Object(_e["e"])(o+"失敗",c.data.message)}catch(c){this.$store.dispatch("hideLoading"),console.log(c),Object(_e["e"])(o+"失敗","請聯絡客服人員")}};if("create"===this.setType){if(this.$refs.addData.isAddingData||this.groupName){const e=await Object(_e["h"])("","您有尚未新增完成的群組，是否放棄此群組完成新增作業","確定");if(!e)return}if(this.$refs.addedData&&this.$refs.addedData.forEach(e=>{e.sendAddedUpdateData()}),!this.addedValidate)return void(this.addedValidate=!0);const o=this.addedGroup.map((e,a)=>{const{groupName:o,sameItemMaxCount:c,groupItemMaxCount:n,groupItemMinCount:s,groupProductRequired:d,productList:r}=e;return console.log("🚀  groupItemMinCount:",s),{name:o,same_item_max_quantity:parseInt(c),item_max_quantity:parseInt(n),item_min_quantity:parseInt(s),position_id:a+1,items:t(r)}}),{id:c,name:n}=this.product,s={company_id:e,id:c,name:n,groups:o};await a(Ae,s)}else{const o=this.$refs.addData.validateData();if(!o)return;const c=(e,a)=>{const{groupName:o,sameItemMaxCount:c,groupItemMaxCount:n,groupItemMinCount:s,groupProductRequired:d,productList:r}=e;return{name:o,same_item_max_quantity:parseInt(c),item_max_quantity:parseInt(n),item_min_quantity:parseInt(s),position_id:a,items:t(r)}},{id:n,name:s,positionId:d}=this.groupComboInfo,r={company_id:e,id:n,name:s,groups:[c(this.$refs.addData.setData,d)]};if("createGroup"===this.setType)await a(Ae,r);else{const{id:t}=this.groupEditData,o={company_id:e,product_id:n,id:t,...c(this.$refs.addData.setData,d)};await a(Te,o)}}}},mounted(){const e=document.getElementById("setCombo");e.addEventListener("hide.bs.modal",()=>{this.reset(),this.$store.commit("SET_GROUP_EDIT_DATA",{})}),this.modal=Object(fe["b"])("setCombo")}};a("5ddb");const Fa=Pe()(qa,[["render",xt],["__scopeId","data-v-6a8aab8a"]]);var Ka=Fa,Ha=a("1dea"),Wa={data(){return{title:"套餐管理",items:[{text:"基本資料管理",href:""},{text:"套餐管理",active:!0}],companyKeyWord:"",selectData:{companyId:""},productId:"",productName:"",setType:"create",isEmptyData:!1}},components:{Layout:C["a"],PageHeader:f["a"],ComboList:Ue,SetCombo:Ka,BasicData:Ha["a"]},provide(){return{searchData:Object(o["computed"])(()=>this.selectData),setType:Object(o["computed"])(()=>this.setType),translate:I["a"]}},computed:{...Object(_["c"])(["companyList"])},methods:{setCompanyId(e){this.selectData.companyId=e},switchSetType(e){this.setType=e},async search(){this.$store.dispatch("setLoading");const e={company_id:this.selectData.companyId,...this.productId&&{id:this.productId},...this.productName&&{name:this.productName}};console.log(e),await this.$store.dispatch("getCombos",e),this.$store.dispatch("hideLoading")},reset(){this.productId="",this.productName=""}}};a("c0f8");const Ya=Pe()(Wa,[["render",V],["__scopeId","data-v-677e6796"]]);t["default"]=Ya},2579:function(e,t,a){"use strict";var o=a("7a23");const c={class:"row mb-lg-4 mb-5"},n={class:"col-12"},s={ref:"pageTitle",class:"page-title-box d-sm-flex align-items-center justify-content-between"},d={class:"mb-sm-0"},r={class:"page-title-right me-5"},i={class:"breadcrumb m-0"},l=["onClick"];function m(e,t,a,m,p,u){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",c,[Object(o["createElementVNode"])("div",n,[Object(o["createElementVNode"])("div",s,[Object(o["createElementVNode"])("h4",d,Object(o["toDisplayString"])(a.title),1),Object(o["createElementVNode"])("div",r,[Object(o["createElementVNode"])("ol",i,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(a.items,(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{class:"breadItem",key:t},[Object(o["createElementVNode"])("a",{onClick:a=>u.goBack(e.text,t),href:"javascript: void(0);",class:Object(o["normalizeClass"])(["text-nowrap",{active:t+1==a.items.length}])},Object(o["toDisplayString"])(e.text)+Object(o["toDisplayString"])(t+1==a.items.length?"":"　>　"),11,l)]))),128))])])],512)])])}var p={components:{},props:{title:{type:String,default:""},items:{type:Array,default:()=>[]}},methods:{goBack(e,t){0===t&&"訂貨系統"!==e&&this.$route.path.includes("orderingSystem")&&this.$router.back()}},mounted(){}},u=(a("7477"),a("6b0d")),b=a.n(u);const O=b()(p,[["render",m],["__scopeId","data-v-0a664056"]]);t["a"]=O},"2dbd":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAABHNCSVQICAgIfAhkiAAAAPlJREFUOE/tkz0OgkAQhWe10E5uIjcQCxPotvGn9Ah6A2+gR7BUbLbDxEK9Ad4EOy10fEBACIskRhMLp4Ls2++93ZkV9KESOo4tBzMi0dF78HGrXKznSwty5JCZ+IxFPytnIlOQaHlqXdhXCiLio6dcKwty5OAQJi0FIcECbu1kE+gAcMAkcokEsQmQAS2AcUF7AngSJUqc3rv3OHl6NFuO8MN7pOhu1Sp11DejqP0+qCf7Zp1q8xvdp2Gq5HunNr4ufWmirDi+1Oex/6Bfaz+eho+hDF5NOTpooI9mdnjT9ltSGk1qLGNRdYVmF7qOD0pFptrXX40pKh60D/IT6JpNSgAAAABJRU5ErkJggg=="},"31bd":function(e,t,a){"use strict";a("367a")},"367a":function(e,t,a){},"4d14":function(e,t,a){},"59eb":function(e,t,a){},"5cc4":function(e){e.exports=JSON.parse('{"combos":[{"id":"A001","name":"豬排套餐","category":{"id":"business_lunch","name":"商業午餐"},"tastes":[{"id":"t01","name":"口味"},{"id":"t02","name":"餐具"},{"id":"t03","name":"辣度"}],"taste_names":"口味, 餐具, 辣度","groups":[{"id":"cg001","name":"主餐","is_need_choosed":true,"same_item_max_quantity":21,"item_max_quantity":21,"item_min_quantity":21,"position_id":1,"items":[{"id":"cg001-1","name":"炸豬排","is_default":true,"quantity":1,"additional_price":0,"position_id":1},{"id":"cg001-2","name":"煎豬排","is_default":true,"quantity":1,"additional_price":20,"position_id":2}]},{"id":"cg002","name":"飲料","is_need_choosed":true,"same_item_max_quantity":10,"item_max_quantity":10,"item_min_quantity":10,"position_id":2,"items":[{"id":"cg002-1","name":"紅茶","is_default":false,"quantity":1,"additional_price":0,"position_id":1},{"id":"cg002-2","name":"綠茶","is_default":false,"quantity":1,"additional_price":0,"position_id":2},{"id":"cg002-3","name":"麥茶","is_default":false,"quantity":1,"additional_price":0,"position_id":3},{"id":"cg002-4","name":"奶茶","is_default":true,"quantity":10,"additional_price":10,"position_id":30},{"id":"cg002-5","name":"檸檬紅茶","is_default":true,"quantity":100,"additional_price":100,"position_id":30}]}]}]}')},"5ddb":function(e,t,a){"use strict";a("ebd9")},"623c":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAABHNCSVQICAgIfAhkiAAAAZlJREFUOE99VIFRwkAQzIcC1AqMFZgJBYgVABWIFRgrECogHRArMFZALCBMqEDoAAoIcTfzn/mc/2SG+fm7/b29/XtU4PiSJFkopaZt28ZYIw0psS8vl8tnXdcHeUzZgTiOJ2EYbqzDrjoBCJe73W5lJ3sirWLjPOkOFlVVzU2qI6KS0Wi0FfgzKueInXSc7d7bGOah7JWxjghqDgJ0bpomgheGpDs/Ho9J/GKTAfcMXKlcLaHSOyplUBpD6Rr7H+yXmqwVyr/R4kyhSoHEVCRT3E4N41PEZ/idAb7VRFR5I1TdUZFsS1pLr1Ioyj1eBmyPiqRUm4heTeBBzTahcAsvO2XSp6tEULKiNyjG9r4kgdl3itBaiSpPLhCI2PYBa3RtSEH0QKIUoLWHaI84L2MGzKMHc4TqSKH1CFf865E9x20VPpN5xoyKGcglKn5IMjO5UJ0h/+bI76EmZrx/a5558vnLeH+jAyI9bDnWwRPweYeBXXAsTH7wN8Kg9oMTLaedfhwRz/h8ZIF/RAYAQg5e17/+TrYCSfQHv0Lh01jIRaEAAAAASUVORK5CYII="},7477:function(e,t,a){"use strict";a("4d14")},7490:function(e,t,a){},"9854f":function(e,t,a){},c0f8:function(e,t,a){"use strict";a("9854f")},c457:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));const o={"當期":"PRIOR_PERIOD","同期":"SAME_PERIOD","前期":"PRIOR_PERIOD","大分類":"CATEGORY_GROUP","中分類":"CATEGORY","小分類":"CATEGORY_ITEM","商品":"PRODUCT","營業額 x 銷售量":"REVENUE_AND_SALES_VOLUME","營業額 x 毛利率":"SALES_VOLUME_AND_REVENUE","毛利率 x 銷售量":"SALES_VOLUME_AND_REVENUE","營業額 x 毛利額":"SALES_VOLUME_AND_REVENUE",NEW_CONSUMPTION:"消費新增",SALES_RETURN_REDUCTION:"銷退返還",EXCHANGE:"點數兌換",EXCHANGE_SELL_BACK:"點數兌換銷退",TRANSFER_OUT:"點數轉出",TRANSFER_IN:"點數轉入",ACTIVITY_DEDUCTION_POINTS:"活動扣點",ACTIVITY_ACCUMULATED_POINTS:"活動累點",ZERO:"點數歸零",FORCE_PRINTING:"強制列印",FORCE_INVOICING:"強制開立發票",DEFAULT_INVOICING:"預設開立發票",DEFAULT_NOT_INVOICE:"預設不開立發票",DEFAULT_PRINTING:"預設列印",DEFAULT_NOT_PRINT:"預設不列印",PRINT_DETAIL:"列印明細",PRINT_TOTAL:"列印總額",STORE_ID:"店號",STORE_SHORT_NAME:"門市簡稱",SOFTWARE_DRIVER:"軟體驅動",HARDWARE_DRIVER:"硬體驅動",ROUND_HALF_UP:"四捨五入",ROUND_HALF_DOWN:"五捨六入",ROUND_UP:"無條件進位",ROUND_DOWN:"無條件捨去",CUSTOM:"自訂",CAN_NOT_CHECKOUT:"無法結帳",NOT_INPUT:"不輸入",INPUT_RETURN_REASON:"輸入退貨原因",SHOW_MESSAGE:"顯示訊息",UNIFORM_PRICE:"統一價格",PRICE_AREA:"價格區",STORE_PRICE:"門市金額",DEFAULT:"系統預設",CATEGORY:"類別",ORDER_AREA:"菜單",Quantity:"數量",PRODUCT_CATEGORY:"依類別",PRODUCT_TYPE:"依性質",PRODUCT:"依商品",SALE_METHOD:"依銷售方式",SALE_METHOD_AND_PRODUCT_CATEGORY:"依銷售方式 + 類別",SALE_METHOD_AND_PRODUCT_TYPE:"依銷售方式 + 性質",SALE_METHOD_AND_PRODUCT:"依銷售方式 + 商品",MAIN_NAME:"商品名稱",SECOND_NAME:"第二名稱",SHORT_NAME:"簡稱",TAG:"標籤",KITCHEN_ORDER:"廚房單",KITCHEN_SUMMARY_ORDER:"廚房總單",SALE_DATE:"銷售日期",SALE_TIME:"銷售時間",TAKE_NO:"取餐號碼",MACHINE_ID:"機號",SALES_ORDER:"銷貨單",CUSTOMER_ORDER:"客戶訂貨單",TICKET_SALES:"票券銷售",INVOICE_SUMMARY:"發票彙開",POSTING:"補登",PLATFORM_BUSINESS:"平台商",MOBILE_OR_TELEPHONE:"手機號碼/電話",VIP_ID:"會員編號",QR_CODE:"QR-Code",BLESSING:"祝福語",PICKUP_TIME:"取餐時間",MEMO:"整單備註",SEQUENCE:"順序",UNUSED:"未使用",USING:"使用中",USED:"已使用",CREATED:"建立",ISSUED:"開立",NORMAL:"正常",VOID:"作廢",BLANK:"空白",TAXABLE:"應稅",TAX_EXEMPT:"免稅",ZERO_TAX:"零稅","應稅":"TAXABLE","免稅":"TAX_EXEMPT","零稅":"ZERO_TAX",SALES_ORDER:"銷貨單",BY_CHECKOUT_TIME:"依結帳時間",BY_CLEARING_TABLE_TIME:"依清桌時間",BY_SUMMARIZING_ORDERS:"依單據彙總",BY_SUMMARIZING_ITEMS:"依品項彙總",BY_BREAKING_ITEMS_DOWN:"依品項展開",BY_SUMMARIZING_ORDERS_AND_BREAKING_ITEM:"依單據彙總 + 品項展開",CUP_QUANTITY:"杯數",SALE_PRICE:"售價",TABLE_NO:"桌號",USER_NAME:"收銀員名稱",DEMOGRAPHIC:"客層",TOTAL_QUANTITY:"總數量",PRODUCT_ELEMENT:"商品成份",NOT_SET:"未設定",RECEIPT_PRINTER:"收據出單機",INVOICE_PRINTER:"發票出單機",MACHINE_CONFIG:"機台設定",RECEIPT_CONFIG:"發票設定",PARAMS_CONFIG:"參數設定",POS_CONFIG:"收銀設定",ACCOUNT_CONFIG:"帳條設定",ORDER_CONFIG:"接單設定",DEVICE_CONFIG:"裝置設定",PAYMENT_CONFIG:"門店管理付款方式設定",INVOICE_BUYS_CONFIG:"發票購入維護",INVOICE_ISSUANCE_CONFIG:"發票開立維護",NOT_PRINT:"一律不列印",PENDING_ORDER_NOT_PRINT:"掛單不列印(其他流程依參數設定決定)",BY_QUERY_WINDOW:"依詢問視窗選擇",CANCEL_ORDER:"一律取消訂單",PICK_WRONG_ORDER:"一律視為取錯單",BY_MACHINE_CONFIG:"依[裝置設定]參數設定",ACTIVE:"已生效",INACTIVE:"未生效",EXPIRED:"已過期",SPECIAL_SALE:"特賣促銷"},c=e=>o[e]||e},c535:function(e,t,a){"use strict";function o(e){return e.toString().padStart(2,"0")}a.d(t,"g",(function(){return c})),a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return s})),a.d(t,"h",(function(){return d})),a.d(t,"d",(function(){return r})),a.d(t,"a",(function(){return i})),a.d(t,"e",(function(){return l})),a.d(t,"f",(function(){return m}));const c=e=>e?[e.getFullYear(),o(e.getMonth()+1),o(e.getDate())].join("-"):e,n=e=>[e.getFullYear(),o(e.getMonth()+1),o(e.getDate())].join("/"),s=e=>{const t=e.getHours(),a=e.getMinutes();return`${o(t)}:${o(a)}`},d=e=>`${e.getFullYear()}${o(e.getMonth()+1)}`,r=(e,t)=>new Date(e.setDate(e.getDate()-t)),i=e=>{const t=/-/gi,a=e.replace(t,"/");return a},l=e=>{const t=e.split("-"),a=parseInt(t[0]),o=parseInt(t[1])-1,c=parseInt(t[2]);return new Date(a,o,c)},m=e=>{const t=new Date,a=e.split(":"),o=parseInt(a[0]),c=parseInt(a[1]);return t.setHours(o),t.setMinutes(c),t}},c579:function(e,t,a){"use strict";a("59eb")},d0db:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));const o=(e,t)=>e.length>t?e.substring(0,t)+"...":e},dd88:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));const o=e=>{const t=e.target.className.includes("ri-sort-desc");let a="desc";return t?(e.target.classList.remove("ri-sort-desc"),e.target.classList.add("ri-sort-asc"),a="asc"):(e.target.classList.remove("ri-sort-asc"),e.target.classList.add("ri-sort-desc"),a="desc"),a},c=(e,t)=>{const a=o(e),c=e.target.getAttribute("data-sort-period"),n=e.target.getAttribute("data-sort-category"),s=e.target.getAttribute("data-sort-item"),d=e.target.getAttribute("data-sort-member"),r=e.target.getAttribute("data-sort-store"),i=e.target.getAttribute("data-sort-member-id"),l=e.target.getAttribute("data-sort-member-name"),m=e.target.getAttribute("data-sort-company"),p=e.target.getAttribute("data-sort-area"),u=e.target.getAttribute("data-sortTarget");return c?"asc"===a?t.sort((e,t)=>e[c][s]<t[c][s]?1:-1):"desc"===a&&t.sort((e,t)=>e[c][s]>t[c][s]?1:-1):d?"asc"===a?t.sort((e,t)=>e[d][s]<t[d][s]?1:-1):"desc"===a&&t.sort((e,t)=>e[d][s]>t[d][s]?1:-1):n?"asc"===a?t.sort((e,t)=>e[n][s]<t[n][s]?1:-1):"desc"===a&&t.sort((e,t)=>e[n][s]>t[n][s]?1:-1):r?"asc"===a?t.sort((e,t)=>e[r][s]<t[r][s]?1:-1):"desc"===a&&t.sort((e,t)=>e[r][s]>t[r][s]?1:-1):i?"asc"===a?t.sort((e,t)=>e.member.id<t.member.id?1:-1):"desc"===a&&t.sort((e,t)=>e.member.id>t.member.id?1:-1):l?"asc"===a?t.sort((e,t)=>e.member.name<t.member.name?1:-1):"desc"===a&&t.sort((e,t)=>e.member.name>t.member.name?1:-1):m?"asc"===a?t.sort((e,t)=>e.company.id<t.company.id?1:-1):"desc"===a&&t.sort((e,t)=>e.company.id>t.company.id?1:-1):p?"asc"===a?t.sort((e,t)=>e.area.id<t.area.id?1:-1):"desc"===a&&t.sort((e,t)=>e.area.id>t.area.id?1:-1):"totalOrderPrice"==u?"asc"===a?t.sort((e,t)=>e.charges.total.amount<t.charges.total.amount?1:-1):"desc"===a&&t.sort((e,t)=>e.charges.total.amount>t.charges.total.amount?1:-1):"delivery"==u?"asc"===a?t.sort((e,t)=>e.delivery.id<t.delivery.id?1:-1):"desc"===a&&t.sort((e,t)=>e.delivery.id>t.delivery.id?1:-1):"acceptancePrice"==u?"asc"===a?t.sort((e,t)=>e.charges.acceptance.amount<t.charges.acceptance.amount?1:-1):"desc"===a&&t.sort((e,t)=>e.charges.acceptance.amount>t.charges.acceptance.amount?1:-1):"differencePrice"==u?"asc"===a?t.sort((e,t)=>e.charges.difference.amount<t.charges.difference.amount?1:-1):"desc"===a&&t.sort((e,t)=>e.charges.difference.amount>t.charges.difference.amount?1:-1):"supplierId"==u?"asc"===a?t.sort((e,t)=>e.supplier.id<t.supplier.id?1:-1):"desc"===a&&t.sort((e,t)=>e.supplier.id>t.supplier.id?1:-1):"asc"===a?t.sort((e,t)=>e[s]<t[s]?1:-1):"desc"===a&&t.sort((e,t)=>e[s]>t[s]?1:-1),t}},e560:function(e,t,a){"use strict";a("7490")},ebd9:function(e,t,a){}}]);