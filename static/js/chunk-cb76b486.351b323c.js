(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cb76b486"],{1386:function(e,t,r){"use strict";var c=r("7a23");const o=e=>(Object(c["pushScopeId"])("data-v-68b49299"),e=e(),Object(c["popScopeId"])(),e),a={key:0,class:"row g-0"},s={class:"col-md-3 border-end"},l={class:"stickySidebar position-sticky"},n=o(()=>Object(c["createElementVNode"])("p",{class:"bg-light py-2 ps-3 mb-3"},"類別",-1)),i={class:"searchlist-input input-group ps-2 pe-3 mb-3"},d=o(()=>Object(c["createElementVNode"])("span",{class:"input-group-text text-secondary bg-transparent pe-0 ri-search-line"},null,-1)),b={class:"list-unstyled dropdown-list ps-2 pe-3 mb-0",ref:"categorySidebar"},p=["onClick"],m={class:"col-md-9"},E=o(()=>Object(c["createElementVNode"])("p",{class:"bg-light py-2 ps-3 mb-3"},"商品",-1)),u={class:"d-between ps-3 mb-3"},h={class:"searchlist-input input-group w-25"},O=o(()=>Object(c["createElementVNode"])("span",{class:"input-group-text text-secondary bg-transparent pe-0 ri-search-line"},null,-1)),g=o(()=>Object(c["createElementVNode"])("option",{value:"ALL"},"全部",-1)),v=o(()=>Object(c["createElementVNode"])("option",{value:"ON_SHELVE",selected:""},"銷售商品",-1)),y=o(()=>Object(c["createElementVNode"])("option",{value:"OFF_SHELVE"},"停售商品",-1)),f=[g,v,y],j={class:"ps-4 pe-2"},N=Object(c["createStaticVNode"])('<div class="row bg-light border-bottom py-2" data-v-68b49299><div class="col-3" data-v-68b49299><p class="text-center" data-v-68b49299>商品編號</p></div><div class="col-4" data-v-68b49299><p class="text-center" data-v-68b49299>商品名稱</p></div><div class="col-3" data-v-68b49299><p class="text-center" data-v-68b49299>商品圖片</p></div><div class="col-2" data-v-68b49299><p class="text-center" data-v-68b49299>商品銷/停售</p></div></div>',1),R={class:"col-3 d-center"},S={class:"col-4 d-center"},_={class:"col-3"},w={class:"thumbnail bg-center"},k={class:"col-2 d-center"},I={class:"form-check form-switch"},V=["id","onUpdate:modelValue"],C=["for"],D={key:1,class:"mt-5"},T={class:"fs-5 text-secondary text-center"},A={key:1,class:"d-center"},x=o(()=>Object(c["createElementVNode"])("p",{class:"fs-5 text-primary py-5 mt-5"},"此類別無商品",-1)),L=[x],P={key:1,class:"text-center fs-2 fw-bold py-5 mt-5"};function B(e,t,r,o,g,v){const y=Object(c["resolveDirective"])("bgImg"),x=Object(c["resolveDirective"])("preventReClick");return e.categories.length>0?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",a,[Object(c["createElementVNode"])("div",s,[Object(c["createElementVNode"])("div",l,[n,Object(c["createElementVNode"])("div",i,[d,Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>g.categoryKeyword=e),class:"form-control form-control-sm border-start-0 ps-2",placeholder:"搜尋類別","aria-label":"搜尋類別"},null,512),[[c["vModelText"],g.categoryKeyword]])]),Object(c["createElementVNode"])("ul",b,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(v.filterCategories,e=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{key:e.id,class:Object(c["normalizeClass"])(["form-check border-bottom",{active:g.targetCategoryId==e.id}])},[Object(c["createElementVNode"])("button",{type:"button",class:"d-between btn px-0 w-100",onClick:t=>v.setTargetCategoryInfo(e.id)},Object(c["toDisplayString"])(e.name),9,p)],2))),128))],512)])]),Object(c["createElementVNode"])("div",m,[E,e.hasOnlineProducts?(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:0},[Object(c["createElementVNode"])("div",u,[Object(c["createElementVNode"])("div",h,[O,Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>g.productKeyword=e),class:"form-control form-control-sm border-start-0 ps-2",placeholder:"搜尋商品","aria-label":"搜尋類別"},null,512),[[c["vModelText"],g.productKeyword]])]),Object(c["createElementVNode"])("select",{class:"shelveStatus form-select w-20","aria-label":"商品銷售狀態篩選欄位",onChange:t[2]||(t[2]=e=>v.changeShelveStatus(e))},f,32)]),Object(c["createElementVNode"])("div",j,[N,v.filterCategoryProducts.length>0?(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],{key:0},Object(c["renderList"])(v.filterCategoryProducts,e=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:"row border-bottom py-3",key:e.id},[Object(c["createElementVNode"])("div",R,[Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(e.id),1)]),Object(c["createElementVNode"])("div",S,[Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(e.title),1)]),Object(c["createElementVNode"])("div",_,[Object(c["withDirectives"])(Object(c["createElementVNode"])("div",w,null,512),[[y,e.img]])]),Object(c["createElementVNode"])("div",k,[Object(c["createElementVNode"])("div",I,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{class:"switchBtn form-check-input",type:"checkbox",id:e.id,"onUpdate:modelValue":t=>e.on_shelve=t,onClick:t[3]||(t[3]=(...e)=>v.changeProductShelveStatus&&v.changeProductShelveStatus(...e))},null,8,V),[[c["vModelCheckbox"],e.on_shelve],[x,"1500"]]),Object(c["createElementVNode"])("label",{class:Object(c["normalizeClass"])(["form-check-label switchBtnLabel",{on:e.on_shelve,off:!e.on_shelve}]),for:e.id},Object(c["toDisplayString"])(e.on_shelve?"銷售":"停售"),11,C)])])]))),128)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",D,[Object(c["createElementVNode"])("p",T," 此類別無"+Object(c["toDisplayString"])("ON_SHELVE"==g.shelveStatus?"銷售":"停售")+"商品 ",1)]))])],64)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",A,L))])])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("p",P," 目前沒有任何商品類別及商品 "))}var M=r("5502"),U={data(){return{productList:"",categoryKeyword:"",productKeyword:"",targetCategoryId:"",shelveStatus:"ON_SHELVE"}},watch:{onlineProducts:{immediate:!0,deep:!0,handler(){this.productList=this.onlineProducts}},filterCategories:{immediate:!0,deep:!0,handler(){this.filterCategories.length>0&&this.setTargetCategoryInfo(this.filterCategories[0].id)}}},computed:{...Object(M["c"])(["categories","onlineProducts","hasOnlineProducts"]),filterCategories(){if(Array.isArray(this.categories)){const e=JSON.parse(JSON.stringify(this.categories)),t=e.filter(e=>e.name.match(this.categoryKeyword));return t}return[]},filterCategoryProducts(){if(Array.isArray(this.onlineProducts)){const e=JSON.parse(JSON.stringify(this.onlineProducts)),t=e.filter(e=>e.title.match(this.productKeyword)||e.id.match(this.productKeyword));return t}return[]}},methods:{setTargetCategoryInfo(e){this.targetCategoryId=e,this.setTargetCategoryProducts(e),window.scroll(0,0)},setTargetCategoryProducts(e){const t={category_id:e,sale_status:this.shelveStatus};this.$store.dispatch("getOnlineProducts",t)},changeShelveStatus(e){this.shelveStatus=e.target.value,this.setTargetCategoryProducts(this.targetCategoryId)},changeProductShelveStatus(e){e.target.checked?(e.target.labels[0].textContent="銷售",e.target.labels[0].classList.add("on"),e.target.labels[0].classList.remove("off")):(e.target.labels[0].textContent="停售",e.target.labels[0].classList.add("off"),e.target.labels[0].classList.remove("on")),this.changeProductStatus(e.target.id,e.target.checked)},changeProductStatus(e,t){const r={product:{id:e,on_shelve:t},category_id:this.targetCategoryId,sale_status:this.shelveStatus};this.$store.dispatch("updateProductStatus",r)}},mounted(){window.addEventListener("scroll",()=>{window.pageYOffset>0&&this.$refs.categorySidebar?this.$refs.categorySidebar.style.height="calc(100vh - 240px)":0===window.pageYOffset&&(this.$refs.categorySidebar.style.height="calc(100vh - 300px)")})}},H=(r("b493"),r("6b0d")),K=r.n(H);const F=K()(U,[["render",B],["__scopeId","data-v-68b49299"]]);t["a"]=F},"19aa":function(e,t,r){var c=r("3a9b"),o=TypeError;e.exports=function(e,t){if(c(t,e))return e;throw o("Incorrect invocation")}},b493:function(e,t,r){"use strict";r("dec8")},b7ef:function(e,t,r){"use strict";var c=r("23e7"),o=r("da84"),a=r("d066"),s=r("5c6c"),l=r("9bf2").f,n=r("1a2d"),i=r("19aa"),d=r("7156"),b=r("e391"),p=r("cf98"),m=r("0d26"),E=r("83ab"),u=r("c430"),h="DOMException",O=a("Error"),g=a(h),v=function(){i(this,y);var e=arguments.length,t=b(e<1?void 0:arguments[0]),r=b(e<2?void 0:arguments[1],"Error"),c=new g(t,r),o=O(t);return o.name=h,l(c,"stack",s(1,m(o.stack,1))),d(c,this,v),c},y=v.prototype=g.prototype,f="stack"in O(h),j="stack"in new g(1,2),N=g&&E&&Object.getOwnPropertyDescriptor(o,h),R=!!N&&!(N.writable&&N.configurable),S=f&&!R&&!j;c({global:!0,constructor:!0,forced:u||S},{DOMException:S?v:g});var _=a(h),w=_.prototype;if(w.constructor!==_)for(var k in u||l(w,"constructor",s(1,_)),p)if(n(p,k)){var I=p[k],V=I.s;n(_,V)||l(_,V,s(6,I.c))}},c41f:function(e,t,r){"use strict";r.r(t);var c=r("7a23");const o={class:"container-fluid"};function a(e,t,r,a,s,l){const n=Object(c["resolveComponent"])("ProductShelf");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",o,[Object(c["createVNode"])(n)])}r("b7ef");var s=r("1386"),l={data(){return{}},components:{ProductShelf:s["a"]},watch:{$route:{immediate:!0,deep:!0,handler(){this.getMstoreData()}}},methods:{getMstoreData(){const e=new URL(location.href),t=e.searchParams.get("data"),r=JSON.parse(window.atob(t));sessionStorage.setItem("mstore",r.token),sessionStorage.setItem("store_id",r.store_id),this.$store.dispatch("getCategories",r.store_id)}},mounted(){}},n=r("6b0d"),i=r.n(n);const d=i()(l,[["render",a]]);t["default"]=d},cf98:function(e,t){e.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},dec8:function(e,t,r){}}]);